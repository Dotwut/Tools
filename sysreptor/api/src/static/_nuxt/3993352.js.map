{"version":3,"sources":["webpack:///../packages/markdown/mdext/helpers.js","webpack:///./utils/urls.js","webpack:///./node_modules/url-join/lib/url-join.js","webpack:///../packages/markdown/mdext/footnotes.js","webpack:///../packages/markdown/mdext/gfm.js","webpack:///../packages/markdown/mdext/rehypePlugins.js","webpack:///../packages/markdown/mdext/attrs.js","webpack:///../packages/markdown/mdext/image.js","webpack:///../packages/markdown/mdext/tables.js","webpack:///../packages/markdown/editor/annotatedtext.js","webpack:///../packages/markdown/mdext/templates.js","webpack:///../packages/markdown/mdext/todo.js","webpack:///../packages/markdown/mdext/codeHighlight.js","webpack:///../packages/markdown/index.js","webpack:///./components/Markdown/Preview.vue","webpack:///./components/Markdown/ToolbarButton.vue?d91e","webpack:///../packages/markdown/editor/micromark-utils.js","webpack:///../packages/markdown/editor/codemirror-utils.js","webpack:///../packages/markdown/editor/commands.js","webpack:///./components/Markdown/Toolbar.vue?d686","webpack:///./components/Markdown/Preview.vue?5240","webpack:///../packages/markdown/editor/language.js","webpack:///../packages/markdown/editor/highlight.js","webpack:///../packages/markdown/editor/utils.js","webpack:///../packages/markdown/editor/spellcheck.js","webpack:///./components/Markdown/Statusbar.vue?888f","webpack:///./components/Markdown/FieldContent.vue?d0a1","webpack:///./components/Markdown/ToolbarButton.vue?c569","webpack:///./components/Markdown/ToolbarButton.vue?3446","webpack:///./components/Markdown/ToolbarButton.vue?9578","webpack:///./components/Markdown/ToolbarButton.vue","webpack:///./components/Markdown/ToolbarButton.vue?f373","webpack:///./components/Markdown/Toolbar.vue?59b1","webpack:///./components/Markdown/Toolbar.vue?c68c","webpack:///./components/Markdown/Preview.vue?672c","webpack:///./components/Markdown/Preview.vue?1de9","webpack:///./components/Markdown/Toolbar.vue","webpack:///./components/Markdown/Toolbar.vue?0924","webpack:///./components/Markdown/Toolbar.vue?f936","webpack:///./components/Markdown/Preview.vue?4fd4","webpack:///./components/Markdown/Preview.vue?95cb","webpack:///./mixins/MarkdownEditorBase.js","webpack:///./components/Markdown/Statusbar.vue?749d","webpack:///./components/Markdown/Statusbar.vue?db11","webpack:///./components/Markdown/Statusbar.vue","webpack:///./components/Markdown/Statusbar.vue?ef32","webpack:///./components/Markdown/Statusbar.vue?8ab1","webpack:///./components/Markdown/FieldContent.vue?aee0","webpack:///./components/Markdown/FieldContent.vue?99e6","webpack:///./components/Markdown/FieldContent.vue?eec6","webpack:///./components/Markdown/FieldContent.vue","webpack:///./components/Markdown/FieldContent.vue?21aa"],"names":["addRemarkExtension","self","micromarkExtensions","fromMarkdownExtensions","toMarkdownExtensions","data","add","field","value","push","assert","bool","msg","Error","i","absoluteApiUrl","url","axios","some","p","startsWith","urlJoin","URL","defaults","baseURL","window","location","origin","CursorPaginationFetcher","toast","this","nextPageURL","isLoading","hasError","errorData","hasNextPage","$get","res","next","results","response","global","requestError","error","SearchableCursorPaginationFetcher","searchFilters","search","_searchFilters","_fetchNextPageDebounced","debounce","_fetchNextPage","fetcher","_createFetcher","searchParams","URLSearchParams","split","Object","entries","k","v","Array","isArray","delete","e","append","set","searchUrl","toString","val","assign","fetchNextPage","filters","fetchNextPageImmediate","flush","normalize","strArray","resultArray","length","TypeError","match","first","shift","replace","component","str","join","parts","arguments","slice","call","remarkFootnotes","_hiddenFootnoteSupport","text","codes","caret","tokenize","effects","ok","nok","code","enter","consume","exit","inlineFootnoteStart","leftSquareBracket","resolveAll","resolveAllFootnote","rightSquareBracket","hasStart","index","events","type","resolveTo","context","token","openIndex","undefined","group","start","end","note","splice","parser","constructs","insideSpan","null","footnoteSyntax","inlineFootnote","children","unsafe","character","inConstruct","handlers","footnote","node","_","subexit","containerPhrasing","before","after","remarkToRehypeHandlersFootnotes","h","all","footnoteDefinition","footnoteReference","rehypeFootnoteSeparator","tree","visit","parent","tagName","class","rehypeFootnoteSeparatorPreview","properties","dataFootnoteRef","nextSibling","remarkStrikethrough","gfmStrikethrough","gfmStrikethroughFromMarkdown","gfmStrikethroughToMarkdown","remarkTaskListItem","gfmTaskListItem","gfmTaskListItemFromMarkdown","gfmTaskListItemToMarkdown","rehypeLinkTargetBlank","href","target","rel","rehypeConvertAttrsToStyle","convertAttrs","attrName","styleName","style","addClass","className","rehypeRewriteImageSources","rewriteImageSource","src","rehypeRewriteFileLinks","rewriteFileUrl","download","rehypeTemplates","content","attrsFromMarkdown","transforms","prevNode","hProperties","attrs","attrsString","textAttributes","setData","buffer","cleaned","getData","attribute","resume","stack","sliceSerialize","textAttributeClassValue","parseEntities","textAttributeIdValue","textAttributeName","textAttributeValue","list","remarkToRehypeAttrs","attributes","remarkAttrs","name","leftCurlyBrace","factoryAttributes","map","c","remarkFigure","image","title","alt","label","fragment","peek","safeOptions","quote","checkQuote","suffix","tracker","track","move","current","test","safe","figureToMarkdown","remarkToRehypeHandlersFigure","normalizeUri","remarkTables","gfmTable","gfmTableFromMarkdown","gfmTableToMarkdown","remarkTableCaptions","captionBlock","captionText","captionPrefixLength","captionVal","captionValTrimmed","trimStart","position","column","offset","tableCaption","remarkToRehypeHandlersTableCaptions","rehypeTableCaptions","tableNode1","tableNode2","createBlockSeparator","pos","micromarkToAnnotatedText","micromarkEventsToTree","leafNodes","interpretAsLeafNodes","interpretAsLeafNodesFns","wrapTypesWithBlockSeparators","collectLeafNodes","t","n","wrapWithSeparators","includes","extractLeafNodesFromMicromarkTree","textTypes","markupTypesInterpretAs","annotatedText","markup","interpretAs","annotatedTextParse","Parser","parseMicromarkEvents","extensions","remarkTemplateVariables","closeBraceCount","start2","between","eof","rightCurlyBrace","sequenceClose","templateVariable","remarkTodoMarker","uppercaseT","tokenizeTodo","lowercaseT","middleO","uppercaseO","lowercaseO","middleDorDash","dash","middleD","uppercaseD","lowercaseD","endO","todoSyntax","todo","hName","splitTreeAtPosition","splitPos","processChildren","flat","currentPos","childrenLeft","childrenRight","processNode","pc","nodeLength","wrapTreeAreas","wrapInfos","wi","startMarkerPos","endMarkerPos","ci","wii","concat","markerTree","rehypeHighlightCode","meta","metaLine","fromEntries","from","matchAll","m","camelCase","groups","highlightManual","lineNumbers","Number","parseInt","parseMeta","highlightInfos","highlightMarkerRe","highlightedAreaRe","RegExp","codeNew","highlightInfo","startMarker","endMarker","parseManualHighlightAreas","language","filter","toLowerCase","getLanguage","lowlight","highlight","highlightSyntax","hi","unified","use","rehypeParse","parse","applyManualHighlighting","lines","line","dataLineNumber","splitIntoLines","rehypeSanitizeSchema","merge","defaultSchema","allowComments","clobberPrefix","tagNames","markdownParser","renderMarkdownToHtml","preview","rewriteFileSource","md","remarkParse","remarkRehype","allowDangerousHtml","footnoteLabelTagName","rehypeRaw","rehypeSanitize","rehypeStringify","mdHtml","processSync","markdownToAnnotatedText","props","String","default","Function","renderedMarkdownRaw","imageCache","computed","renderedMarkdown","html","imgCacheEntry","replaceAll","placeholder","watch","updatePreview","created","throttle","renderMarkdown","methods","to","fetchImage","$nextTick","$axios","responseType","imgRes","imageType","endsWith","imgData","Buffer","status","imgSrc","apiUrl","__esModule","module","locals","exports","config","postprocess","document","write","preprocess","action","treeNode","linesInRange","doc","range","out","startLine","lineAt","number","endLine","getChildren","firstChild","intersectsRange","getIntersectionNodes","predicate","nodes","cb","iterateChildren","topNode","iterateRange","clamp","min","max","Math","moveRangeDelete","moveRange","change","moveStart","moveEnd","EditorSelection","moveRangeInsert","insert","Context","spaceBefore","spaceAfter","item","maxWidth","trailing","result","itemNumber","getContext","selectedNode","cur","startPos","exec","len","sliceString","renumberList","changes","prev","insertNewlineContinueMarkup","state","dispatch","syntaxTree","dont","changeByRange","empty","markdownLanguage","isActiveAt","resolveInner","pop","inner","emptyLine","delTo","marker","cursor","prevLine","quoted","continued","blank","charAt","lineBreak","update","scrollIntoView","userEvent","isMark","deleteMarkupBackward","scan","childBefore","lastChild","contextNodeForDelete","spaceEnd","isTypeInSelection","selection","ranges","toggleMarkdownAction","isInSelection","enable","disable","foundNodes","toggleMarkerType","markerTypes","insertText","newRange","flatMap","cn","toggleStrong","toggleEmphasis","toggleStrikethrough","toggleListUnordered","listItemNumber","find","removeMarkers","toggleListOrdered","listItemBullet","toggleLink","linksToRemove","insertCodeBlock","codeBlockStart","codeBlockEnd","insertTable","markdownLanguageFacet","defineLanguageFacet","block","open","close","markdownHighlighting","styleTags","strong","emphasis","strikethrough","tags","inlinecode","codeblock","table","heading1","heading2","heading3","heading4","heading5","heading6","link","nodeSet","NodeSet","NodeType","none","idx","define","id","extend","languageDataProp","indentNodeProp","micromarkToLezerSyntaxTree","visitTree","visitNode","addListItem","currentListItem","info","listItems","modifySyntaxTree","Tree","build","toBuffer","nodeId","types","topID","lezerSyntaxTreeParse","BlockContext","input","fragments","stoppedAt","read","MarkdownParser","mdParser","parseMixed","htmlLanguage","overlay","matchClosingTags","Language","markdown","LanguageSupport","Prec","high","keymap","of","key","run","Tag","markdownHighlightStyle","tagHighlighter","tag","angleBracket","attributeName","attributeValue","comment","markdownHighlightCodeBlocks","ViewPlugin","fromClass","view","Decoration","updateDecorations","builder","RangeSetBuilder","iterate","l","decorations","finish","createEditorExtensionToggler","extension","compartment","Compartment","get","reconfigure","StateEffect","appendConfig","createEditorCompartment","targetApply","exExtension","SPELLING_RULE_IDS","STYLE_ISSUE_TYPES","spellcheck","performSpellcheckRequest","performSpellcheckAddWordRequest","linter","annotation","spellcheckResults","matches","severity","r","rule","renderMessage","elt","category","message","urls","actions","replacements","apply","word","diagnostics","forEachDiagnostic","d","setDiagnostics","delay","underline","color","encodeURIComponent","svg","spellcheckTheme","EditorView","theme","listStyle","fontSize","backgroundColor","paddingBottom","display","marginBottom","marginLeft","marginRight","width","textAlign","marginTop","opacity","background","backgroundSize","fontWeight","paddingLeft","height","borderRadius","left","top","borderLeft","backgroundImage","___CSS_LOADER_EXPORT___","___CSS_LOADER_API_IMPORT___","icon","required","disabled","Boolean","active","_self","scopedSlots","_vm","_c","fn","proxy","installComponents","SBtn","STooltip","editorView","uploadFiles","fileUploadInProgress","editorMode","$store","settings","markdownEditorMode","commit","spellcheckSupported","getters","features","spellcheckEnabled","canUndo","undoDepth","canRedo","redoDepth","undo","redo","err","console","onUploadFiles","event","files","$refs","fileInput","staticClass","_v","staticRenderFns","MarkdownToolbarButton","domProps","_s","uploadFile","lang","emits","editorActions","valueNotNull","forceLinting","mounted","initializeEditorView","beforeDestroy","destroy","editor","EditorState","create","history","allowMultipleSelections","lineWrapping","tabSize","indentUnit","defaultKeymap","indentWithTab","historyKeymap","syntaxHighlighting","updateListener","viewUpdate","docChanged","$emit","additionalCodeMirrorExtensions","editable","readOnly","domEventHandlers","drop","stopPropagation","preventDefault","dropPos","posAtCoords","x","clientX","y","clientY","dataTransfer","paste","clipboardData","handleInput","handleBlur","Promise","file","$toast","mdFileText","u","main","$post","fileUploadEnabled","currentLineNumber","head","currentColNumber","lineCount","wordCount","count","charCodeAt","_e","mixins","MarkdownEditorBase","directives","ref","MarkdownToolbar","MarkdownPreview","MarkdownStatusbar"],"mappings":";0GAAO,SAASA,EAAmBC,EAAMC,EAAqBC,EAAwBC,GACpF,IAAMC,KAAOJ,EAAKI,OAUlB,SAASC,EAAIC,EAAOC,IAIhBH,KAAKE,GAASF,KAAKE,GAAUF,KAAKE,GAAS,IAGxCE,KAAKD,EACZ,CAhBAF,EAAI,sBAAuBJ,GAC3BI,EAAI,yBAA0BH,GAC9BG,EAAI,uBAAwBF,EAe9B,CAGO,SAASM,EAAOC,EAAMC,GAC3B,IAAKD,EACH,MAAM,IAAIE,MAAMD,EAEpB,CA3BA,mE,ilDCCA,smGAAAE,GAAA,wBAAAA,EAAA,sBAAAA,GAAA,iBAAAA,GAAA,qtDAAAA,EAAA,yBAAAA,GAAA,IAAAA,EAAA,uBAAAA,GAAA,4bAAAA,EAAA,yBAAAA,GAAA,IAAAA,EAAA,uBAAAA,GAAA,yhBAAAA,EAAA,yBAAAA,GAAA,IAAAA,EAAA,uBAAAA,GAAA,qGAAAA,EAAA,yBAAAA,GAAA,IAAAA,EAAA,uBAAAA,GAAA,28BAAAA,EAAA,iBAAAA,EAAA,EAAAA,IAAA,EAAAA,GAAA,EAAAA,GAAA,2bAAAA,EAAA,EAAAA,EAAA,SAAAA,IAAA,SAAAA,GAAA,2NAEO,SAASC,EAAeC,EAAKC,GAClC,MAAI,CAAC,OAAQ,QAAQC,MAAK,SAAAC,GAAC,OAAIH,EAAII,WAAWD,EAAE,IACvCH,EACEA,EAAII,WAAW,SACjBC,YAAQ,IAAIC,IAAIL,EAAMM,SAASC,QAASC,OAAOC,UAAUC,OAAQX,GAEjEK,YAAQJ,EAAMM,SAASC,QAASR,EAE3C,CAaO,IAAMY,EAAuB,WAClC,WAAYJ,EAASP,EAAOY,GAAO,UACjCC,KAAKb,MAAQA,EACba,KAAKD,MAAQA,EACbC,KAAKN,QAAUA,EAEfM,KAAKC,YAAcD,KAAKN,QACxBM,KAAKE,WAAY,EACjBF,KAAKzB,KAAO,GACZyB,KAAKG,UAAW,EAChBH,KAAKI,UAAY,IACnB,CAIC,MAwBA,OA5BA,4BAED,WACE,OAA4B,OAArBJ,KAAKC,WACd,GAAC,0CAED,2FACOD,OAAQA,KAAKE,WAAcF,KAAKK,YAAW,iDAKxB,OALwB,SAK9CL,KAAKE,WAAY,EAAK,SAEJF,KAAKb,MAAMmB,KAAKN,KAAKC,aAAY,OAA7CM,EAAM,EAAH,KACTP,KAAKC,YAAcM,EAAIC,MACvB,EAAAR,KAAKzB,MAAKI,KAAI,UAAI4B,EAAIE,UAEtBT,KAAKG,UAAW,EAChBH,KAAKI,UAAY,KAAK,kDAEtBJ,KAAKG,UAAW,EAChBH,KAAKI,WAAY,4BAAe,QAAf,OAAOM,gBAAQ,WAAf,IAAiBnC,OAAQ,KAE1CyB,KAAKD,MAAMY,OAAOC,aAAa,CAAEC,MAAK,OAAI,QAEnB,OAFmB,UAE1Cb,KAAKE,WAAY,EAAM,6EAE1B,iDAvCiC,GA0CvBY,EAAiC,WAC5C,cAAuE,IAAzDpB,EAAO,EAAPA,QAAO,IAAEqB,qBAAa,IAAG,GAAEC,OAAQ,IAAI,EAAE7B,EAAK,EAALA,MAAOY,EAAK,EAALA,MAAK,UACjEC,KAAKb,MAAQA,EACba,KAAKD,MAAQA,EACbC,KAAKN,QAAUA,EACfM,KAAKiB,eAAiBF,EAEtBf,KAAKkB,wBAA0BC,oBAAS,WAAanB,KAAKoB,gBAAkB,GAAG,KAE/EpB,KAAKqB,QAAU,KACfrB,KAAKsB,gBACP,CA8DC,MAaA,OA3EA,iCAED,WAEE,IADA,IAAMC,EAAe,IAAIC,gBAAgBxB,KAAKN,QAAQ+B,MAAM,KAAK,IACjE,MAAqBC,OAAOC,QAAQ3B,KAAKe,eAAc,eAAE,CAApD,gBAAOa,EAAC,KAAEC,EAAC,KACd,GAAIA,EACF,GAAIC,MAAMC,QAAQF,GAAI,CACpBN,EAAaS,OAAOJ,GAAG,IACN,EADM,IACPC,GAAC,IAAjB,IAAK,EAAL,qBAAmB,KAARI,EAAC,QACVV,EAAaW,OAAON,EAAGK,EACzB,CAAC,+BACH,MACEV,EAAaY,IAAIP,EAAGC,EAG1B,CACA,IAAMO,EAAYpC,KAAKN,QAAQ+B,MAAM,KAAK,GAAK,IAAMF,EAAac,WAClErC,KAAKqB,QAAU,IAAIvB,EAAwBsC,EAAWpC,KAAKb,MAAOa,KAAKD,MACzE,GAAC,oBAED,SAAOuC,GACLtC,KAAKiB,eAAiBS,OAAOa,OAAOvC,KAAKiB,eAAgB,CAAED,OAAQsB,IACnEtC,KAAKsB,iBACLtB,KAAKwC,eACP,GAAC,0BAED,SAAaC,GACXf,OAAOa,OAAOvC,KAAKiB,eAAgBwB,GACnCzC,KAAKsB,iBACLtB,KAAK0C,wBACP,GAAC,yBAED,WACE,OAAO1C,KAAKiB,cACd,GAAC,uBAED,WACE,OAAOjB,KAAKe,cAAcC,MAC5B,EAAC,IAED,SAAgBsB,GACdtC,KAAKgB,OAAOsB,EAAKtC,KAAKiB,eACxB,GAAC,uBAED,WACE,OAAOjB,KAAKqB,QAAQhB,WACtB,GAAC,oBAED,WACE,OAAOL,KAAKqB,QAAQlB,QACtB,GAAC,qBAED,WACE,OAAOH,KAAKqB,QAAQjB,SACtB,GAAC,gBAED,WACE,OAAOJ,KAAKqB,QAAQ9C,IACtB,GAAC,2BAED,WACEyB,KAAKkB,yBACP,GAAC,2CAED,8FACQlB,KAAKqB,QAAQmB,gBAAe,gDACnC,iFAED,WACOxC,OAILA,KAAKkB,0BACLlB,KAAKkB,wBAAwByB,QAC/B,KAAC,EAtF2C,E,mCClE9C,SAASC,EAAWC,GAClB,IAAIC,EAAc,GAClB,GAAwB,IAApBD,EAASE,OAAgB,MAAO,GAEpC,GAA2B,iBAAhBF,EAAS,GAClB,MAAM,IAAIG,UAAU,kCAAoCH,EAAS,IAInE,GAAIA,EAAS,GAAGI,MAAM,iBAAmBJ,EAASE,OAAS,EAAG,CAC5D,IAAIG,EAAQL,EAASM,QACrBN,EAAS,GAAKK,EAAQL,EAAS,EACjC,CAGIA,EAAS,GAAGI,MAAM,gBACpBJ,EAAS,GAAKA,EAAS,GAAGO,QAAQ,gBAAiB,UAEnDP,EAAS,GAAKA,EAAS,GAAGO,QAAQ,gBAAiB,SAGrD,IAAK,IAAIpE,EAAI,EAAGA,EAAI6D,EAASE,OAAQ/D,IAAK,CACxC,IAAIqE,UAAYR,EAAS7D,GAEzB,GAAyB,iBAAdqE,UACT,MAAM,IAAIL,UAAU,kCAAoCK,WAGxC,KAAdA,YAEArE,EAAI,IAENqE,UAAYA,UAAUD,QAAQ,SAAU,KAIxCC,UAFErE,EAAI6D,EAASE,OAAS,EAEZM,UAAUD,QAAQ,SAAU,IAG5BC,UAAUD,QAAQ,SAAU,KAG1CN,EAAYnE,KAAK0E,WAEnB,CAEA,IAAIC,EAAMR,EAAYS,KAAK,KAOvBC,GAHJF,EAAMA,EAAIF,QAAQ,kBAAmB,OAGrB3B,MAAM,KAGtB,OAFA6B,EAAME,EAAML,SAAWK,EAAMT,OAAS,EAAI,IAAK,IAAMS,EAAMD,KAAK,IAGlE,CAEe,SAAShE,IAStB,OAAOqD,EANqB,iBAAjBa,UAAU,GACXA,UAAU,GAEV,GAAGC,MAAMC,KAAKF,WAI1B,CArEA,iC,+YCgPO,SAASG,IACd1F,YAAmB8B,KAnNrB,WAA0B,MAExB,MAAO,CACL6D,uBAAwB,CAAC,EACzBC,MAAI,SACDC,IAAMC,MAAQ,CACbC,SAaN,SAAqCC,EAASC,EAAIC,GAChD,OAGA,SAAeC,MAMb,OALAzF,YAAOyF,OAASN,IAAMC,MAAO,gBAC7BE,EAAQI,MAAM,uBACdJ,EAAQI,MAAM,wBACdJ,EAAQK,QAAQF,MAChBH,EAAQM,KAAK,wBACNC,CACT,EAGA,SAASA,EAAoBJ,MAC3B,OAAIA,OAASN,IAAMW,kBACVN,EAAIC,OAGbH,EAAQI,MAAM,6BACdJ,EAAQK,QAAQF,MAChBH,EAAQM,KAAK,6BACbN,EAAQM,KAAK,uBACNL,EACT,CACF,EArCMQ,WAAYC,IACb,IACAb,IAAMc,mBAAqB,CAC1BrG,IAAK,QACLyF,SAoCN,SAAmCC,EAASC,EAAIC,GAC9C,IAAMjG,EAAO6B,KACb,OAGA,SAAeqE,MACbzF,YAAOyF,OAASN,IAAMc,mBAAoB,gBAM1C,IALA,IAEIC,EAFAC,EAAQ5G,EAAK6G,OAAOjC,OAKjBgC,KACL,GAAmC,wBAA/B5G,EAAK6G,OAAOD,GAAO,GAAGE,KAAgC,CACxDH,GAAW,EACX,KACF,CAGF,OAAKA,GAILZ,EAAQI,MAAM,qBACdJ,EAAQI,MAAM,2BACdJ,EAAQK,QAAQF,MAChBH,EAAQM,KAAK,2BACbN,EAAQM,KAAK,qBACNL,GAREC,EAAIC,KASf,CACF,EAjEMM,WAAYC,EACZM,UA0FN,SAA8BF,EAAQG,GAQpC,IAPA,IAEIC,EAEAC,EAJAN,EAAQC,EAAOjC,OAAS,EAOrBgC,KAIL,GAHAK,EAAQJ,EAAOD,GAAO,GAGG,UAArBC,EAAOD,GAAO,IAAiC,wBAAfK,EAAMH,KAAgC,CACxEI,EAAYN,EACZ,KACF,CAIFnG,iBAAqB0G,IAAdD,EAAyB,oCAGhC,IAAME,EAAQ,CACZN,KAAM,iBACNO,MAAO9D,OAAOa,OAAO,CAAC,EAAGyC,EAAOK,GAAW,GAAGG,OAC9CC,IAAK/D,OAAOa,OAAO,CAAC,EAAGyC,EAAOA,EAAOjC,OAAS,GAAG,GAAG0C,MAGhD3B,KAAO,CACXmB,KAAM,qBACNO,MAAO9D,OAAOa,OAAO,CAAC,EAAGyC,EAAOK,EAAY,GAAG,GAAGI,KAClDA,IAAK/D,OAAOa,OAAO,CAAC,EAAGyC,EAAOA,EAAOjC,OAAS,GAAG,GAAGyC,QAGhDE,EAAO,CACX,CAAC,QAASH,EAAOJ,GACjBH,EAAOK,EAAY,GACnBL,EAAOK,EAAY,GACnBL,EAAOK,EAAY,GACnBL,EAAOK,EAAY,GACnB,CAAC,QAASvB,KAAMqB,IAuBlB,OApBAQ,YACED,EACAA,EAAK3C,OACL,EACA4B,YACEQ,EAAQS,OAAOC,WAAWC,WAAWC,KACrCf,EAAOtB,MAAM2B,EAAY,GAAI,GAC7BF,IAIJO,EAAK/G,KACH,CAAC,OAAQmF,KAAMqB,GACfH,EAAOA,EAAOjC,OAAS,GACvBiC,EAAOA,EAAOjC,OAAS,GACvB,CAAC,OAAQwC,EAAOJ,IAGlBQ,YAAOX,EAAQD,EAAOC,EAAOjC,OAASgC,EAAOW,GAEtCV,CACT,IAzJK,IAsEL,SAASJ,EAAmBI,GAK1B,IAJA,IAEII,EAFAL,GAAS,IAIJA,EAAQC,EAAOjC,QACtBqC,EAAQJ,EAAOD,GAAO,GAEG,UAArBC,EAAOD,GAAO,IAAiC,wBAAfK,EAAMH,OACxCG,EAAMH,KAAO,OAEbD,EAAOW,OAAOZ,EAAQ,EAAG,IAI7B,OAAOC,CACT,CAoEF,CA2C2BgB,GArClB,CACL1B,MAAO,CACL2B,eAOJ,SAA6Bb,GAC3BpF,KAAKsE,MAAM,CAACW,KAAM,WAAYiB,SAAU,IAAKd,EAC/C,GAPEZ,KAAM,CACJyB,eAQJ,SAA4Bb,GAC1BpF,KAAKwE,KAAKY,EACZ,IAIO,CACLe,OAAQ,CAAC,CAACC,UAAW,IAAKC,YAAa,CAAC,WAAY,QAAS,eAC7DC,SAAU,CAACC,SAGb,SAAkBC,EAAMC,EAAGtB,GACzB,IAAMX,EAAOW,EAAQb,MAAM,YACrBoC,EAAUvB,EAAQb,MAAM,SACxB5F,EAAQ,KAAOiI,YAAkBH,EAAMrB,EAAS,CAACyB,OAAQ,IAAKC,MAAO,MAAQ,IAGnF,OAFAH,IACAlC,IACO9F,CACT,IAOF,CAMO,IAAMoI,EAAkC,CAC7CP,SAAQ,SAACQ,EAAGP,GACV,OAAOO,EAAEP,EAAM,WAAYQ,YAAID,EAAGP,GACpC,EACAS,mBAAkB,SAACF,EAAGP,GACpB,OAAO,IACT,EACAU,kBAAiB,SAACH,EAAGP,GACnB,OAAO,IACT,GAIK,SAASW,IAEd,OAAO,SAAAC,GAAI,OAAIC,YAAMD,EAAM,WAAW,SAACZ,EAAMzB,EAAOuC,GAAW,MACxC,aAAjBd,EAAKe,SAAkE,cAAd,QAA1B,EAAAD,EAAOpB,SAASnB,EAAQ,UAAE,aAA1B,EAA4BwC,UAC7DD,EAAOpB,SAASP,OAAOZ,EAAQ,EAAG,EAAGgC,eAAE,MAAO,CAACS,MAAO,4BAE1D,GAAE,CACJ,CAGO,SAASC,IACd,OAAO,SAAAL,GAAI,OAAIC,YAAMD,EAAM,WAAW,SAACZ,EAAMzB,EAAOuC,GAAW,YAE7D,GAAqB,QAAjBd,EAAKe,SAA8C,IAAzBf,EAAKN,SAASnD,QAAiC,QAAjB,EAACyD,EAAKN,SAAS,UAAE,OAAY,QAAZ,EAAhB,EAAkBwB,kBAAU,OAA5B,EAA8BC,gBAA3F,CAGAnB,EAAKN,SAAWM,EAAKN,SAAS,GAAGA,SAGjC,IAAM0B,EAAcN,EAAOpB,SAASnB,EAAQ,GACf,SAAzB6C,aAAW,EAAXA,EAAaL,UAAqD,IAAhCK,EAAY1B,SAASnD,QAAwC,QAAxB,EAAC6E,EAAY1B,SAAS,UAAE,OAAY,QAAZ,EAAvB,EAAyBwB,kBAAU,OAAnC,EAAqCC,iBAGjHL,EAAOpB,SAASP,OAAOZ,EAAQ,EAAG,EAAGgC,eAAE,MAAO,CAACS,MAAO,2BAA4B,CAAC,MARnF,CASF,GAAE,CACJ,C,4CCvRO,SAASK,IACd3J,YAAmB8B,KAAM8H,cAAoBC,IAA8BC,IAC7E,CAGO,SAASC,IACd/J,YAAmB8B,KAAMkI,IAAiBC,IAA6BC,IACzE,C,izCCTO,SAASC,IACd,OAAO,SAAAjB,GACLC,YAAMD,EAAM,WAAW,SAAAZ,GACA,MAAjBA,EAAKe,UAAqBf,EAAKkB,WAAWY,MAAQ,KAAKhJ,WAAW,OACpEkH,EAAKkB,WAAWa,OAAS,SACzB/B,EAAKkB,WAAWc,IAAM,+BAE1B,GACF,CACF,CAKO,SAASC,IACd,IAAMC,EAAe,CACnB,MAAS,QACT,OAAU,UAGZ,OAAO,SAAAtB,GACLC,YAAMD,EAAM,WAAW,SAAAZ,GACrB,IAAK,IAAL,MAAoC9E,OAAOC,QAAQ+G,GAAa,eAAE,CAA7D,gBAAOC,EAAQ,KAAEC,EAAS,KAC7B,GAAIpC,EAAKkB,WAAWiB,GAAW,CAC7B,IAAIE,MAASrC,EAAKkB,WAAWmB,OAAS,GAClCA,OAAqC,MAA5BA,MAAMA,MAAM9F,OAAS,KAChC8F,OAAS,KAEXA,OAASD,EAAY,IAAMpC,EAAKkB,WAAWiB,GAAY,IACvDnC,EAAKkB,WAAWmB,MAAQA,MACxBrC,EAAKkB,WAAWiB,QAAYrD,CAC9B,CACF,CACF,GACF,CACF,CAGO,SAASwD,EAAStC,EAAMuC,GAIC,OAHzBvC,EAAKkB,WAAWqB,YACnBvC,EAAKkB,WAAWqB,UAAY,IAE1BjH,MAAMC,QAAQgH,KAChB,EAAAvC,EAAKkB,WAAWqB,WAAUpK,KAAI,UAAIoK,IAElCvC,EAAKkB,WAAWqB,UAAUpK,KAAKoK,EAEnC,CAGO,SAASC,EAA0B,GAAsB,IAArBC,EAAkB,EAAlBA,mBACzC,OAAO,SAAA7B,GAAI,OAAIC,YAAMD,EAAM,WAAW,SAAAZ,GACf,QAAjBA,EAAKe,SAAqBf,EAAKkB,WAAWwB,KAAOD,IACnDzC,EAAKkB,WAAWwB,IAAMD,EAAmBzC,EAAKkB,WAAWwB,KAE7D,GAAE,CACJ,CAGO,SAASC,EAAuB,GAAoB,IAAlBC,EAAc,EAAdA,eACvC,OAAO,SAAAhC,GAAI,OAAIC,YAAMD,EAAM,WAAW,SAAAZ,GAAQ,QACvB,MAAjBA,EAAKe,SAAkC,QAAnB,EAAIf,EAAKkB,kBAAU,OAAM,QAAN,EAAf,EAAiBY,YAAI,OAArB,EAAuBhJ,WAAW,YAAc8J,IAC1E5C,EAAKkB,WAAWY,KAAOc,EAAe5C,EAAKkB,WAAWY,MACtD9B,EAAKkB,WAAW2B,UAAW,EAC3BP,EAAStC,EAAM,CAAC,wBAAyB,SAAU,MAAO,sBAE9D,GAAE,CACJ,CAGO,SAAS8C,IACd,OAAO,SAAAlC,GAAI,OAAIC,YAAMD,EAAM,WAAW,SAAAZ,GACH,MAAZ,aAAjBA,EAAKe,UACPf,EAAKN,UAAuB,QAAZ,EAAAM,EAAK+C,eAAO,aAAZ,EAAcrD,WAAY,GAC1CM,EAAKe,QAAU,OAEnB,GAAE,CACJ,C,ssDC3CA,SAASiC,IACP,MAAO,CACLC,WAAY,CA2Dd,SAA6CrC,GAE3CC,YAAMD,GAAM,SAACZ,EAAMzB,EAAOuC,GACxB,GAAkB,eAAdd,EAAKvB,KAAuB,CAC9B,IAAMyE,EAAW3E,EAAQ,EAAIuC,EAAOpB,SAASnB,EAAQ,GAAK,KACtD2E,GAA8B,SAAlBA,EAASzE,KAEvByE,EAASnL,KAAO,EAAH,KAAOmL,EAASnL,MAAI,IAAEoL,YAAanD,EAAKoD,SAGrDpD,EAAKvB,KAAO,OACZuB,EAAK9H,MAAQ8H,EAAKqD,mBACXrD,EAAKoD,aACLpD,EAAKqD,YAEhB,CACF,GACF,GA3EEvF,MAAO,CACLwF,eAWJ,SAAyB1E,GACvBpF,KAAK+J,QAAQ,sBAAuB,IACpC/J,KAAKsE,MAAM,CAACW,KAAM,aAAc2E,MAAO,CAAC,EAAGC,YAAa,IAAKzE,GAC7DpF,KAAKgK,QACP,GAbExF,KAAM,CACJsF,eAmCJ,SAAwB1E,GACtB,IAC2D,EADrD6E,EAAU,CAAC,EAAE,E,goBAAA,CACKjK,KAAKkK,QAAQ,wBAAsB,IAA3D,IAAK,EAAL,qBAA6D,KAAlDC,EAAS,QACG,UAAjBA,EAAU,IAAkBF,EAAQzC,MACtCyC,EAAQzC,OAAS,IAAM2C,EAAU,GAEjCF,EAAQE,EAAU,IAAMA,EAAU,EAEtC,CAAC,+BAEDnK,KAAK+J,QAAQ,uBACb/J,KAAKoK,SAEL,IAAM5D,EAAOxG,KAAKqK,MAAMrK,KAAKqK,MAAMtH,OAAS,GAC5CyD,EAAKoD,MAAQK,EACbzD,EAAKqD,YAAc7J,KAAKsK,eAAelF,GACvCpF,KAAKwE,KAAKY,EACZ,EAnDImF,wBAkBJ,SAAiCnF,GAClBpF,KAAKkK,QAAQ,uBACrBvL,KAAK,CAAC,QAAS6L,YAAcxK,KAAKsK,eAAelF,KACxD,EApBIqF,qBAYJ,SAA8BrF,GACfpF,KAAKkK,QAAQ,uBACrBvL,KAAK,CAAC,KAAM6L,YAAcxK,KAAKsK,eAAelF,KACrD,EAdIsF,kBA0BJ,SAA2BtF,GAGzBpF,KAAKkK,QAAQ,uBAAuBvL,KAAK,CAACqB,KAAKsK,eAAelF,GAAQ,IACxE,EA7BIuF,mBAoBJ,SAA4BvF,GAC1B,IAAMwF,EAAO5K,KAAKkK,QAAQ,uBAC1BU,EAAKA,EAAK7H,OAAS,GAAG,GAAKyH,YAAcxK,KAAKsK,eAAelF,GAC/D,GA6CF,CAsBO,IAAMyF,EAAsB,CACjCC,WAAU,SAAC/D,EAAGP,GAEZ,OAAO,IACT,GAGK,SAASuE,KACd7M,YAAmB8B,KA5IZ,CACLgL,KAAM,QACNlH,KAAM,KACHC,IAAMkH,eAAiB,CACtBhH,SAKN,SAA4BC,EAASC,EAAIC,GAEvC,OAAO8G,YACLhH,EACAC,EACAC,EACA,iBACA,uBACA,gBACA,kBACA,qBACA,oBACA,iCACA,4BACA,qBACA,2BACA,yBAEJ,KAiHwCoF,IA1BjC,CACLlD,SAAU,CACRwE,WAIJ,SAAoBtE,EAAMC,EAAGtB,GAC3B,IAAMX,EAAOW,EAAQb,MAAM,cACrB5F,EAAQ8H,EAAKqD,aAAenI,OAAOC,QAAQ6E,EAAKoD,OAAOuB,KAAI,YAAY,aAAVvJ,EAAC,KAAEC,EAAC,KACrE,MAAU,OAAND,EAAqB,IAAMC,EAChB,UAAND,EAAwBC,EAAEJ,MAAM,KAAK0J,KAAI,SAAAC,GAAC,MAAI,IAAMA,CAAC,IAAE7H,KAAK,KACvD,GAAP,OAAU3B,EAAC,YAAIC,EACxB,IAAG0B,KAAK,KAER,OADAiB,IACO9F,CACT,IAYF,C,giDCzBO,SAAS2M,KACdnN,YAAmB8B,KAAM,CAAC,EAlHnB,CACLsE,MAAO,CACLgH,MAOJ,SAAoBlG,GAClBpF,KAAKsE,MAAM,CAACW,KAAM,QAASsG,MAAO,KAAMrM,IAAK,GAAIsM,IAAK,KAAMtF,SAAU,IAAKd,EAC7E,GAPEZ,KAAM,CACJiH,MAYJ,SAAmBrG,GACjB,IAAMsG,EAAoC1L,KAAKqK,MAAMrK,KAAKqK,MAAMtH,OAAS,GACnErE,EAAQsB,KAAKoK,SACb5D,EAEFxG,KAAKqK,MAAMrK,KAAKqK,MAAMtH,OAAS,GAInC/C,KAAK+J,QAAQ,eAAe,GAG5BvD,EAAKN,SAAWwF,EAASxF,SACP,UAAdM,EAAKvB,OACPuB,EAAKgF,IAAM9M,EAEf,IAIF,WAGE,OAFA4M,MAAMK,KAAO,iBAAM,GAAG,EAEf,CACLrF,SAAU,CACRgF,cAIJ,SAASA,MAAM9E,EAAMC,EAAGtB,EAASyG,GAC/B,IAAMC,EAAQC,aAAW3G,GACnB4G,EAAmB,MAAVF,EAAgB,QAAU,aACnCrH,EAAOW,EAAQb,MAAM,SACvBoC,EAAUvB,EAAQb,MAAM,SACtB0H,EAAUC,gBAAML,GAClBlN,EAAQsN,EAAQE,KAAK,MAuDzB,OAtDAxN,GAASsN,EAAQE,KACfvF,YAAkBH,EAAMrB,EAAS,IAC/ByB,OAAQlI,EACRmI,MAAO,MACJmF,EAAQG,aAGfzN,GAASsN,EAAQE,KAAK,MAEtBxF,KAIIF,EAAKtH,KAAOsH,EAAK+E,OAEnB,eAAea,KAAK5F,EAAKtH,MAEzBwH,EAAUvB,EAAQb,MAAM,sBACxB5F,GAASsN,EAAQE,KAAK,KACtBxN,GAASsN,EAAQE,KACfG,aAAKlH,EAASqB,EAAKtH,IAAK,IAAC0H,OAAQlI,EAAOmI,MAAO,KAAQmF,EAAQG,aAEjEzN,GAASsN,EAAQE,KAAK,OAGtBxF,EAAUvB,EAAQb,MAAM,kBACxB5F,GAASsN,EAAQE,KACfG,aAAKlH,EAASqB,EAAKtH,IAAK,IACtB0H,OAAQlI,EACRmI,MAAOL,EAAK+E,MAAQ,IAAM,KACvBS,EAAQG,cAKjBzF,IAEIF,EAAK+E,QACP7E,EAAUvB,EAAQb,MAAM,QAAUyH,GAClCrN,GAASsN,EAAQE,KAAK,IAAML,GAC5BnN,GAASsN,EAAQE,KACfG,aAAKlH,EAASqB,EAAK+E,MAAO,IACxB3E,OAAQlI,EACRmI,MAAOgF,GACJG,EAAQG,aAGfzN,GAASsN,EAAQE,KAAKL,GACtBnF,KAGFhI,GAASsN,EAAQE,KAAK,KACtB1H,IAEO9F,CACT,CAEF,CAIqD4N,GACrD,CAGO,IAAMC,GAA+B,CAC1CjB,MAAK,SAACvE,EAAGP,GAEP,IAAMoD,GAASpD,EAAKjI,MAAQ,CAAC,GAAGoL,aAAe,CAAC,EAMhD,OALKnD,EAAKjI,OACRiI,EAAKjI,KAAO,CAAC,GAEfiI,EAAKjI,KAAKoL,YAAc,CAAC,EAElB5C,EAAEP,EAAM,SAAU,CACvBO,EAAEP,EAAM,MAAO,IAAC0C,IAAKsD,aAAahG,EAAKtH,KAAMsM,IAAKhF,EAAKgF,KAAQ5B,KAAO,UAClEpD,EAAKN,SAASnD,OAAS,EAAI,CAACgE,EAAEP,EAAM,aAAcQ,YAAID,EAAGP,KAAU,KAE3E,G,sBCtIK,SAASiG,KACdvO,YAAmB8B,KAAM0M,KAAUC,KAAsBC,eAC3D,CAyDO,SAASC,KACd3O,YAAmB8B,KAAM,CAAC,EAtDnB,CACLyJ,WAAY,CAGd,SAA+BrC,GAC7BC,YAAMD,GAAM,SAACZ,EAAMzB,EAAOuC,GACxB,GAAkB,UAAdd,EAAKvB,KAAkB,CACzB,IAAM6H,EAAexF,EAAOpB,SAASnB,EAAQ,GAC7C,GAAI+H,GAAsC,cAAtBA,EAAa7H,MAAwB6H,EAAa5G,SAASnD,OAAS,GAAuC,SAAlC+J,EAAa5G,SAAS,GAAGjB,KAAiB,CACrI,IAAM8H,EAAcD,EAAa5G,SAAS,GACtC8G,EAAsB,EAQ1B,GAPID,EAAYrO,MAAMY,WAAW,KAC/B0N,EAAsB,EACbD,EAAYrO,MAAMY,WAAW,YACtC0N,EAAsB,GAIpBA,EAAqB,CACvB,IAAMC,EAAaF,EAAYrO,MAAMgF,MAAMsJ,GACrCE,EAAoBD,EAAWE,YACrCH,GAAuBC,EAAWlK,OAASmK,EAAkBnK,OAE7DgK,EAAYrO,MAAQqO,EAAYrO,MAAMgF,MAAMsJ,GAC5CD,EAAYK,SAAS5H,MAAM6H,QAAUL,EACrCD,EAAYK,SAAS5H,MAAM8H,QAAUN,EAGrCF,EAAa7H,KAAO,cACtB,CACF,CACF,CACF,GACF,IAKO,CACLqB,SAAU,CAACiH,aAGb,SAAsB/G,EAAMC,EAAGtB,EAASyG,GACtC,IAAMpH,EAAOW,EAAQb,MAAM,gBACrBoC,EAAUvB,EAAQb,MAAM,YACxB5F,EAAQ,UAAYiI,YAAkBH,EAAMrB,EAASyG,GAG3D,OAFAlF,IACAlC,IACO9F,CACT,IAMF,CAGO,IAAM8O,GAAsC,CACjDD,aAAY,SAACxG,EAAGP,GACd,OAAOO,EAAEP,EAAM,UAAWQ,YAAID,EAAGP,GACnC,GAGK,SAASiH,KACd,OAAO,SAAArG,GAAI,OACTC,YAAMD,EAAM,WAAW,SAACZ,EAAMzB,EAAOuC,GACnC,GAAqB,YAAjBd,EAAKe,QAAuB,CAE9B,IAAMmG,EAAapG,EAAOpB,SAASnB,EAAQ,GACrC4I,EAAarG,EAAOpB,SAASnB,EAAQ,GACvC2I,GAAqC,UAAvBA,EAAWnG,SAC3BmG,EAAWxH,SAASvH,KAAK6H,GACzBc,EAAOpB,SAASP,OAAOZ,EAAO,IACrB2I,GAAkC,SAApBA,EAAWzI,MAAwC,OAArByI,EAAWhP,OAAyC,UAAvBiP,EAAWpG,UAC7FoG,EAAWzH,SAASvH,KAAK6H,GACzBc,EAAOpB,SAASP,OAAOZ,EAAO,GAElC,CACF,GAAE,CACN,C,siCC3FA,SAAS6I,GAAqBC,GAC5B,MAAO,CACL5I,KAAM,8BACNnB,KAAM,GACNoC,SAAU,GACV5B,MAAO,CACLW,KAAM,8BACNO,MAAOqI,EACPpI,IAAKoI,GAEPrJ,KAAM,CACJS,KAAM,8BACNO,MAAOqI,EACPpI,IAAKoI,GAGX,CA6BA,SAASC,GAAyBhK,KAAMkB,GAKtC,IAJA,IAAMoC,EAAO2G,aAAsBjK,KAAMkB,GAIhChG,EAAIoI,EAAKrE,OAAS,EAAG/D,GAAK,EAAGA,IACpCoI,EAAKzB,OAAO3G,EAAG,EAAG4O,GAAqBxG,EAAKpI,GAAGsF,MAAMkB,QAIvD,IAsByB,EAtBnBwI,EArCD,SAA2C5G,EAAM,GAA8F,QAA7F6G,4BAAoB,IAAG,KAAE,MAAEC,+BAAuB,IAAG,GAAC,EAAC,MAAEC,oCAA4B,IAAG,KAAE,EAC3IH,EAAY,GAElB,OAEA,SAASI,EAAiBC,GAAG,IACV,EADU,KACXA,GAAC,IAAjB,IAAK,EAAL,qBAAmB,OAARC,EAAC,QACJC,EAAqBJ,EAA6BK,SAASF,EAAErJ,MAC/DsJ,GACFP,EAAUrP,KAAKiP,GAAqBU,EAAEhK,MAAMkB,QAGpB,IAAtB8I,EAAEpI,SAASnD,QAAgBkL,EAAqBO,SAASF,EAAErJ,OAAwC,QAAnC,EAAIiJ,EAAwBI,EAAErJ,aAAK,OAA/B,OAAAiJ,EAAkCI,GACxGN,EAAUrP,KAAK2P,GAEfF,EAAiBE,EAAEpI,UAGjBqI,GACFP,EAAUrP,KAAKiP,GAAqBU,EAAE9J,KAAKiB,KAE/C,CAAC,+BACH,CApBA2I,CAAiBhH,GACV4G,CAoBT,CAcoBS,CAAkCrH,EAAM,CACxD6G,qBAAsB,CAAC,aAAc,WAAY,iBAAkB,iBAAkB,QAAS,WAAY,oBAC1GC,wBAAyB,CACvB,UAAa,SAAAI,GAAC,OAA0B,IAAtBA,EAAEpI,SAASnD,MAAY,GAE3CoL,6BAA8B,CAAC,WAO3BO,EAAY,CAAC,OAAQ,aAAc,mBACnCC,EAAyB,CAC7B,eAAkB,OAClB,WAAc,OACd,4BAA+B,OAC/B,SAAY,SACZ,iBAAoB,SACpB,UAAa,UAETC,EAAgB,GAAG,KACTZ,GAAS,IAAzB,IAAK,EAAL,qBAA2B,KAAhBM,EAAC,QACK,eAAXA,EAAErJ,KAEJ2J,EAAcjQ,KAAK,CACjBmF,KAAM,KACNwJ,OAAQgB,EAAEhK,MAAMkB,MAAM8H,SAEfoB,EAAUF,SAASF,EAAErJ,MAC9B2J,EAAcjQ,KAAK,CACjBmF,KAAMwK,EAAExK,KACRwJ,OAAQgB,EAAEhK,MAAMkB,MAAM8H,SAGxBsB,EAAcjQ,KAAK,CACjBkQ,OAAQP,EAAExK,KACVwJ,OAAQgB,EAAEhK,MAAMkB,MAAM8H,OACtBwB,YAAaH,EAAuBL,EAAErJ,OAAS,IAGrD,CAAC,+BACD,OAAO2J,CACT,CAGO,SAASG,KACd,IAAM3Q,EAAsB4B,KAAKzB,KAAK,wBAA0B,GAChEyB,KAAKgP,OAEL,SAAgBlL,MACd,IAAMkB,EAASiK,aAAqBnL,KAAM,CAACoL,WAAY9Q,IACvD,OAAO0P,GAAyBhK,KAAMkB,EACxC,CACF,CCbO,SAASmK,KA/FhB,I,MAgGEjR,YAAmB8B,KA/FZ,CACL8D,M,EAAM,G,EACHC,IAAMkH,e,EAAiB,CACtBhH,SAKN,SAAkCC,EAASC,EAAIC,GAC7C,IAAIgL,EAAkB,EACtB,OAEA,SAAe/K,MAIb,OAHAzF,YAAOyF,OAASN,IAAMkH,eAAgB,iBACtC/G,EAAQI,MAAM,oBACdJ,EAAQK,QAAQF,MACTgL,CACT,EACA,SAASA,EAAOhL,MACd,OAAIA,OAASN,IAAMkH,eACV7G,EAAIC,OAEbH,EAAQK,QAAQF,MACTiL,EACT,CACA,SAASA,EAAQjL,MACf,OAAIA,OAASN,IAAMwL,IACVnL,EAAIC,MACFA,OAASN,IAAMyL,iBAExBJ,EAAkB,EACXK,EAAcpL,QAErBH,EAAQK,QAAQF,MACTiL,EAEX,CACA,SAASG,EAAcpL,MACrB,OAAIA,OAASN,IAAMyL,iBACjBtL,EAAQK,QAAQF,MAGQ,KAFxB+K,GAAmB,IAIjBlL,EAAQM,KAAK,oBACNL,EAAGE,OAEHoL,GAGFH,EAAQjL,KAEnB,CACF,G,iGAMO,CACLC,MAAO,CACLoL,iBAOJ,SAA+BtK,GAC7BpF,KAAKsE,MAAM,CAACW,KAAM,mBAAoBvG,MAAO,IAAK0G,EACpD,GAPEZ,KAAM,CACJkL,iBAOJ,SAA8BtK,GACfpF,KAAKqK,MAAMrK,KAAKqK,MAAMtH,OAAS,GACvCrE,MAAQsB,KAAKsK,eAAelF,GACjCpF,KAAKwE,KAAKY,EACZ,IAIO,CACLkB,SAAU,CACRoJ,iBAIJ,SAA0BlJ,EAAMC,EAAGtB,GACjC,IAAMX,EAAOW,EAAQb,MAAM,oBACrB5F,EAAQ8H,EAAK9H,MAEnB,OADA8F,IACO9F,CACT,IAMF,C,yHCNO,SAASiR,KACdzR,YAAmB8B,KA3FrB,WAAsB,MACpB,MAAO,CACLgL,KAAM,OACNlH,MAAI,UACDC,IAAM6L,WAAa,CAClB3L,SAAU4L,IACX,KACA9L,IAAM+L,WAAa,CAClB7L,SAAU4L,IACX,IAIL,SAASA,EAAa3L,EAASC,EAAIC,GACjC,OAEA,SAAgBC,MAId,OAHAH,EAAQI,MAAM,QACdJ,EAAQI,MAAM,QACdJ,EAAQK,QAAQF,MACT0L,CACT,EACA,SAASA,EAAQ1L,MACf,MAAK,CAACN,IAAMiM,WAAYjM,IAAMkM,YAAYzB,SAASnK,OAGnDH,EAAQK,QAAQF,MACT6L,GAHE9L,EAAIC,KAIf,CACA,SAAS6L,EAAc7L,MACrB,OAAIA,MAAQN,IAAMoM,MAChBjM,EAAQK,QAAQF,MACT+L,GAEFA,EAAQ/L,KACjB,CACA,SAAS+L,EAAQ/L,MACf,MAAK,CAACN,IAAMsM,WAAYtM,IAAMuM,YAAY9B,SAASnK,OAGnDH,EAAQK,QAAQF,MACTkM,GAHEnM,EAAIC,KAIf,CACA,SAASkM,EAAKlM,MACZ,MAAK,CAACN,IAAMiM,WAAYjM,IAAMkM,YAAYzB,SAASnK,OAGnDH,EAAQK,QAAQF,MAChBH,EAAQM,KAAK,QACbN,EAAQM,KAAK,QACNL,EAAGE,OALDD,EAAIC,KAMf,CACF,CACF,CAsC2BmM,GAlClB,CACLlM,MAAO,CACLmM,KAOJ,SAAmBrL,GACjBpF,KAAKsE,MAAM,CAACW,KAAM,OAAQiB,SAAU,GAAI3H,KAAM,CAACmS,MAAO,OAAQ/G,YAAa,CAACnC,MAAO,UAAWpC,EAChG,GAPEZ,KAAM,CACJiM,KAOJ,SAAkBrL,GAChBpF,KAAKwE,KAAKY,EACZ,IAIO,CACLkB,SAAU,CACRmK,KAIJ,SAAcjK,EAAMC,EAAGtB,EAASyG,GAC9B,IAAMpH,EAAOW,EAAQb,MAAM,QACrB5F,EAAQiI,YAAkBH,EAAMrB,EAASyG,GAE/C,OADApH,IACO9F,CACT,IAMF,C,m1ICrBA,SAASiS,GAAoBvJ,EAAMwJ,GACjC,OAAO,SACFxJ,GAAI,IACPlB,SAAU2K,EAAgBzJ,EAAKlB,SAAU,GAAG4K,SAG9C,SAASD,EAAgB3K,EAAU6K,GACjC,IAGwB,EAHlBC,EAAe,GACfC,EAAgB,GAAG,KAET/K,GAAQ,IAAxB,IAAK,EAAL,qBAA0B,KACmB,EADjC,KACOgL,EADP,QACsBH,IAAW,IAA3C,IAAK,EAAL,qBAA6C,KAAlCI,EAAE,QACPJ,EAAaH,EACfI,EAAarS,KAAKwS,GAElBF,EAActS,KAAKwS,GAErBJ,GAAc1O,aAAS8O,GAAIpO,MAC7B,CAAC,+BACH,CAAC,+BACD,MAAO,CAACiO,EAAcC,EACxB,CAEA,SAASC,EAAY1K,EAAMuK,GACzB,IAAMK,EAAa/O,aAASmE,GAAMzD,OAClC,GAAIgO,EAAaH,GAAYG,EAAaK,EAAaR,EAAU,CAC/D,GAAkB,SAAdpK,EAAKvB,KACP,MAAO,CAAC,SACFuB,GAAI,IAAE9H,MAAO8H,EAAK9H,MAAMgF,MAAM,EAAGkN,EAAWG,KAAW,SACvDvK,GAAI,IAAE9H,MAAO8H,EAAK9H,MAAMgF,MAAMkN,EAAWG,MAG/C,IAAgF,KAA1CF,EAAgBrK,EAAKN,SAAU6K,GAAW,GAAzEC,EAAY,KAAEC,EAAa,KAClC,MAAO,CAAC,SACFzK,GAAI,IAAEN,SAAU8K,IAAY,SAC5BxK,GAAI,IAAEN,SAAU+K,IAG1B,CAEA,MAAO,CAACzK,EACV,CACF,CAGA,SAAS6K,GAAcjK,EAAMkK,GAAW,IACZ,EADY,KACrBA,GAAS,IAA1B,IAAK,EAAL,qBAA4B,KAAjBC,EAAE,QAEXnK,EAAOuJ,GAAoBvJ,EAAMmK,EAAGC,gBACpCpK,EAAOuJ,GAAoBvJ,EAAMmK,EAAGE,aACtC,CAEA,+BAEA,IADA,IAAMvL,EAAW,GAAG,WACXwL,EAAE,EAAeX,GACxB,IAAM3F,EAAIhE,EAAKlB,SAASwL,GACpBH,EAAKD,EAAUK,GAEfJ,GAAOR,GAAcQ,EAAGC,gBAAkBT,EAAa1O,aAAS+I,GAAGrI,QAAUwO,EAAGE,cAClFF,EAAGrL,UAAYqL,EAAGrL,UAAY,IAAI0L,OAAO,CAACxG,IAEtC2F,EAAa1O,aAAS+I,GAAGrI,QAAUwO,EAAGE,eACxCpK,YAAMkK,EAAGM,WAAY,WAAW,SAACrL,EAAMzB,EAAOuC,GACA,MAAvB,wBAAjBd,EAAKe,UACP,EAAAD,EAAOpB,UAASP,OAAM,SAACZ,EAAO,GAAC,UAAKwM,EAAGrL,WAE3C,IACAA,EAASvH,KAAI,MAAbuH,EAAQ,GAASqL,EAAGM,WAAW3L,WAC/ByL,GAAO,IAEAJ,GAAOR,IAAeQ,EAAGC,gBAAkBT,IAAeQ,EAAGE,cACtEpK,YAAMkK,EAAGM,WAAY,WAAW,SAACrL,EAAMzB,EAAOuC,GACvB,wBAAjBd,EAAKe,SACPD,EAAOpB,SAASP,OAAOZ,EAAO,EAElC,IACAmB,EAASvH,KAAI,MAAbuH,EAAQ,GAASqL,EAAGM,WAAW3L,WAC/BA,EAASvH,KAAKyM,GACduG,GAAO,GAEPzL,EAASvH,KAAKyM,GACf,KA3BMsG,EAAK,EAAGC,EAAM,EAAGZ,EAAa,EAAGW,EAAKtK,EAAKlB,SAASnD,OAAQgO,GAAc1O,aAAS+E,EAAKlB,SAASwL,IAAK3O,OAAQ2O,IAAM,EAApHA,EAAQC,EAASZ,GA+B1B,OADA3J,EAAKlB,SAAWA,EACTkB,CACT,CA4CO,SAAS0K,KACd,OAAO,SAAA1K,GAAI,OAAIC,YAAMD,EAAM,WAAW,SAACZ,EAAMzB,EAAOuC,GAClD,GAAqB,SAAjBd,EAAKe,SAAyC,QAAnBD,EAAOC,QAAmB,OACvDuB,EAASxB,EAAQ,cAEjB,IAAMyK,KAlLZ,SAAmBC,GACjB,IAAMD,KAAOrQ,OAAOuQ,YAClBnQ,MAAMoQ,KAAKF,EAASG,SAAQ,GAAC,mCAAiD,oBAC3EhH,KAAI,SAAAiH,GAAC,MAAI,CAACC,qBAAUD,EAAEE,OAAOtH,MAAOoH,EAAEE,OAAO5T,OAAS,KAAK,KAQhE,YAN6B4G,IAAzByM,KAAKQ,kBACPR,KAAKQ,gBAAkBR,KAAKQ,iBAAmB,UAExBjN,IAArByM,KAAKS,cACPT,KAAKS,YAAcC,OAAOC,SAASX,KAAKS,cAAgB,GAEnDT,IACT,CAsKmBY,EAAmB,QAAT,EAAAnM,EAAKjI,YAAI,aAAT,EAAWwT,OAAQ,IAG1C,EAvKN,SAAmC1N,KAAM0N,MACvC,IAAMa,EAAiB,GACvB,IAAKb,KAAKQ,iBAAmD,IAAhCR,KAAKQ,gBAAgBxP,OAC9C,MAAO,CAACsB,UAAMuO,kBAOlB,IAJA,IAAMC,EAAoB,KAAH,OAAQd,KAAKQ,gBAAe,eAAOR,KAAKQ,gBAAe,kBAAUR,KAAKQ,iBACvFO,EAAoB,IAAIC,OAAO,IAAD,OAAKF,EAAiB,iBAASd,KAAKQ,gBAAe,eAAOM,EAAiB,KAAK,KAC9GrP,EAAQa,KAAK5C,MAAMqR,GACrBE,EAAU,GACLhU,EAAI,EAAGA,EAAIwE,EAAMT,OAAQ/D,GAAK,EAErC,GADAgU,GAAWxP,EAAMxE,GACbA,EAAI,EAAIwE,EAAMT,OAAQ,CACxB,IAAMkQ,EAAgB,CACpBC,YAAa1P,EAAMxE,EAAI,GAAG0E,MAAM,EAAGF,EAAMxE,EAAI,GAAG+D,OAAS,GACzDyO,eAAgBwB,EAAQjQ,OACxBoQ,UAAW3P,EAAMxE,EAAI,GAAG0E,MAAM,EAAGF,EAAMxE,EAAI,GAAG+D,OAAS,GACvD0O,aAAc,GAEhBuB,GAAWxP,EAAMxE,EAAI,GACrBiU,EAAcxB,aAAeuB,EAAQjQ,OACrC6P,EAAejU,KAAKsU,EACtB,CAGF,MAAO,CAAC5O,KAAM2O,EAASJ,iBACzB,CA6IqCQ,CAA0B/Q,aAASmE,GAAOuL,MAAlE1N,KAAI,EAAJA,KAAMuO,EAAc,EAAdA,eAGTxL,EAzMV,SAAyB/C,KAAMmC,GAC7B,IAAM6M,EARR,SAAqB7M,GAAM,MACzB,QAAuB,QAAf,EAAAA,EAAKkB,kBAAU,aAAf,EAAiBqB,YAAa,IACnCuK,QAAO,SAAAlI,GAAC,OAAIA,EAAE9L,WAAW,YAAY,IACrC6L,KAAI,SAAAC,GAAC,OAAIA,EAAE1H,MAAM,GAAG6P,aAAa,IACjC,IAAM,MACX,CAGmBC,CAAYhN,GAE7BsC,EAAStC,EAAM,QACf,IACE,OAAOiN,KAASC,UAAUL,EAAUhP,KAKtC,CAJE,MAAOxD,GACP,IAAK,mBAAmBuL,KAAKvL,GAC3B,MAAMA,CAEV,CACA,MAAO,CACLoE,KAAM,OACNiB,SAAU,CAAC,CAACjB,KAAM,OAAQvG,MAAO2F,OAErC,CA0LiBsP,CAAgBtP,KAAMmC,GAG7BoM,EAAe7P,OAAS,IAC1BqE,EAxDR,SAAiCA,EAAMwL,GAAgB,IACtB,EADsB,KACpCA,GAAc,IAA/B,IAAK,EAAL,qBAAiC,KAAtBgB,EAAE,QAEXA,EAAG/B,WAAagC,cACbC,IAAIC,KAAa,CAACrI,UAAU,IAC5BsI,OAAOJ,EAAGV,aAAe,UAAY,2BAA6BU,EAAGT,WAAa,WACvF,CAAC,+BAED,OAAO9B,GAAcjK,EAAMwL,EAC7B,CA+CeqB,CAAwB7M,EAAMwL,IAIvCxL,EAhDN,SAAwBA,GACtB,IAE6C,EAFvC8M,EAAQ,GACVnD,EAAa,EAAE,KACA1O,aAAS+E,GAAM3F,MAAM,OAAK,IAA7C,IAAK,EAAL,qBAA+C,KAApC0S,KAAI,QACbD,EAAMvV,KAAK,CACT6S,eAAgBT,EAChBU,aAAcV,EAAaoD,KAAKpR,OAChC8O,WAAY,CACV5M,KAAM,OACNiB,SAAU,CACR,CACEjB,KAAM,UACNsC,QAAS,OACTG,WAAY,CACVqB,UAAW,CAAC,mBACZqL,eAAgBF,EAAMnR,OAAS,GAEjCmD,SAAU,CAAC,CAACjB,KAAM,UAAWsC,QAAS,sBAAuBrB,SAAU,UAK/E6K,GAAcoD,KAAKpR,OAAS,CAC9B,CAAC,+BAED,OAAOsO,GAAcjK,EAAM8M,EAC7B,CAsBaG,CAAejN,GAEtBZ,EAAKN,SAAWkB,EAAKlB,QACvB,KAA4B,SAAjBM,EAAKe,SACduB,EAAStC,EAAM,cAEnB,GAAE,CACJ,C,+wBCjNA,IAAM8N,GAAuBC,iBAAM,CAAC,EAAGC,KAAe,CACpDC,eAAe,EACfC,cAAe,KACfC,SAAU,CAAC,WAAY,YAAY/C,OAAO4C,KAAcG,UACxD7J,WAAY,CACV,IAAK,CAAC,YAAa,QAAS,QAAS,OAAQ,SAAS8G,OAAO4C,KAAc1J,WAAW,MACtF,EAAK,CAAC,YAAY8G,OAAO4C,KAAc1J,WAAc,MAKlD,SAAS8J,KAId,OAAOf,cACJC,IAAIlQ,GACJkQ,IAAIrH,IACJqH,IAAIjH,IACJiH,IAAIjM,GACJiM,IAAI7L,GACJ6L,IAAI3E,IACJ2E,IAAI/I,IACJ+I,IAAIzI,IACJyI,IAAInE,GACT,CAgBO,SAASkF,GAAqB/Q,MAAwD,6DAAJ,CAAC,EAAC,IAA/CgR,eAAO,IAAG,GAAK,MAAEC,yBAAiB,IAAG,OAAI,EAC7EC,EAAKJ,KACNd,IAAImB,KACJnB,IAAIoB,IAAc,CACjBC,oBAAoB,EACpBC,qBAAsB,KACtB9O,SAAU,eACJwO,EAAU,CAAC,EAAIhO,GAChByF,IACAiB,IACA3C,KAGNiJ,IAAIrL,GACJqL,IAAIrG,IACJqG,IAAIgB,EAAUrN,EAAiCN,GAC/C2M,IAAIhC,IACJgC,IAAIuB,KACJvB,IAAIzL,GACJyL,IAAIxK,GACJwK,IAAI9K,EAA2B,CAACC,mBAAoB8L,IACpDjB,IAAI3K,EAAwB,CAACC,eAAgB2L,IAC7CjB,IAAIwB,KAAgBhB,IACpBR,IAAIyB,KAQDC,EAASR,EAAGS,YAAY3R,MAAMpF,MACpC,OAAO8W,CACX,CAGO,SAASE,GAAwB5R,MAKtC,OAJW8Q,KACRd,IAAI/E,IACOiF,MAAMlQ,KAGtB,C,iUCzGA,0kPAIe,KACb6R,MAAO,CACLjX,MAAO,CACLuG,KAAM2Q,OACNC,QAAS,MAEXzM,eAAgB,CACdnE,KAAM6Q,SACND,QAAS,OAGbtX,KAAI,WACF,MAAO,CACLwX,oBAAqB,GACrBC,WAAY,GAEhB,EACAC,SAAU,CACRC,iBAAgB,WACd,IAC2C,EADvCC,KAAO,KAAKJ,oBAAoB,IACR,KAAKC,YAAU,IAA3C,2BAA6C,KAAlCI,EAAa,QAEpBD,KADEC,EAAc7X,KACT4X,KAAKE,WAAWD,EAAcE,YAAaF,EAAc7X,MAEzD4X,KAAKE,WAAWD,EAAcE,YAAa,GAEtD,CAAC,+BACD,OAAOH,IACT,GAEFI,MAAO,CACL7X,MAAK,WACH,KAAK8X,eACP,EACAR,WAAU,WACR,KAAKQ,eACP,GAEFC,QAAO,WACL,KAAKD,cAAgBE,mBAAS,KAAKC,eAAgB,KACnD,KAAKH,eACP,EACAI,QAAS,CACPD,eAAc,WAAG,WAEf,KAAKZ,oBAAsBlB,YAAqB,KAAKnW,OAAS,GAAI,CAChEmY,GAAI,OACJ/B,SAAS,EACTC,kBAAmB,KAAKA,oBAE1B,IAC2C,EAD3C,IAC4B,KAAKiB,YAAU,yBAAhCI,EAAa,QACjB,EAAKL,oBAAoBvH,SAAS4H,EAAcE,eACnD,EAAKN,WAAa,EAAKA,WAAW1C,QAAO,SAAArR,GAAC,OAAIA,IAAMmU,CAAa,IAClE,EAHH,2BAA6C,GAI5C,+BACH,EACMU,WAAU,SAACV,GAAe,IA7DpC,EA6DoC,cA7DpC,EA6DoC,oHACxB,EAAKW,YAAW,gCAGC,EAAKC,OAAO1W,KAAK8V,EAAclX,IAAK,CACvD+X,aAAc,gBACd,OAFIC,EAAM,OAGNC,EAAYf,EAAclX,IAAIqU,cAAc6D,SAAS,QAAU,YAChEhB,EAAclX,IAAIqU,cAAc6D,SAAS,SAAWhB,EAAclX,IAAIqU,cAAc6D,SAAS,SAAY,aACxG,QACAC,EAAU,QAAUF,EAAY,WAAaG,EAAOpF,KAAKgF,GAAQ7U,SAAS,UAChF+T,EAAc7X,KAAI,eAAW8Y,EAAO,KAAI,kDAGR,OAA5B,4BAAe,QAAf,OAAO3W,gBAAQ,WAAf,IAAiB6W,QACnBnB,EAAc7X,KAAO,GAErB,EAAKyX,WAAa,EAAKA,WAAW1C,QAAO,SAAArR,GAAC,OAAIA,IAAMmU,CAAa,IAClE,yDA/ET,gLAiFI,EACArB,kBAAiB,SAACyC,GAOhB,IAAK,KAAKpO,iBAAmBoO,EAAOlY,WAAW,KAC7C,OAAOkY,EAGT,IAAMC,EAAS,KAAKrO,eAAeoO,GACnC,GAAIA,EAAOlY,WAAW,WACpBkY,EAASvY,YAAewY,EAAQ,KAAKT,aAChC,IAAK,KAAKhB,WAAW5W,MAAK,SAAA6C,GAAC,OAAIA,EAAE/C,MAAQuY,CAAM,IAAG,CACvD,IAAMrB,EAAgB,CACpBlX,IAAKuY,EACLnB,YAAW,eAAUkB,EAAM,KAC3BjZ,KAAM,MAER,KAAKyX,WAAWrX,KAAKyX,GACrB,KAAKU,WAAWV,EAClB,CAEA,OAAOoB,CACT,G,gDCzGJ,IAAIjO,QAAU,EAAQ,KACnBA,QAAQmO,aAAYnO,QAAUA,QAAQsM,SACnB,iBAAZtM,UAAsBA,QAAU,CAAC,CAACoO,EAAO3Y,EAAIuK,QAAS,MAC7DA,QAAQqO,SAAQD,EAAOE,QAAUtO,QAAQqO,SAG/BpZ,EADH,EAAQ,IAA+DqX,SAChE,WAAYtM,SAAS,EAAM,CAAC,WAAY,G,qlCCHlD,SAAS0F,EAAqBnL,KAAMgU,GACzC,OAAOC,YAAY/D,YAAM8D,GAAQE,WAAWC,MAAMC,cAAapU,UAAMwB,GAAW,IAClF,CAEO,SAASyI,EAAsBjK,KAAMkB,GAI1C,IAE4C,EAFtCoC,EAAO,GACPiD,EAAQ,GAAG,E,goBAAA,CACqBrF,GAAM,IAA5C,IAAK,EAAL,qBAA8C,oBAAlCmT,EAAM,KAAE3R,EAAI,KAAS,KAC/B,GAAe,UAAX2R,EAAoB,CACtB,IAAMC,EAAW,CACf9T,MAAOkC,EACPhC,KAAM,KACN0B,SAAU,GAEVjB,KAAMuB,EAAKvB,KACXnB,KAAM,MAEJuG,EAAMtH,OAAS,EACjBsH,EAAMA,EAAMtH,OAAS,GAAGmD,SAASvH,KAAKyZ,GAEtChR,EAAKzI,KAAKyZ,GAEZ/N,EAAM1L,KAAKyZ,EACb,MAAO,GAAe,SAAXD,EAAmB,CAC5B,IAAMC,EAAW/N,EAAMA,EAAMtH,OAAS,GACtCnE,YAAOwZ,EAASnT,MAAQuB,EAAKvB,MAE7BmT,EAAS5T,KAAOgC,EAChB4R,EAAStU,KAAOA,KAAKJ,MAAM0U,EAAS9T,MAAMkB,MAAM8H,OAAQ8K,EAAS5T,KAAKiB,IAAI6H,QAC1EjD,EAAM1E,OAAO0E,EAAMtH,OAAS,EAAG,EACjC,CACF,CACA,+BACA,OAAOqE,CACT,C,gxCCxCO,SAASiR,EAAaC,EAAKC,GAIhC,IAHA,IAAMC,EAAM,GACNC,EAAYH,EAAII,OAAOH,EAAMrG,MAAMyG,OACnCC,EAAUN,EAAII,OAAOH,EAAM1B,IAAI8B,OAC5B3Z,EAAIyZ,EAAWzZ,GAAK4Z,EAAS5Z,IACpCwZ,EAAI7Z,KAAK2Z,EAAInE,KAAKnV,IAEpB,OAAOwZ,CACT,CAEO,SAASK,EAAYvK,GAE1B,IADA,IAAMkK,EAAM,GACHpN,EAAIkD,EAAEwK,WAAY1N,EAAGA,EAAIA,EAAExD,YAClC4Q,EAAI7Z,KAAKyM,GAEX,OAAOoN,CACT,CAEO,SAASO,EAAgBR,EAAO/R,GACrC,OAAO+R,EAAM1B,IAAMrQ,EAAK0L,MAAQ1L,EAAKqQ,IAAM0B,EAAMrG,IACnD,CAgBO,SAAS8G,EAAqB5R,EAAMmR,EAAOU,GAChD,IAAMC,EAAQ,GAMd,OArBK,SAAsB9R,EAAMmR,EAAOY,IAGxC,SAASC,EAAgB9K,GACvB,GAAKyK,EAAgBR,EAAOjK,GAA5B,CAGA6K,EAAG7K,GAAG,IACwB,EADxB,IACUuK,EAAYvK,IAAE,IAA9B,IAAK,EAAL,qBAAgC,CAC9B8K,EADU,QAEZ,CAAC,+BAJD,CAKF,CAVAA,CAAgBhS,EAAKiS,QAWvB,CAIEC,CAAalS,EAAMmR,GAAO,SAAAjK,GACpB2K,EAAU3K,IACZ4K,EAAMva,KAAK2P,EAEf,IACO4K,CACT,CAEA,SAASK,EAAMjX,EAAKkX,EAAKC,GACvB,OAAOC,KAAKD,IAAID,EAAKE,KAAKF,IAAIC,EAAKnX,GACrC,CAGO,SAASqX,EAAgBC,EAAWrB,EAAOsB,GAChD,IAAMC,EAAYP,EAAMM,EAAO3H,KAAOqG,EAAMrG,KAAM2H,EAAO3H,KAAO2H,EAAOhD,GAAI,GACrEkD,EAAUR,EAAMM,EAAO3H,KAAOqG,EAAM1B,GAAIgD,EAAO3H,KAAO2H,EAAOhD,GAAI,GACvE,OAAOmD,IAAgBzB,MACrBqB,EAAU1H,KAAO4H,EACjBF,EAAU/C,GAAKkD,EAEnB,CAGO,SAASE,EAAgBL,EAAWrB,EAAOsB,GAChD,OAAOG,IAAgBzB,MACrBqB,EAAU1H,MAASqG,EAAMrG,KAAO2H,EAAO3H,KAAQ2H,EAAOK,OAAOnX,OAAS,GACtE6W,EAAU/C,IAAO0B,EAAM1B,GAAKgD,EAAO3H,KAAQ2H,EAAOK,OAAOnX,OAAS,GAEtE,C,2nDClEsI,IAGhIoX,EAAO,WACX,WACE3T,EACA0L,EACA2E,EACAuD,EACAC,EACApV,EACAqV,I,4FACA,SACAta,KAAKwG,KAAOA,EACZxG,KAAKkS,KAAOA,EACZlS,KAAK6W,GAAKA,EACV7W,KAAKoa,YAAcA,EACnBpa,KAAKqa,WAAaA,EAClBra,KAAKiF,KAAOA,EACZjF,KAAKsa,KAAOA,CACd,C,UAuBC,O,EAvBA,E,EAAA,oBAED,WAAwC,IAAlCC,EAAW,UAAH,6CAAG,KAAMC,IAAW,UAAH,+CACzBC,EAASza,KAAKoa,YAIlB,GAHuB,eAAnBpa,KAAKwG,KAAKwE,OACZyP,GAAU,KAEK,OAAbF,EAAmB,CACrB,KAAOE,EAAO1X,OAASwX,GACrBE,GAAU,IAEZ,OAAOA,CACT,CACE,IAAK,IAAIzb,EAAIgB,KAAK6W,GAAK7W,KAAKkS,KAAOuI,EAAO1X,OAAS/C,KAAKqa,WAAWtX,OAAQ/D,EAAI,EAAGA,IAChFyb,GAAU,IAEZ,OAAOA,GAAUD,EAAWxa,KAAKqa,WAAa,GAElD,GAAC,oBAED,SAAO/B,EAAK9Z,GACV,IAAIma,EAA2B,eAAlB3Y,KAAKwG,KAAKwE,KAAwB4K,QAAS8E,EAAW1a,KAAKsa,KAAMhC,GAAK,GAAK9Z,GAAQ,GAChG,OAAOwB,KAAKoa,YAAczB,EAAS3Y,KAAKiF,KAAOjF,KAAKqa,UACtD,I,iFAAC,EAxCU,GA2Cb,SAASM,EAAWC,EAActC,GAEhC,IADA,IAAIY,EAAQ,GACH2B,EAAMD,EAAcC,GAAmB,YAAZA,EAAI7P,KAAoB6P,EAAMA,EAAIvT,OACpD,YAAZuT,EAAI7P,MAAkC,cAAZ6P,EAAI7P,MAChCkO,EAAMva,KAAKkc,GAGf,IADA,IAAI1V,EAAU,GACLnG,EAAIka,EAAMnW,OAAS,EAAG/D,GAAK,EAAGA,IAAK,CAC1C,IAAIwH,EAAO0S,EAAMla,GAAIiE,OAAK,EACtBkR,KAAOmE,EAAII,OAAOlS,EAAK0L,MAAO4I,EAAWtU,EAAK0L,KAAOiC,KAAKjC,KAC9D,GAAiB,cAAb1L,EAAKwE,OAAyB/H,EAAQ,eAAe8X,KAAK5G,KAAKrQ,KAAKJ,MAAMoX,KAC5E3V,EAAQxG,KAAK,IAAIwb,EAAQ3T,EAAMsU,EAAUA,EAAW7X,EAAM,GAAGF,OAAQ,GAAIE,EAAM,GAAI,IAAK,YACnF,GAAiB,YAAbuD,EAAKwE,MAA0C,eAApBxE,EAAKc,OAAO0D,OACtC/H,EAAQ,6BAA6B8X,KAAK5G,KAAKrQ,KAAKJ,MAAMoX,KAAa,CACjF,IAAIjU,EAAQ5D,EAAM,GAAI+X,EAAM/X,EAAM,GAAGF,OACjC8D,EAAM9D,QAAU,IAAK8D,EAAQA,EAAMnD,MAAM,EAAGmD,EAAM9D,OAAS,GAAIiY,GAAO,GAC1E7V,EAAQxG,KAAK,IAAIwb,EAAQ3T,EAAKc,OAAQwT,EAAUA,EAAWE,EAAK/X,EAAM,GAAI4D,EAAO5D,EAAM,GAAIuD,GAC7F,MAAO,GAAiB,YAAbA,EAAKwE,MAA0C,iBAApBxE,EAAKc,OAAO0D,OACtC/H,EAAQ,iDAAiD8X,KAAK5G,KAAKrQ,KAAKJ,MAAMoX,KAAa,CACrG,IAAIjU,EAAQ5D,EAAM,GAAI+X,EAAM/X,EAAM,GAAGF,OACjC8D,EAAM9D,OAAS,IAAK8D,EAAQA,EAAMnD,MAAM,EAAGmD,EAAM9D,OAAS,GAAIiY,GAAO,GACzE,IAAI/V,EAAOhC,EAAM,GACbA,EAAM,KAAIgC,GAAQhC,EAAM,GAAGG,QAAQ,OAAQ,MAC/C+B,EAAQxG,KAAK,IAAIwb,EAAQ3T,EAAKc,OAAQwT,EAAUA,EAAWE,EAAK/X,EAAM,GAAI4D,EAAO5B,EAAMuB,GACzF,CACF,CACA,OAAOrB,CACT,CAEA,SAASuV,EAAWJ,EAAMhC,GACxB,MAAO,sBAAsByC,KAAKzC,EAAI2C,YAAYX,EAAKpI,KAAMoI,EAAKpI,KAAO,IAC3E,CAEA,SAASgJ,EAAarU,EAAOyR,EAAK6C,GAChC,IADqD,IAAZ7N,EAAS,UAAH,6CAAG,EACzC8N,GAAQ,EAAG5U,EAAOK,IAAS,CAClC,GAAiB,YAAbL,EAAKwE,KAAoB,CAC3B,IAAIoH,EAAIsI,EAAWlU,EAAM8R,GACrBK,GAAUvG,EAAE,GAChB,GAAIgJ,GAAQ,EAAG,CACb,GAAIzC,GAAUyC,EAAO,EAAG,OACxBD,EAAQxc,KAAK,CAACuT,KAAM1L,EAAK0L,KAAOE,EAAE,GAAGrP,OAAQ8T,GAAIrQ,EAAK0L,KAAOE,EAAE,GAAGrP,OAAQmX,OAAQtE,OAAOwF,EAAO,EAAI9N,IACtG,CACA8N,EAAOzC,CACT,CACA,IAAInY,EAAOgG,EAAKoB,YAChB,IAAKpH,EAAM,MACXgG,EAAOhG,CACT,CACF,CAWO,IAAM6a,EAA8B,SAAH,GAA0B,IAArBC,EAAK,EAALA,MAAOC,EAAQ,EAARA,SAC9CnU,EAAOoU,YAAWF,GAAShD,EAAOgD,EAAPhD,IAC3BmD,EAAO,KAAMN,EAAUG,EAAMI,eAAc,SAAAnD,GAC7C,IAAKA,EAAMoD,QAAUC,IAAiBC,WAAWP,EAAO/C,EAAMrG,MAAO,OAAOuJ,EAAO,CAAClD,SAGpF,IAFA,IAAI1K,EAAM0K,EAAMrG,KAAMiC,KAAOmE,EAAII,OAAO7K,GACpC1I,EAAUwV,EAAWvT,EAAK0U,aAAajO,GAAM,GAAIyK,GAC9CnT,EAAQpC,QAAUoC,EAAQA,EAAQpC,OAAS,GAAGmP,KAAOrE,EAAMsG,KAAKjC,MAAM/M,EAAQ4W,MACrF,IAAK5W,EAAQpC,OAAQ,OAAO0Y,EAAO,CAAClD,SACpC,IAAIyD,EAAQ7W,EAAQA,EAAQpC,OAAS,GACrC,GAAIiZ,EAAMnF,GAAKmF,EAAM3B,WAAWtX,OAAS8K,EAAMsG,KAAKjC,KAAM,OAAOuJ,EAAO,CAAClD,SAEzE,IAAI0D,EAAYpO,GAAQmO,EAAMnF,GAAKmF,EAAM3B,WAAWtX,SAAY,KAAKqJ,KAAK+H,KAAKrQ,KAAKJ,MAAMsY,EAAMnF,KAEhG,GAAImF,EAAM1B,MAAQ2B,EAAW,CAC3B,IACIC,EADA1b,EAAO2E,EAAQpC,OAAS,EAAIoC,EAAQA,EAAQpC,OAAS,GAAK,KACnDmX,EAAS,GAChB1Z,GAAQA,EAAK8Z,MACf4B,EAAQ/H,KAAKjC,KAAO1R,EAAK0R,KACzBgI,EAAS1Z,EAAK2b,OAAO7D,EAAK,IAE1B4D,EAAQ/H,KAAKjC,MAAQ1R,EAAOA,EAAKqW,GAAK,GAExC,IAAIsE,EAAU,CAAC,CAACjJ,KAAMgK,EAAOrF,GAAIhJ,EAAKqM,WAOtC,MANuB,eAAnB8B,EAAMxV,KAAKwE,MACbkQ,EAAac,EAAM1B,KAAMhC,EAAK6C,GAAU,GAEtC3a,GAA0B,eAAlBA,EAAKgG,KAAKwE,MACpBkQ,EAAa1a,EAAK8Z,KAAMhC,EAAK6C,GAExB,CAAC5C,MAAOyB,IAAgBoC,OAAOF,EAAQhC,EAAOnX,QAASoY,UAChE,CAEA,GAAuB,cAAnBa,EAAMxV,KAAKwE,MAAwBiR,GAAa9H,KAAKjC,KAAM,CAC7D,IAAImK,EAAW/D,EAAII,OAAOvE,KAAKjC,KAAO,GAAIoK,EAAS,QAAQvB,KAAKsB,EAASvY,MAEzE,GAAIwY,GAAUA,EAAOvX,OAASiX,EAAM9J,KAAM,CACxC,IAAIiJ,EAAUG,EAAMH,QAAQ,CAAC,CAACjJ,KAAMmK,EAASnK,KAAOoK,EAAOvX,MAAO8R,GAAIwF,EAASxF,IAClD,CAAC3E,KAAMiC,KAAKjC,KAAO8J,EAAM9J,KAAM2E,GAAI1C,KAAK0C,MACrE,MAAO,CAAC0B,MAAOA,EAAMpN,IAAIgQ,GAAUA,UACrC,CACF,CAEA,IAAIA,EAAU,GACS,eAAnBa,EAAMxV,KAAKwE,MACbkQ,EAAac,EAAM1B,KAAMhC,EAAK6C,GAEhC,IAAIoB,EAAYP,EAAM1B,MAAQ0B,EAAM1B,KAAKpI,KAAOiC,KAAKjC,KACjDgI,EAAS,GAEb,IAAKqC,GAAa,kBAAkBxB,KAAK5G,KAAKrQ,MAAM,GAAGf,QAAUiZ,EAAMnF,GACrE,IAAK,IAAI7X,EAAI,EAAGiD,EAAIkD,EAAQpC,OAAS,EAAG/D,GAAKiD,EAAGjD,IAC9Ckb,GAAUlb,GAAKiD,GAAMsa,EACjBpX,EAAQnG,GAAGwd,MAAMxd,EAAIiD,EAAIkD,EAAQnG,EAAI,GAAGkT,KAAOgI,EAAOnX,OAAS,MADlCoC,EAAQnG,GAAGmd,OAAO7D,EAAK,GAK5D,IADA,IAAIpG,EAAOrE,EACJqE,EAAOiC,KAAKjC,MAAQ,KAAK9F,KAAK+H,KAAKrQ,KAAK2Y,OAAOvK,EAAOiC,KAAKjC,KAAO,KACvEA,IAIF,OAFAgI,EAASoB,EAAMoB,UAAYxC,EAC3BiB,EAAQxc,KAAK,CAACuT,OAAM2E,GAAIhJ,EAAKqM,WACtB,CAAC3B,MAAOyB,IAAgBoC,OAAOlK,EAAOgI,EAAOnX,QAASoY,UAC/D,IACA,OAAIM,IACJF,EAASD,EAAMqB,OAAOxB,EAAS,CAACyB,gBAAgB,EAAMC,UAAW,YAC1D,EACT,EAIA,SAASC,EAAOtW,GACd,MAAoB,oBAAbA,EAAKwE,MAA2C,kBAAbxE,EAAKwE,IACjD,CA+BO,IAAM+R,EAAuB,SAAH,GAA0B,IAArBzB,EAAK,EAALA,MAAOC,EAAQ,EAARA,SACvCnU,EAAOoU,YAAWF,GAClBG,EAAO,KAAMN,EAAUG,EAAMI,eAAc,SAAAnD,GACzC,IAAA1K,EAAM0K,EAAMrG,KAAOoG,EAAOgD,EAAPhD,IACvB,GAAIC,EAAMoD,OAASC,IAAiBC,WAAWP,EAAO/C,EAAMrG,MAAO,CACjE,IAAIiC,KAAOmE,EAAII,OAAO7K,GAClB1I,EAAUwV,EAnCpB,SAA8BvT,EAAMyG,GAClC,IAKSuN,EALL5U,EAAOY,EAAK0U,aAAajO,GAAM,GAAImP,EAAOnP,EAK9C,IAJIiP,EAAOtW,KACTwW,EAAOxW,EAAK0L,KACZ1L,EAAOA,EAAKc,QAEC8T,EAAO5U,EAAKyW,YAAYD,IACrC,GAAIF,EAAO1B,GACT4B,EAAO5B,EAAKlJ,SACP,IAAiB,eAAbkJ,EAAKpQ,MAAsC,iBAAboQ,EAAKpQ,KAI5C,MAFAgS,GADAxW,EAAO4U,EAAK8B,WACArG,EAGd,CAEF,OAAOrQ,CACT,CAkB+B2W,CAAqB/V,EAAMyG,GAAMyK,GAC1D,GAAInT,EAAQpC,OAAQ,CAClB,IAAIiZ,EAAQ7W,EAAQA,EAAQpC,OAAS,GACjCqa,EAAWpB,EAAMnF,GAAKmF,EAAM3B,WAAWtX,QAAUiZ,EAAM3B,WAAa,EAAI,GAE5E,GAAIxM,EAAMsG,KAAKjC,KAAOkL,IAAa,KAAKhR,KAAK+H,KAAKrQ,KAAKJ,MAAM0Z,EAAUvP,EAAMsG,KAAKjC,OAChF,MAAO,CAACqG,MAAOyB,IAAgBoC,OAAOjI,KAAKjC,KAAOkL,GAC1CjC,QAAS,CAACjJ,KAAMiC,KAAKjC,KAAOkL,EAAUvG,GAAIhJ,IACpD,GAAIA,EAAMsG,KAAKjC,MAAQkL,KAIjBpB,EAAM1B,MAAQnG,KAAKjC,MAAQ8J,EAAM1B,KAAKpI,OAAS,KAAK9F,KAAK+H,KAAKrQ,KAAKJ,MAAM,EAAGsY,EAAMnF,MAAO,CAC7F,IAAIrR,EAAQ2O,KAAKjC,KAAO8J,EAAM9J,KAE9B,GAAI8J,EAAM1B,MAAQ0B,EAAMxV,KAAK0L,KAAO8J,EAAM1B,KAAKpI,MAAQ,KAAK9F,KAAK+H,KAAKrQ,KAAKJ,MAAMsY,EAAM9J,KAAM8J,EAAMnF,KACjG,MAAO,CAAC0B,QAAO4C,QAAS,CAACjJ,KAAM1M,EAAOqR,GAAI1C,KAAKjC,KAAO8J,EAAMnF,GAAIqD,OAAQ8B,EAAMQ,MAAMR,EAAMnF,GAAKmF,EAAM9J,QAGvG,GAAI1M,EAAQqI,EACV,MAAO,CAAC0K,MAAOyB,IAAgBoC,OAAO5W,GAAQ2V,QAAS,CAACjJ,KAAM1M,EAAOqR,GAAIhJ,GAE7E,CACF,CACF,CACA,OAAO4N,EAAO,CAAClD,QACjB,IACA,OAAIkD,IACJF,EAASD,EAAMqB,OAAOxB,EAAS,CAACyB,gBAAgB,EAAMC,UAAW,aAC1D,EACT,EAGO,SAASQ,EAAkB/B,EAAOrW,GACvC,IAAImC,EAAOoU,YAAWF,GACtB,OAAOA,EAAMgC,UAAUC,OAAOne,MAAK,SAAAmZ,GAAK,OAAIS,YAAqB5R,EAAMmR,GAAO,SAAAjK,GAAC,OAAIA,EAAEtD,OAAS/F,CAAI,IAAElC,OAAS,CAAC,GAChH,CAGA,SAASya,EAAqB,EAAD,GAAwD,IAAtDlC,EAAK,EAALA,MAAOC,EAAQ,EAARA,SAAakC,EAAa,EAAbA,cAAeC,EAAM,EAANA,OAAQC,EAAO,EAAPA,QAClEvW,EAAOoU,YAAWF,GAElBH,EAAUG,EAAMI,eAAc,SAAAnD,GAClC,IAAKqD,IAAiBC,WAAWP,EAAO/C,EAAMrG,MAC5C,MAAO,CAACqG,SAGV,IAAMqF,EAAa5E,YAAqB5R,EAAMmR,EAAOkF,GACrD,OAAIG,EAAW7a,OAAS,EAClB4a,EACKA,EAAQpF,EAAOqF,GAEf,CAACrF,SAGNmF,EACKA,EAAOnF,EAAOnR,GAEd,CAACmR,QAGd,IAGA,OADAgD,EAASD,EAAMqB,OAAOxB,EAAS,CAACyB,gBAAgB,EAAMC,UAAW,YAC1D,CACT,CAGA,SAASgB,EAAiB,EAAD,GAAqF,IAAnFvC,EAAK,EAALA,MAAOC,EAAQ,EAARA,SAAatW,EAAI,EAAJA,KAAI,IAAE6Y,mBAAW,IAAG,KAAE,MAAE5K,mBAAW,IAAG,OAAI,MAAEC,iBAAS,IAAG,OAAI,EACzG,OAAOqK,EAAqB,CAAClC,QAAOC,YAAW,CAC7CkC,cAAe,SAAAnP,GACb,OAAOA,EAAEtD,OAAS/F,GAAoB,SAAXqJ,EAAEtD,MAAmBsQ,EAAMhD,IAAI2C,YAAY3M,EAAE4D,KAAM5D,EAAEuI,MAAQ3D,EAAcC,CACxG,EACAuK,OAAQ,SAACnF,GACP,GAAIA,EAAMoD,MAAO,CACf,IAAMoC,EAAa,OACnB,MAAO,CACLxF,MAAOyB,IAAgBzB,MAAMA,EAAMrG,KAAOgB,EAAYnQ,OAAQwV,EAAM1B,GAAK3D,EAAYnQ,OAASgb,EAAWhb,QACzGoY,QAAS,CAAC,CAACjJ,KAAMqG,EAAMrG,KAAMgI,OAAQhH,EAAc6K,EAAa5K,IAEpE,CAEE,MAAO,CACLoF,MAAOyB,IAAgBzB,MAAMA,EAAMrG,KAAOgB,EAAYnQ,OAAQwV,EAAM1B,GAAK3D,EAAYnQ,QACrFoY,QAAS,CACP,CAACjJ,KAAMqG,EAAMrG,KAAMgI,OAAQhH,GAC3B,CAAChB,KAAMqG,EAAM1B,GAAIqD,OAAQ/G,IAGjC,EACAwK,QAAS,SAACpF,EAAOqF,GAEf,IAK8B,EAF1BI,EAAWzF,EACT4C,EAAU,GAAG,IAJGyC,EACnBK,SAAQ,SAAA3P,GAAC,OAAIuK,YAAYvK,GAAGsD,OAAOtD,EAAE,IACrCgF,QAAO,SAAAlI,GAAC,OAAI0S,EAAYtP,SAASpD,EAAEJ,OAAqB,SAAXI,EAAEJ,MAAmBsQ,EAAMhD,IAAI2C,YAAY7P,EAAE8G,KAAM9G,EAAEyL,MAAQ3D,EAAcC,CAAU,KAGvG,IAA9B,IAAK,EAAL,qBAAgC,KAArB+K,EAAE,QACLrE,EAAS,CAAC3H,KAAMgM,EAAGhM,KAAM2E,GAAIqH,EAAGrH,IACtCmH,EAAWrE,YAAgBqE,EAAUzF,EAAOsB,GAC5CsB,EAAQxc,KAAKkb,EACf,CAAC,+BACD,MAAO,CAAEtB,MAAOyF,EAAU7C,UAC5B,GAEJ,CAEO,SAASgD,EAAa,GAC3B,OAAON,EAAiB,CAACvC,MADQ,EAALA,MACIC,SADW,EAARA,UACQ,CACzCtW,KAAM,SACN6Y,YAAa,CAAC,kBACd5K,YAAa,KACbC,UAAW,MAEf,CAEO,SAASiL,EAAe,GAC7B,OAAOP,EAAiB,CAACvC,MADU,EAALA,MACEC,SADa,EAARA,UACM,CACzCtW,KAAM,WACN6Y,YAAa,CAAC,oBACd5K,YAAa,IACbC,UAAW,KAEf,CAEO,SAASkL,EAAoB,GAClC,OAAOR,EAAiB,CAACvC,MADe,EAALA,MACHC,SADkB,EAARA,UACC,CACzCtW,KAAM,gBACN6Y,YAAa,CAAC,yBACd5K,YAAa,KACbC,UAAW,MAEf,CAEO,SAASmL,EAAoB,GAAmB,IAAlBhD,EAAK,EAALA,MAAOC,EAAQ,EAARA,SAC1C,OAAOiC,EAAqB,CAAClC,QAAOC,YAAW,CAC7CkC,cAAe,SAAAnP,GAAC,MAAe,kBAAXA,EAAEtD,IAAwB,EAC9C0S,OAAQ,SAACnF,EAAOnR,GAGd,IAEiD,EAF3C+T,EAAU,GACZ6C,EAAWzF,EAAM,IACFF,YAAaiD,EAAMhD,IAAKC,IAAM,yBAAtCpE,KAAI,QACPoK,EAAiBvF,YAAqB5R,EAAM+M,MAAM,SAAA7F,GAAC,MAAe,aAAXA,EAAEtD,MAAyC,gBAAlBsD,EAAEhH,OAAO0D,IAAsB,IAClHiT,SAAQ,SAAA3P,GAAC,OAAIuK,YAAYvK,EAAE,IAC3BgF,QAAO,SAAAhF,GAAC,MAAe,mBAAXA,EAAEtD,IAAyB,IACvCwT,MAAK,SAAAlQ,GAAC,OAAIyK,YAAgB5E,KAAM7F,EAAE,IAErC,GAAIiQ,EAAgB,CAClB,IAAM1E,EAAS,CAAC3H,KAAMqM,EAAerM,KAAM2E,GAAI0H,EAAe1H,GAAIqD,OAAQ,MAC1E8D,EAAW/D,YAAgBN,YAAgBqE,EAAUzF,EAAOsB,GAAStB,EAAOsB,GAC5EsB,EAAQxc,KAAKkb,EACf,KAAO,CACL,IAAMA,EAAS,CAAC3H,KAAMiC,KAAKjC,KAAMgI,OAAQ,MACzC8D,EAAW/D,YAAgB+D,EAAUzF,EAAOsB,GAC5CsB,EAAQxc,KAAKkb,EACf,CAAC,EAdH,IAAK,EAAL,qBAAmD,GAelD,+BACD,MAAO,CACLtB,MAAOyF,EACP7C,UAEJ,EACAwC,QAAS,SAACpF,EAAOqF,GACf,IAO8B,EAPxBa,EAAgBb,EACnBK,SAAQ,SAAA3P,GAAC,OAAIuK,YAAYvK,EAAE,IAC3BgF,QAAO,SAAAtU,GAAC,OAAI+Z,YAAgBR,EAAOvZ,EAAE,IACrCif,SAAQ,SAAA3P,GAAC,OAAIuK,YAAYvK,EAAE,IAC3BgF,QAAO,SAAAhF,GAAC,MAAe,mBAAXA,EAAEtD,IAAyB,IACtCgT,EAAWzF,EACT4C,EAAU,GAAG,IACFsD,GAAa,IAA9B,IAAK,EAAL,qBAAgC,KAArBP,EAAE,QACLrE,EAAS,CAAC3H,KAAMgM,EAAGhM,KAAM2E,GAAIqH,EAAGrH,IACtCmH,EAAWrE,YAAgBqE,EAAUzF,EAAOsB,GAC5CsB,EAAQxc,KAAKkb,EACf,CAAC,+BACD,MAAO,CAAEtB,MAAOyF,EAAU7C,UAC5B,GAEJ,CAEO,SAASuD,EAAkB,GAAmB,IAAlBpD,EAAK,EAALA,MAAOC,EAAQ,EAARA,SACxC,OAAOiC,EAAqB,CAAClC,QAAOC,YAAW,CAC7CkC,cAAe,SAAAnP,GAAC,MAAe,gBAAXA,EAAEtD,IAAsB,EAC5C0S,OAAQ,SAACnF,EAAOnR,GAGd,IAGiD,EAH3C+T,EAAU,GACZ6C,EAAWzF,EACXmC,EAAa,EAAE,IACArC,YAAaiD,EAAMhD,IAAKC,IAAM,yBAAtCpE,KAAI,QAEPoK,GADN7D,GAAc,GACuB,KAE/BiE,EAAiB3F,YAAqB5R,EAAM+M,MAAM,SAAA7F,GAAC,MAAe,aAAXA,EAAEtD,MAAyC,kBAAlBsD,EAAEhH,OAAO0D,IAAwB,IACpHiT,SAAQ,SAAA3P,GAAC,OAAIuK,YAAYvK,EAAE,IAC3BgF,QAAO,SAAAhF,GAAC,MAAe,mBAAXA,EAAEtD,IAAyB,IACvCwT,MAAK,SAAAlQ,GAAC,OAAIyK,YAAgB5E,KAAM7F,EAAE,IAErC,GAAIqQ,EAAgB,CAClB,IAAM9E,EAAS,CAAC3H,KAAMyM,EAAezM,KAAM2E,GAAI8H,EAAe9H,GAAIqD,OAAQqE,GAC1EP,EAAW/D,YAAgBN,YAAgBqE,EAAUzF,EAAOsB,GAAStB,EAAOsB,GAC5EsB,EAAQxc,KAAKkb,EACf,KAAO,CACL,IAAMA,EAAS,CAAC3H,KAAMiC,KAAKjC,KAAMgI,OAAQqE,GACzCP,EAAW/D,YAAgB+D,EAAUzF,EAAOsB,GAC5CsB,EAAQxc,KAAKkb,EACf,CAAC,EAjBH,IAAK,EAAL,qBAAmD,GAkBlD,+BACD,MAAO,CACLtB,MAAOyF,EACP7C,UAEJ,EACAwC,QAAS,SAACpF,EAAOqF,GACf,IAO8B,EAPxBa,EAAgBb,EACnBK,SAAQ,SAAA3P,GAAC,OAAIuK,YAAYvK,EAAE,IAC3BgF,QAAO,SAAAtU,GAAC,OAAI+Z,YAAgBR,EAAOvZ,EAAE,IACrCif,SAAQ,SAAA3P,GAAC,OAAIuK,YAAYvK,EAAE,IAC3BgF,QAAO,SAAAhF,GAAC,MAAe,mBAAXA,EAAEtD,IAAyB,IACtCgT,EAAWzF,EACT4C,EAAU,GAAG,IACFsD,GAAa,IAA9B,IAAK,EAAL,qBAAgC,KAArBP,EAAE,QACLrE,EAAS,CAAC3H,KAAMgM,EAAGhM,KAAM2E,GAAIqH,EAAGrH,IACtCmH,EAAWrE,YAAgBqE,EAAUzF,EAAOsB,GAC5CsB,EAAQxc,KAAKkb,EACf,CAAC,+BACD,MAAO,CAAEtB,MAAOyF,EAAU7C,UAC5B,GAEJ,CAGO,SAASyD,EAAW,GAAmB,IAAlBtD,EAAK,EAALA,MAAOC,EAAQ,EAARA,SACjC,OAAOiC,EAAqB,CAAClC,QAAOC,YAAW,CAC7CkC,cAAe,SAAAnP,GAAC,MAAe,SAAXA,EAAEtD,IAAe,EACrC0S,OAAQ,SAACnF,GACP,MAAO,CACLA,MAAOyB,IAAgBzB,MAAMA,EAAMrG,KAAO,EAAGqG,EAAM1B,GAAK,GACxDsE,QAAS,CACP,CAACjJ,KAAMqG,EAAMrG,KAAMgI,OAAQ,KAC3B,CAAChI,KAAMqG,EAAM1B,GAAIqD,OAAQ,MAAQ3B,EAAMrG,OAASqG,EAAM1B,GAAK,WAAayE,EAAMhD,IAAI2C,YAAY1C,EAAMrG,KAAMqG,EAAM1B,KAAO,MAG7H,EACA8G,QAAS,SAACpF,EAAOqF,GAEf,IAU6B,EAVvBiB,EAAgBjB,EACnBtK,QAAO,SAAAhF,GAAC,OAIK,IAHZuK,YAAYvK,GACX2P,SAAQ,SAAA7S,GAAC,OAAIyN,YAAYzN,EAAE,IAC3BkI,QAAO,SAAAlI,GAAC,MAAe,cAAXA,EAAEJ,MAA0C,UAAlBI,EAAE9D,OAAO0D,MAAoBuN,EAAMrG,MAAQ9G,EAAE8G,MAAQqG,EAAM1B,IAAMzL,EAAEyL,EAAE,IAC3G9T,MAAY,IACdkb,SAAQ,SAAA3P,GAAC,OAAIuK,YAAYvK,GAAG2P,SAAQ,SAAA7S,GAAC,OAAIyN,YAAYzN,EAAE,GAAC,IACxDkI,QAAO,SAAAlI,GAAC,QAAiB,cAAXA,EAAEJ,MAA0C,UAAlBI,EAAE9D,OAAO0D,KAAiB,IAC/DmQ,EAAU,GACZ6C,EAAWzF,EAAM,IACLsG,GAAa,IAA7B,IAAK,EAAL,qBAA+B,KAApBvQ,EAAC,QACJuL,EAAS,CAAC3H,KAAM5D,EAAE4D,KAAM2E,GAAIvI,EAAEuI,IACpCmH,EAAWrE,YAAgBqE,EAAUzF,EAAOsB,GAC5CsB,EAAQxc,KAAKkb,EACf,CAAC,+BACD,MAAO,CACLtB,MAAOyF,EACP7C,UAEJ,GAEJ,CAEO,SAAS2D,EAAgB,GAAmB,IAAlBxD,EAAK,EAALA,MAAOC,EAAQ,EAARA,SACtC,OAAOiC,EAAqB,CAAClC,QAAOC,YAAW,CAC7CkC,cAAe,SAAAnP,GAAC,MAAe,eAAXA,EAAEtD,IAAqB,EAC3C0S,OAAQ,SAACnF,GAEP,IAAMwG,EAAiBzD,EAAMoB,UAAY,MAAQpB,EAAMoB,UACjDsC,EAAe1D,EAAMoB,UAAY,MACvC,MAAO,CACLnE,MAAOyB,IAAgBzB,MAAMA,EAAMrG,KAAO6M,EAAehc,OAAQwV,EAAM1B,GAAKkI,EAAehc,QAC3FoY,QAAS,CACP,CAACjJ,KAAMoJ,EAAMhD,IAAII,OAAOH,EAAMrG,MAAMA,KAAMgI,OAAQ6E,GAClD,CAAC7M,KAAMoJ,EAAMhD,IAAII,OAAOH,EAAM1B,IAAIA,GAAIqD,OAAQ8E,IAGpD,GAEJ,CAEO,SAASC,EAAY,GAAmB,IAAlB3D,EAAK,EAALA,MAAOC,EAAQ,EAARA,SAClC,OAAOiC,EAAqB,CAAClC,QAAOC,YAAW,CAC7CkC,cAAe,SAAAnP,GAAC,MAAe,UAAXA,EAAEtD,IAAgB,EACtC0S,OAAQ,SAACnF,GACP,MAAO,CACLA,QACA4C,QAAS,CAAC,CACRjJ,KAAMoJ,EAAMhD,IAAII,OAAOH,EAAM1B,IAAIA,GACjCqD,OAAQoB,EAAMoB,UACN,kCAAoCpB,EAAMoB,UAC1C,kCAAoCpB,EAAMoB,UAC1C,kCAAoCpB,EAAMoB,UAC1CpB,EAAMoB,YAGpB,GAEJ,C,sBCvgBA,IAAInT,QAAU,EAAQ,KACnBA,QAAQmO,aAAYnO,QAAUA,QAAQsM,SACnB,iBAAZtM,UAAsBA,QAAU,CAAC,CAACoO,EAAO3Y,EAAIuK,QAAS,MAC7DA,QAAQqO,SAAQD,EAAOE,QAAUtO,QAAQqO,SAG/BpZ,EADH,EAAQ,IAA+DqX,SAChE,WAAYtM,SAAS,EAAM,CAAC,WAAY,G,sBCNzD,IAAIA,QAAU,EAAQ,KACnBA,QAAQmO,aAAYnO,QAAUA,QAAQsM,SACnB,iBAAZtM,UAAsBA,QAAU,CAAC,CAACoO,EAAO3Y,EAAIuK,QAAS,MAC7DA,QAAQqO,SAAQD,EAAOE,QAAUtO,QAAQqO,SAG/BpZ,EADH,EAAQ,IAA+DqX,SAChE,WAAYtM,SAAS,EAAM,CAAC,WAAY,G,kmGCEzD,IAAM2V,EAAwBC,YAAoB,CAACC,MAAO,CAACC,KAAM,UAAQC,MAAO,YAE1EC,EAAuBC,YAAU,CACrC,aAAcnR,IAAEoR,OAChB,eAAgBpR,IAAEqR,SAClB,oBAAqBrR,IAAEsR,cACvB,eAAgBC,IAAKC,WACrB,iBAAkBD,IAAKE,UACvB,YAAaF,IAAKG,MAClB,iBAAkB1R,IAAExC,MACpB,eAAgBwC,IAAE2R,SAClB,eAAgB3R,IAAE4R,SAClB,eAAgB5R,IAAE6R,SAClB,eAAgB7R,IAAE8R,SAClB,eAAgB9R,IAAE+R,SAClB,eAAgB/R,IAAEgS,SAClB,WAAYhS,IAAEiS,KACd,YAAajS,IAAEiS,KACf,qBAAsBjS,IAAEiS,KACxB,eAAgBjS,IAAEnP,IAClB,qBAAsB0gB,IAAKrZ,SAC3B,iBAAoBqZ,IAAKC,WACzB,WAAYD,IAAKnP,OAYb8P,EAAU,IAAIC,IAAQ,CAACC,IAASC,MAAM9O,OAV1B,CAChB,SAAU,iBAAkB,WAAY,mBAAoB,gBAAiB,wBAC7E,WAAY,aAAc,QAAS,aACnC,WAAY,WAAY,WAAY,WAAY,WAAY,WAC5D,OAAQ,QAAS,WAAY,QAAS,cAAe,YACrD,iBAAkB,iBAAkB,mBAAoB,OACxD,WAAY,WACZ,OAAQ,YAAa,UAAW,WAAY,aAC5C,cAAe,gBAAiB,WAAY,iBAAkB,mBAAoB,kBAEvBzG,KAAI,SAAClG,EAAM0b,GAAG,OAAKF,IAASG,OAAO,CAACC,GAAIF,EAAM,EAAG3V,KAAM/F,GAAM,MACvH6b,OAAOvB,GACPuB,OAAOC,IAAiBviB,IAAI,CAAEwZ,SAAUkH,KACxC4B,OAAOE,IAAexiB,IAAI,CAAEwZ,SAAU,kBAAM,IAAI,KAqDnD,SAASiJ,EAA2Bnd,KAAMkB,GACxC,IAAMoC,EAnDR,SAA0BA,GAExB,OAEA,SAAS8Z,EAAU7S,GAAG,IACH,EADG,IACJA,GAAC,IAAjB,IAAK,EAAL,qBAAmB,OAARC,EAAC,QACV6S,EAAU7S,KACK,QAAV,EAAAA,EAAEpI,gBAAQ,aAAV,EAAYnD,SAAU,GAAK,GAC9Bme,EAAU5S,EAAEpI,SAEhB,CAAC,+BACH,CAVAgb,CAAU9Z,GACHA,EAUP,SAAS+Z,EAAU7S,GAEjB,GAAI,CAAC,cAAe,iBAAiBE,SAASF,EAAErJ,MAAO,KAG3B,EAQjBmc,EAAT,WACE,GAAIC,EAAgBte,OAAS,EAAG,CAC9B,IAAMue,EAAO,CACXrc,KAAM,WACNO,MAAO6b,EAAgB,GAAG/c,MAAMkB,MAChCC,IAAK4b,EAAgB3d,OAAO,GAAG,GAAGc,KAAKiB,KAGzC8b,EAAU5iB,KAAK,CACbsG,KAAM,WACNX,MAAOgd,EACP9c,KAAM8c,EACNpb,SAAUmb,IAEZA,EAAkB,EACpB,CACF,EA1BIE,EAAY,GACZF,EAAkB,GAAG,IACT/S,EAAEpI,UAAQ,IAA1B,IAAK,EAAL,qBAA4B,KAAjBkF,EAAC,QACK,mBAAXA,EAAEnG,MACJmc,IAEFC,EAAgB1iB,KAAKyM,EACvB,CAAC,+BACDgW,IAoBIG,EAAUxe,OAAS,IACrBuL,EAAEpI,SAAWqb,EAEjB,CACF,CACF,CAGeC,CAAiBzT,YAAsBjK,KAAMkB,IAiB1D,OAAOyc,IAAKC,MAAM,CAChB1X,OAAQ5C,EAAKrE,OAAS,EAfxB,SAAS4e,EAASnb,GAChB,IACmC,EAD7BwD,EAAS,GAAG,IACFxD,EAAKN,UAAY,IAAE,IAAnC,IAAK,EAAL,qBAAqC,KAA1BkF,EAAC,QACVpB,EAAOrL,KAAI,MAAXqL,EAAM,EAAS2X,EAASvW,IAC1B,CAAC,+BACD,IAAIwW,EAASrB,EAAQsB,MAAMrD,MAAK,SAAAnQ,GAAC,OAAIA,EAAErD,OAASxE,EAAKlC,MAAMW,IAAI,IAM/D,MALkB,eAAduB,EAAKvB,MAAyBuB,EAAKN,SAASnD,QAAU,GAA+B,uBAA1ByD,EAAKN,SAAS,GAAGjB,OAC9E2c,EAASrB,EAAQsB,MAAMrD,MAAK,SAAAnQ,GAAC,OAAIA,EAAErD,OAAS,UAAYxE,EAAKN,SAAS,GAAGpC,KAAKf,QAAU,CAAC,KAG3FiH,EAAOrL,MAAMijB,GAAUnB,IAASC,MAAMG,GAAIra,EAAKlC,MAAMkB,MAAM8H,OAAQ9G,EAAKlC,MAAMmB,IAAI6H,OAAQ,EAAItD,EAAOjH,QAC9FiH,CACT,CAG4B2X,CAAS,CAACzb,SAAUkB,EAAM9C,MAAO,CAACW,KAAM,WAAYO,MAAO4B,EAAK,GAAG9C,MAAMkB,MAAOC,IAAK2B,EAAK1D,OAAO,GAAG,GAAGY,MAAMmB,OAAS,GAChJ8a,QAASA,EACTuB,MAAOvB,EAAQsB,MAAMrD,MAAK,SAAAnQ,GAAC,MAAe,aAAXA,EAAErD,IAAmB,IAAE6V,IAE1D,CAGO,SAASkB,IACd,IAAM3jB,EAAsB4B,KAAKzB,KAAK,wBAA0B,GAChEyB,KAAKgP,OAEL,SAAgBlL,MACd,IAAMkB,EAASiK,YAAqBnL,KAAM,CAACoL,WAAY9Q,IACvD,OAAO6iB,EAA2Bnd,KAAMkB,EAC1C,CACF,CAAC,IAGKgd,EAAY,WAChB,WAAYpc,EAAQqc,MAAOC,EAAW3E,GAAQ,UAC5Cvd,KAAK4F,OAASA,EACd5F,KAAKiiB,MAAQA,MACbjiB,KAAKkiB,UAAYA,EACjBliB,KAAKud,OAASA,EACdvd,KAAKmiB,UAAY,IACnB,CAoBC,OApBA,0BAED,WAOE,OAAOvN,cACNd,IAAIiO,GACJ/N,MAAMhU,KAAKiiB,MAAMG,KAAK,EAAGpiB,KAAKiiB,MAAMlf,QACvC,GAAC,qBAED,WACE,OAAO/C,KAAKiiB,MAAMlf,MACpB,GAAC,oBAED,SAAO8K,GACL7N,KAAKmiB,UAAYtU,CACnB,KAAC,EA3Be,GAgCZwU,EAAc,a,qRAAA,uEASjB,OATiB,8BAClB,SAAYJ,MAAOC,EAAW3E,GAC5B,IAAM+E,EAAW,IAAIN,EAAahiB,KAAMiiB,MAAOC,EAAW3E,GAC1D,OAAOgF,aAAW,SAAC/b,EAAMyb,OACvB,MAAI,CAAC,WAAY,YAAYzT,SAAShI,EAAKwE,MAClC,CAACpF,OAAQ4c,EAAanP,SAASzN,OAAQ6c,QAAS,CAAC,CAACvQ,KAAM1L,EAAK0L,KAAM2E,GAAIrQ,EAAKqQ,MAE9E,IACT,GALO0L,CAKJD,EAAUL,MAAOC,EAAW3E,EACjC,KAAC,EATiB,CAASvO,KAYvBwT,EAAerM,YAAK,CAACuM,kBAAkB,IAEhC9G,EAAmB,IAAI+G,IAClCzD,EACA,IAAImD,GAGC,SAASO,IACd,OAAO,IAAIC,IAAgBjH,EAAkB,CAC3CkH,IAAKC,KAAKC,IAAOC,GAAG,CAClB,CAACC,IAAK,QAASC,IAAK9H,KACpB,CAAC6H,IAAK,YAAaC,IAAKpG,QAE1BiG,IAAOC,GAAG,CACR,CAACC,IAAK,QAASC,IAAKhF,KACpB,CAAC+E,IAAK,QAASC,IAAK/E,QAG1B,C,o3CClMO,IAAMwB,EAAO,CAClBE,UAAWsD,IAAIxC,SACff,WAAYuD,IAAIxC,SAChBra,SAAU6c,IAAIxC,SACdb,MAAOqD,IAAIxC,SACXnQ,KAAM2S,IAAIxC,UAICyC,EAAyBC,YAAe,CACnD,CAACC,IAAKlV,IAAE2R,SAAUxY,MAAO,UACzB,CAAC+b,IAAKlV,IAAE4R,SAAUzY,MAAO,UACzB,CAAC+b,IAAKlV,IAAE6R,SAAU1Y,MAAO,UACzB,CAAC+b,IAAKlV,IAAE8R,SAAU3Y,MAAO,UACzB,CAAC+b,IAAKlV,IAAE+R,SAAU5Y,MAAO,UACzB,CAAC+b,IAAKlV,IAAEgS,SAAU7Y,MAAO,UACzB,CAAC+b,IAAKlV,IAAEoR,OAAQjY,MAAO,cACvB,CAAC+b,IAAKlV,IAAEqR,SAAUlY,MAAO,gBACzB,CAAC+b,IAAKlV,IAAEsR,cAAenY,MAAO,qBAC9B,CAAC+b,IAAKlV,IAAEiS,KAAM9Y,MAAO,YACrB,CAAC+b,IAAKlV,IAAEnP,IAAKsI,MAAO,WACpB,CAAC+b,IAAKlV,IAAExC,MAAOrE,MAAO,aAEtB,CAAC+b,IAAK3D,EAAKC,WAAYrY,MAAO,kBAC9B,CAAC+b,IAAK3D,EAAKG,MAAOvY,MAAO,aACzB,CAAC+b,IAAK3D,EAAKrZ,SAAUiB,MAAO,gBAC5B,CAAC+b,IAAK3D,EAAKnP,KAAMjJ,MAAO,YAExB,CAAC+b,IAAKlV,IAAE9G,QAASC,MAAO,eACxB,CAAC+b,IAAKlV,IAAEmV,aAAchc,MAAO,oBAC7B,CAAC+b,IAAKlV,IAAEoV,cAAejc,MAAO,qBAC9B,CAAC+b,IAAKlV,IAAEqV,eAAgBlc,MAAO,sBAC/B,CAAC+b,IAAKlV,IAAEsV,QAASnc,MAAO,iBAKboc,EAA8BC,IAAWC,UAAS,WAG7D,WAAYC,M,uGAAM,S,EAAA,K,EAAA,c,EAFJC,IAAWtD,K,6FAGvB1gB,KAAKikB,kBAAkBF,KACzB,C,UAkBC,O,EAlBA,G,EAAA,qBAED,SAAOpH,GACL3c,KAAKikB,kBAAkBtH,EAAOoH,KAChC,GAAC,+BAED,SAAkBA,MAChB,IAAIG,EAAU,IAAIC,IAClB3I,YAAWuI,KAAKzI,OAAO8I,QAAQ,CAC7B9f,MAAO,SAACgK,GACN,GAAe,eAAXA,EAAEtD,KAAuB,KACoB,EADpB,IACXqN,YAAa0L,KAAKzI,MAAMhD,IAAKhK,IAAE,IAA/C,IAAK,EAAL,qBAAiD,KAAtC+V,EAAC,QACVH,EAAQ1lB,IAAI6lB,EAAEnS,KAAMmS,EAAEnS,KAAM8R,IAAW7P,KAAK,CAAC3M,MAAO,kBACtD,CAAC,+BACH,CACF,IAEFxH,KAAKskB,YAAcJ,EAAQK,QAC7B,M,8EAAC,EAvB4D,GAwB5D,CAACD,YAAa,SAAAziB,GAAC,OAAIA,EAAEyiB,WAAW,G,mCCnEnC,+CAYO,SAASE,EAA6BT,KAAMU,GACjD,MAXK,SAAiCV,MACtC,IAAMW,EAAc,IAAIC,IAMxB,MAAO,CAAED,cAAavB,IALV,SAACsB,GACXC,EAAYE,IAAIb,KAAKzI,OACjByI,KAAKxI,SAAS,CAAErX,QAASwgB,EAAYG,YAAYJ,KACjDV,KAAKxI,SAAS,CAAErX,QAAS4gB,IAAYC,aAAa9B,GAAGyB,EAAYzB,GAAGwB,KAC1E,EAEF,CAG+BO,CAAwBjB,MAA7CW,EAAW,EAAXA,YAAavB,EAAG,EAAHA,IACrB,OAAO,SAAC8B,GACN,IAAMC,EAAcR,EAAYE,IAAIb,KAAKzI,OAEzC6H,GADc8B,UAAeC,IAAgBT,GACjCA,EAAY,GAC1B,CACF,C,4fClBA,smGAAAzlB,GAAA,wBAAAA,EAAA,sBAAAA,GAAA,iBAAAA,GAAA,qtDAAAA,EAAA,yBAAAA,GAAA,IAAAA,EAAA,uBAAAA,GAAA,4bAAAA,EAAA,yBAAAA,GAAA,IAAAA,EAAA,uBAAAA,GAAA,yhBAAAA,EAAA,yBAAAA,GAAA,IAAAA,EAAA,uBAAAA,GAAA,qGAAAA,EAAA,yBAAAA,GAAA,IAAAA,EAAA,uBAAAA,GAAA,kkBAKA,IACMmmB,EAAoB,CACxB,eACA,kBACA,WACA,iBAEIC,EAAoB,CACxB,QACA,mBACA,YAIK,SAASC,EAAW,GAA+D,IAA7DC,EAAwB,EAAxBA,yBAA0BC,EAA+B,EAA/BA,gCACrD,OAAOC,YAAM,6BAAC,WAAOzB,MAAI,yEACiD,GAC3C,KADvBnV,EAAgB8G,YAAwBqO,KAAKzI,MAAMhD,IAAIjW,aAC3CU,OAAY,yCACrB,IAAE,uBAGqBuiB,EAAyB,CACvD/mB,KAAM,CAACknB,WAAY7W,KACnB,OAFqB,OAAjB8W,EAAoB,EAAH,uBAIhBA,EAAkBC,QAAQxa,KAAI,SAAAiH,GACnC,IAAMwT,EAAWT,EAAkB/lB,MAAK,SAAAymB,GAAC,OAAIzT,EAAE0T,KAAKjF,GAAGrS,SAASqX,EAAE,IAAI,QACrDT,EAAkBhmB,MAAK,SAAAymB,GAAC,OAAIzT,EAAE0T,KAAKjF,GAAGrS,SAASqX,EAAE,IAAI,OACrD,UACX3T,EAAOE,EAAE9E,OACTuJ,EAAK6C,KAAKF,IAAIpH,EAAE9E,OAAS8E,EAAErP,OAAQghB,KAAKzI,MAAMhD,IAAIvV,QACxD,MAAO,CACLmP,OACA2E,KACA+O,SAAUA,EACVG,cAAa,WAAG,MACd,OAAOC,YAAI,MAAO,CAACxe,MAAO,yBACxBwe,YAAI,MAAO,CAACxe,MAAO,2CAA6Coe,GAAWxT,EAAE0T,KAAKG,SAASjb,MAC3Fgb,YAAI,MAAO,CAACxe,MAAO,yBACjB4K,EAAE8T,SACS,QAAX,EAAA9T,EAAE0T,KAAKK,YAAI,aAAX,EAAapjB,QAAS,EAAIijB,YAAI,IAAK,CAAC1d,KAAM8J,EAAE0T,KAAKK,KAAK,GAAGznB,MAAO6J,OAAQ,SAAUC,IAAK,sBAAuBhB,MAAO,0BAA4B,MAGvJ,EACA4e,QAAShU,EAAEiU,aAAa3iB,MAAM,EA5Cb,GA4CkCyH,KAAI,SAAA0a,GAAC,MAAK,CAC3D7a,KAAM6a,EAAEnnB,MACR4nB,MAAK,SAACvC,KAAM7R,EAAM2E,GAChBkN,KAAKxI,SAAS,CAACJ,QAAS,CAACjJ,OAAM2E,KAAIqD,OAAQ2L,EAAEnnB,QAC/C,EACD,IAAGkT,OAAQ2T,GAAgD,UAAbK,EAAwB,CAAC,CACtE5a,KAAM,QAAF,OAAU+Y,KAAKzI,MAAMhD,IAAI2C,YAAY/I,EAAM2E,GAAG,mBAC5CyP,MAAK,SAACvC,KAAM7R,EAAM2E,GAAI,yGACuB,OAA3C0P,EAAOxC,KAAKzI,MAAMhD,IAAI2C,YAAY/I,EAAM2E,GAAG,SAC3C0O,EAAgC,CAAEgB,SAAO,OAGzCC,EAAc,GACpBC,YAAkB1C,KAAKzI,OAAO,SAACoL,EAAGxU,EAAM2E,GACjB,UAAf6P,EAAEd,UAAwB7B,KAAKzI,MAAMhD,IAAI2C,YAAY/I,EAAM2E,IAAO0P,GACtEC,EAAY7nB,KAAK+nB,EAErB,IACA3C,KAAKxI,SAASoL,YAAe5C,KAAKzI,MAAOkL,IAAc,0CAX7B,EAY5B,IACG,IAET,KAAE,2CACH,mDApDY,GAoDV,CAACI,MAAO,KACb,CAOA,SAASC,EAAUC,GACjB,OALF,SAAavd,SACX,MAAO,oEAAP,OAD4B,UAAH,mEACsD,YAAIwd,mBAAmBxd,SAAQ,WAChH,CAGSyd,CAAI,qDAAD,OAAsDF,EAAK,4DAEvE,CAEO,IAAMG,EAAkBC,IAAWC,OAoBvC,EApB4C,GAC7C,iBAAkB,CAChBC,UAAW,OACXC,SAAU,OACV9M,SAAU,QACV+M,gBAAiB,QACjBC,cAAe,SAEjB,qBAAsB,CACpBC,QAAS,QACTC,aAAc,SAEhB,uBAAwB,CACtBH,gBAAiB,UACjBR,MAAO,QACPY,WAAY,IACZC,YAAa,MACb,UAAW,CACTL,gBAAiB,aAEpB,yEAC2E,CAC1EE,QAAS,QACTF,gBAAiB,UACjBR,MAAO,OACPc,MAAO,OACPC,UAAW,SACXC,UAAW,QACX,UAAW,CACTR,gBAAiB,yBAEpB,IACD,yBAA0B,CACxBS,QAAS,MACTC,WAAY,gbACZC,eAAgB,YAChBT,QAAS,eACTC,aAAc,SACdC,WAAY,UACb,IACD,uBAAwB,CACtBQ,WAAY,OACZC,YAAa,UACd,IACD,8BAA+B,CAC7B5e,QAAS,KACT6e,OAAQ,QACRR,MAAO,QACPS,aAAc,MACdjb,SAAU,WACVkb,KAAM,MACNC,IAAK,UACN,IACD,oCAAqC,CAAEP,WAAY,YAAW,IAC9D,sCAAuC,CAAEA,WAAY,WAAU,IAC/D,mCAAoC,CAAEA,WAAY,YAAW,IAE7D,uBAAwB,CAAEQ,WAAY,sBAAqB,IAC3D,yBAA0B,CAAEA,WAAY,qBAAoB,IAC5D,sBAAuB,CAAEA,WAAY,sBAAqB,IAE1D,sBAAuB,CAAEC,gBAAiB5B,EAAU,aAAY,IAChE,wBAAyB,CAAE4B,gBAAiB5B,EAAU,YAAW,IACjE,qBAAsB,CAAE4B,gBAAiB5B,EAAU,aAAY,G,sBClJjE,IAAItd,QAAU,EAAQ,KACnBA,QAAQmO,aAAYnO,QAAUA,QAAQsM,SACnB,iBAAZtM,UAAsBA,QAAU,CAAC,CAACoO,EAAO3Y,EAAIuK,QAAS,MAC7DA,QAAQqO,SAAQD,EAAOE,QAAUtO,QAAQqO,SAG/BpZ,EADH,EAAQ,IAA+DqX,SAChE,WAAYtM,SAAS,EAAM,CAAC,WAAY,G,sBCNzD,IAAIA,QAAU,EAAQ,KACnBA,QAAQmO,aAAYnO,QAAUA,QAAQsM,SACnB,iBAAZtM,UAAsBA,QAAU,CAAC,CAACoO,EAAO3Y,EAAIuK,QAAS,MAC7DA,QAAQqO,SAAQD,EAAOE,QAAUtO,QAAQqO,SAG/BpZ,EADH,EAAQ,IAA+DqX,SAChE,WAAYtM,SAAS,EAAM,CAAC,WAAY,G,mCCTzD,M,sBCCA,IACImf,EAD8B,EAAQ,GACZC,EAA4B,GAE1DD,EAAwB/pB,KAAK,CAACgZ,EAAO3Y,EAAI,uDAAwD,KAEjG2Y,EAAOE,QAAU6Q,C,sDCNmP,ECCrP,CACb/S,MAAO,CACLiT,KAAM,CACJ3jB,KAAM2Q,OACNiT,UAAU,GAEZtd,MAAO,CACLtG,KAAM2Q,OACNC,QAAS,IAEXiT,SAAU,CACR7jB,KAAM8jB,QACNlT,SAAS,GAEXmT,OAAQ,CACN/jB,KAAM8jB,QACNlT,SAAS,K,iBCTXxS,UAAY,YACd,GDTiD4lB,WAAS,MAAU,KAAaC,UAAYC,G,OAAY,EAAC,YAAW,C,YAAI,O,IAAqB,Y,GAAPvf,SAAK,GAAG,MAAQwf,EAAG,GAAuBxf,EAAM,Q,MAAC,WAAekf,OAAQ,I,MAAC,CAAU,SAAU,WAAC,KAAO,GAAG,SAAsB,QAAG,SAAC,U,GAA0B,CAAiC,kBAAC,yBAAG,I,QAAqD,GAAC,cAAE,OAAIK,MAAOA,KAA2B,0BAACjG,GAAcmG,C,IAAc,UAA+C,GAAC,WAACC,MAAM,iCAAM,EAAG,aAIrgB,G,ICQE,EACA,KACA,WACA,MAIa,UAAAjmB,UAAiB,QAGhCkmB,kBAAkBlmB,UAAW,CAACmmB,KAAM,EAAQ,KAAsC3T,QAAQ4T,SAAU,EAAQ,KAA0C5T,S,mCCtBtJ,M,sBCCA,IACI6S,EAD8B,EAAQ,GACZC,EAA4B,GAE1DD,EAAwB/pB,KAAK,CAACgZ,EAAO3Y,EAAI,kPAAmP,KAE5R2Y,EAAOE,QAAU6Q,C,mCCNjB,M,sBCCA,IACIA,EAD8B,EAAQ,GACZC,EAA4B,GAE1DD,EAAwB/pB,KAAK,CAACgZ,EAAO3Y,EAAI,gnFAAinF,KAE1pF2Y,EAAOE,QAAU6Q,C,2TCLjB,smGAAA1pB,GAAA,wBAAAA,EAAA,sBAAAA,GAAA,iBAAAA,GAAA,qtDAAAA,EAAA,yBAAAA,GAAA,IAAAA,EAAA,uBAAAA,GAAA,4bAAAA,EAAA,yBAAAA,GAAA,IAAAA,EAAA,uBAAAA,GAAA,yhBAAAA,EAAA,yBAAAA,GAAA,IAAAA,EAAA,uBAAAA,GAAA,qGAAAA,EAAA,yBAAAA,GAAA,IAAAA,EAAA,uBAAAA,GAAA,4YAAAA,GAAA,gEAAAA,GAAA,0LAAAA,GAAA,WAAAA,GAAA,qGAAAA,IAAA,4SAAAA,IAAA,2OAAAA,EAAA,iBAAAA,EAAA,EAAAA,IAAA,EAAAA,GAAA,EAAAA,GAAA,iRAAAA,EAAA,EAAAA,EAAA,iBAAAA,IAAA,4BAAAA,GAAA,UAAAA,GAAA,GAAAA,EAAA,qZAGe,OACb2W,MAAO,CACL+T,WAAY,CACVzkB,KAAMvD,OACNmnB,UAAU,GAEZC,SAAU,CACR7jB,KAAM8jB,QACNlT,SAAS,GAEX8T,YAAa,CACX1kB,KAAM6Q,SACND,QAAS,MAEX+T,qBAAsB,CACpB3kB,KAAM8jB,QACNlT,SAAS,IAGbI,SAAU,CACR4T,WAAY,CACVjF,IAAG,WACD,OAAO5kB,KAAK8pB,OAAOxO,MAAMyO,SAASC,kBACpC,EACA7nB,IAAG,SAACG,GACFtC,KAAK8pB,OAAOG,OAAO,oCAAqC3nB,EAC1D,GAEF4nB,oBAAmB,WACjB,OAAOlqB,KAAK8pB,OAAOK,QAAQ,wBAAwBC,SAAS/E,UAC9D,EACAgF,kBAAmB,CACjBzF,IAAG,WACD,OAAO5kB,KAAK8pB,OAAOxO,MAAMyO,SAASM,mBAAqBrqB,KAAKkqB,mBAC9D,EACA/nB,IAAG,SAACG,GACFtC,KAAK8pB,OAAOG,OAAO,mCAAoC3nB,EACzD,GAEFgoB,QAAO,WACL,QAAItqB,KAAK0pB,YACAa,YAAUvqB,KAAK0pB,WAAWpO,MAGrC,EACAkP,QAAO,WACL,QAAIxqB,KAAK0pB,YACAe,YAAUzqB,KAAK0pB,WAAWpO,MAGrC,GAEF1E,QAAS,EAAF,KACFlV,OAAOuQ,YAAYvQ,OAAOC,QAAQ,CACnC+oB,SACAC,SACAxM,iBACAC,mBACAC,wBACAC,wBACAI,sBACAE,eACAE,oBACAG,kBAEC9T,KAAI,yBAAEmD,EAAC,KAAE+a,EAAE,WAAM,CAAC/a,EAAG,WACpB,IAAKtO,KAAK0pB,WACR,OAAO,EAGT,IACE,OAAOL,EAAGrpB,KAAK0pB,WAIjB,CAHE,MAAOkB,GAEPC,QAAQhqB,MAAM,6BAA8B+pB,EAC9C,CACF,EAAE,MAAE,IACNvN,kBAAiB,SAACpY,GAChB,QAAKjF,KAAK0pB,YAGHrM,YAAkBrd,KAAK0pB,WAAWpO,MAAOrW,EAClD,EACM6lB,cAAa,SAACC,GAAO,IAtF/B,EAsF+B,cAtF/B,EAsF+B,8FACO,OAA1BC,EAAQD,EAAMxiB,OAAOyiB,MAAK,kBAExB,EAAKrB,YAAYqB,GAAM,OAEK,OAFL,SAE7B,EAAKC,MAAMC,UAAUxsB,MAAQ,KAAK,sEA3F1C,gLA6FI,KC9F0P,I,iBCQ1P2E,UAAY,YACd,GFTiD4lB,WAAS,MAAU,KAAakC,UAAY,G,OAAe,EAAC,K,YAAW,U,MAAC,CAAS,SAAI/B,KAAG,K,CAAkC,4BAAc,C,MAAC,CAAyB,aAAwB,KAAQ,kBAAiC,oBAAG,OAAC,+BAAyB,IAAID,MAAO,EAAKC,gBAAqC,KAAO,KAAC,4BAAQ,C,MAAC,CAA2B,eAAwB,KAAQ,oBAAmC,oBAAG,OAAC,iCAA2B,IAAID,MAAO,EAAKC,kBAAqC,KAAO,KAAC,4BAAe,C,MAAC,CAAkC,sBAAwB,KAAQ,2BAAwC,oBAAG,OAAC,sCAAgC,IAAID,MAAO,EAAKC,uBAAqCD,EAAIiC,GAAG,KAAKhC,EAAG,QAA2Bxf,YAAM,cAAC,KAAO,KAAC,4BAAa,C,MAAC,CAAkC,oBAAwB,KAAQ,2BAAwC,oBAAG,OAAC,sCAAgC,IAAIuf,MAAO,EAAKC,uBAAqC,KAAO,KAAC,4BAAe,C,MAAC,CAAkC,sBAAwB,KAAQ,2BAAsC,oBAAG,OAAC,oCAA8B,IAAID,MAAO,EAAKC,qBAAqC,KAAO,KAAC,EAAM,2B,MAAC,CAAuB,aAAwB,KAAQ,gBAAqC,oBAAG,OAAC,mCAA4B,IAAID,MAAO,EAAKC,mBAAqC,KAAO,KAAC,EAAO,2B,MAAC,CAAmB,cAAwB,KAAQ,YAAgC,oBAAG,OAAC,8BAAwB,IAAID,MAAO,EAAKC,eAAqCD,EAAIiC,GAAG,KAAKhC,EAAG,QAA2Bxf,YAAM,cAAC,KAAO,KAAC,EAAM,2B,MAAC,CAAkB,aAAwB,KAAQ,WAA+B,oBAAG,OAAC,6BAAuB,IAAIuf,MAAO,EAAMA,cAAuD,KAAO,KAAC,EAAO,0C,MAAC,CAAmB,cAAoD,iBAAG,SAAC,oC,GAA0B,CAAkC,kBAAC,gCAAIA,KAAwCgC,UAAY,UAAQ,CAACvhB,IAAK,Y,YAAS,S,MAAO,CAAc,YAAoD,YAAG,SAAC,oCAA2B,IAAI,OAAS,EAACuf,kBAAiDA,EAAM,KAAK,EAAI,kBAA2Bvf,YAAM,cAAC,KAAO,KAAC,4BAAY,C,MAAC,CAAwB,mBAAoD,KAAQ,iBAAuB,4CAAG,OAAC,qB,GAA0Buf,CAA8C,kBAAC,wCAAIA,KAAiDA,EAAIiC,GAAG,KAAKhC,EAAG,QAA2Bxf,YAAM,cAAC,KAAO,KAAC,EAAM,2B,MAAC,CAAkB,aAAwC,gBAAG,SAAC,wBAAiB,IAAIuf,MAAO,EAAKC,QAAqC,KAAO,KAAC,EAAM,2B,MAAC,CAAkB,aAAwC,gBAAG,SAAC,wBAAiB,IAAID,MAAO,EAAKC,QAAqCD,EAAIiC,GAAG,KAAMjC,EAAG,OAACU,CAAyDjgB,YAAM,cAAC,KAAO,KAAW,aAAV,aAAU,6B,MAAC,CAA+B,MAAQ,WAAM,6BAAG,QAAC,G,GAA0Buf,CAAmC,kBAAC,+BAAG,KAAsF,qBAAR,aAA2B,6B,MAAC,CAAiC,MAAQ,oBAAM,+BAAG,QAAC,G,GAA0BA,CAA0B,kBAAC,sBAAG,KAAsF,YAAjB,aAAiB,6B,MAAC,CAA8B,MAAQ,UAAM,4BAAG,QAAC,G,GAA0BA,CAA2B,kBAAC,uBAAG,KAE98GkC,UAEJ,G,IEQE,EACA,KACA,WACA,MAIa,UAAAhoB,UAAiB,QAGhCkmB,kBAAkBlmB,UAAW,CAACioB,sBAAuB,EAAQ,KAAuDzV,S,0CxBtBpH,IyBA8P,E,OAAG,E,iBCQ7PxS,UAAY,YACd,G1BTW,WAAkB,IAAI8lB,EAAInpB,KAAqB,OAAOopB,EAApBD,EAAIF,MAAMG,IAAa,MAAM,CAAC+B,YAAY,UAAUI,SAAS,CAAC,UAAYpC,EAAIqC,GAAGrC,EAAIjT,oBACpI,GACsB,I0BUpB,EACA,KACA,WACA,MAIa,UAAA7S,U,omCClBf,smGAAArE,GAAA,wBAAAA,EAAA,sBAAAA,GAAA,iBAAAA,GAAA,qtDAAAA,EAAA,yBAAAA,GAAA,IAAAA,EAAA,uBAAAA,GAAA,4bAAAA,EAAA,yBAAAA,GAAA,IAAAA,EAAA,uBAAAA,GAAA,yhBAAAA,EAAA,yBAAAA,GAAA,IAAAA,EAAA,uBAAAA,GAAA,qGAAAA,EAAA,yBAAAA,GAAA,IAAAA,EAAA,uBAAAA,GAAA,ixCAAAA,EAAA,iBAAAA,EAAA,EAAAA,IAAA,EAAAA,GAAA,EAAAA,GAAA,SAUe,KACb2W,MAAO,CACLjX,MAAO,CACLuG,KAAM2Q,OACNC,QAAS,IAEX4V,WAAY,CACVxmB,KAAM6Q,SACND,QAAS,MAEXzM,eAAgB,CACdnE,KAAM6Q,SACND,QAAS,MAEXiT,SAAU,CACR7jB,KAAM8jB,QACNlT,SAAS,GAEX6V,KAAM,CACJzmB,KAAM2Q,OACNC,QAAS,OAGb8V,MAAO,CAAC,SACRptB,KAAI,WACF,MAAO,CACLmrB,WAAY,KACZkC,cAAe,CAAC,EAChBhC,sBAAsB,EAE1B,EACA3T,SAAU,CACR4V,aAAY,WACV,OAAO7rB,KAAKtB,OAAS,EACvB,EACAmrB,WAAU,WACR,OAAO7pB,KAAK8pB,OAAOxO,MAAMyO,SAASC,kBACpC,EACAK,kBAAiB,WACf,OAAqB,OAAdrqB,KAAK0rB,OAAkB1rB,KAAK8oB,UACjC9oB,KAAK8pB,OAAOxO,MAAMyO,SAASM,mBAAqBrqB,KAAK8pB,OAAOK,QAAQ,wBAAwBC,SAAS/E,UACzG,GAEF9O,MAAO,CACL7X,MAAK,WACCsB,KAAK0pB,YAAc1pB,KAAK6rB,eAAiB7rB,KAAK0pB,WAAWpO,MAAMhD,IAAIjW,YACrErC,KAAK0pB,WAAWnO,SAAS,CACvBJ,QAAS,CACPjJ,KAAM,EACN2E,GAAI7W,KAAK0pB,WAAWpO,MAAMhD,IAAIvV,OAC9BmX,OAAQla,KAAK6rB,eAIrB,EACA/C,SAAQ,SAACxmB,GACHtC,KAAK4rB,eACP5rB,KAAK4rB,cAAc9C,SAASxmB,EAEhC,EACAopB,KAAI,SAACppB,GACCtC,KAAKqqB,mBACPyB,YAAa9rB,KAAK0pB,WAEtB,EACAW,kBAAiB,SAAC/nB,GAChBtC,KAAK4rB,cAAcvG,WAAW/iB,GACzBA,GAEHtC,KAAK0pB,WAAWnO,SAASoL,YAAe3mB,KAAK0pB,WAAWpO,MAAO,IAEnE,GAEFyQ,QAAO,WACL/rB,KAAKgsB,sBACP,EACAC,cAAa,WACPjsB,KAAK0pB,YACP1pB,KAAK0pB,WAAWwC,SAEpB,EACAtV,QAAS,CACPoV,qBAAoB,WAAG,WACrBhsB,KAAK0pB,WAAa,IAAIxC,IAAW,CAC/B5f,OAAQtH,KAAKirB,MAAMkB,OACnB7Q,MAAO8Q,IAAYC,OAAO,CACxB/T,IAAKtY,KAAK6rB,aACV3c,WAAY,CACVsD,cACA8Z,cACAF,IAAYG,wBAAwBtJ,IAAG,GACvCiE,IAAWsF,aACXJ,IAAYK,QAAQxJ,GAAG,GACvByJ,IAAWzJ,GAAG,QACdD,IAAOC,GAAG,CAAC0J,IAAeC,IAAeC,MACzCjK,cACAkK,YAAmBzJ,KACnBO,IACAsD,IAAW6F,eAAe9J,IAAG,SAAC+J,GAExBA,EAAWC,YAAcD,EAAW1R,MAAMhD,IAAIjW,aAAe,EAAKwpB,cACpE,EAAKqB,MAAM,QAASF,EAAW1R,MAAMhD,IAAIjW,WAE7C,KAAE,SACCrC,KAAKmtB,uCAKdntB,KAAK4rB,cAAgB,CACnB9C,SAAUtE,YAA6BxkB,KAAK0pB,WAAY,CACtDxC,IAAWkG,SAASnK,IAAG,GACvBmJ,IAAYiB,SAASpK,IAAG,KAE1BoC,WAAYb,YAA6BxkB,KAAK0pB,WAAY,CACxDrE,YAAW,CAAEC,yBAA0BtlB,KAAKslB,yBAA0BC,gCAAiCvlB,KAAKulB,kCAC5G0B,MAEFwE,WAAYjH,YAA6BxkB,KAAK0pB,WAAY,CACxDxC,IAAWoG,iBAAiB,CAC1BC,KAAM,SAACxC,EAAOhH,MACZgH,EAAMyC,kBACNzC,EAAM0C,iBACN,IAAMC,EAAU,EAAKhE,WAAWiE,YAAY,CAAEC,EAAG7C,EAAM8C,QAASC,EAAG/C,EAAMgD,UACzE,EAAKpE,YAAYoB,EAAMiD,aAAahD,MAAO0C,EAC7C,EACAO,MAAO,SAAClD,EAAOhH,MAAS,OACO,QAAzB,EAAAgH,EAAMmD,cAAclD,aAAK,aAAzB,EAA2BjoB,QAAS,IACtCgoB,EAAMyC,kBACNzC,EAAM0C,iBACN,EAAK9D,YAAYoB,EAAMmD,cAAclD,OAEzC,OAINhrB,KAAK4rB,cAAc9C,SAAS9oB,KAAK8oB,UACjC9oB,KAAK4rB,cAAcvG,WAAWrlB,KAAKqqB,mBACnCrqB,KAAK4rB,cAAcH,WAA+B,OAApBzrB,KAAKyrB,WACrC,EACA0B,+BAA8B,WAC5B,MAAO,EACT,EACAgB,YAAW,SAAC7rB,GACVtC,KAAKktB,MAAM,QAAS5qB,EACtB,EACA8rB,WAAU,SAAC9rB,GACTtC,KAAKktB,MAAM,OAAQ5qB,EACrB,EACMqnB,YAAW,SAACqB,GAAmB,kIAAF,GAAVnd,EAAM,EAAH,6BAAG,KACxB,EAAK4d,YAAeT,GAA0B,IAAjBA,EAAMjoB,SAAgB,EAAK6mB,qBAAoB,iDAK9C,OAL8C,SAK/E,EAAKA,sBAAuB,EAAK,SACXyE,QAAQrnB,IAAIlF,MAAMoQ,KAAK8Y,GAAO7f,KAAI,SAACmjB,GACvD,IACE,OAAO,EAAK7C,WAAW6C,EAIzB,CAHE,MAAOztB,GAEP,OADA,EAAK0tB,OAAO5tB,OAAOC,aAAa,CAAEC,QAAOqlB,QAAS,oBAAsBoI,EAAKtjB,OACtE,IACT,CACF,KAAG,OAPGvK,EAAU,EAAH,KASP+tB,EAAa/tB,EAAQ6S,QAAO,SAAAmb,GAAC,OAAIA,CAAC,IAAElrB,KAAK,MACnC,OAARsK,IACFA,EAAM,EAAK6b,WAAWpO,MAAMgC,UAAUoR,KAAKxc,MAE7C,EAAKwX,WAAWnO,SAAS,CAAEJ,QAAS,CAAEjJ,KAAMrE,EAAKqM,OAAQsU,KAAgB,QAEvC,OAFuC,UAEzE,EAAK5E,sBAAuB,EAAM,0EAtBD,EAwBrC,EACMtE,yBAAwB,SAAC/mB,MAAM,+GAC9B,EAAKmtB,MAASntB,KAAI,yCACd,CACLonB,QAAS,KACV,uBAGU,EAAK3O,OAAO2X,MAAM,qBAAsB,EAAF,KAC9CpwB,MAAI,IACP8U,SAAU,EAAKqY,QACf,kFAViC,EAWrC,EACMnG,gCAA+B,SAAChnB,MAAM,qIAE3B,EAAKyY,OAAO2X,MAAM,2BAA4BpwB,MAAK,wEAEhE,EAAKgwB,OAAO5tB,OAAOC,aAAa,CAAEC,MAAK,OAAI,uDAJH,EAM5C,G,mCC3MJ,M,sBCCA,IACI6nB,EAD8B,EAAQ,GACZC,EAA4B,GAE1DD,EAAwB/pB,KAAK,CAACgZ,EAAO3Y,EAAI,6LAA8L,KAEvO2Y,EAAOE,QAAU6Q,C,0CCNjB,ICAgQ,EDCjP,CACb/S,MAAO,CACL+T,WAAY,CACVzkB,KAAMvD,OACNmnB,UAAU,GAEZ+F,kBAAmB,CACjB3pB,KAAM8jB,QACNlT,SAAS,GAEX+T,qBAAsB,CACpB3kB,KAAM8jB,QACNlT,SAAS,IAGbI,SAAU,CACR4Y,kBAAiB,WACf,OAAO7uB,KAAK0pB,WAAWpO,MAAMhD,IAAII,OAAO1Y,KAAK0pB,WAAWpO,MAAMgC,UAAUoR,KAAKI,MAAMnW,MACrF,EACAoW,iBAAgB,WACd,IAAMlhB,EAAM7N,KAAK0pB,WAAWpO,MAAMgC,UAAUoR,KAAKI,KAEjD,OAAOjhB,EADM7N,KAAK0pB,WAAWpO,MAAMhD,IAAII,OAAO7K,GAC5BqE,IACpB,EACA8c,UAAS,WACP,OAAOhvB,KAAK0pB,WAAWpO,MAAMhD,IAAIpE,KACnC,EACA+a,UAAS,WACP,IACM7c,EAAKpS,KAAK0pB,WAAWpO,MAAMhD,IAAIjW,WAAYY,MADjC,8HAEZisB,EAAQ,EACZ,GAAU,OAAN9c,EAAc,OAAO8c,EACzB,IAAK,IAAIlwB,EAAI,EAAGA,EAAIoT,EAAErP,OAAQ/D,IACxBoT,EAAEpT,GAAGmwB,WAAW,IAAM,MACxBD,GAAS9c,EAAEpT,GAAG+D,OAEdmsB,GAAS,EAGb,OAAOA,CACT,I,iBEjCA7rB,UAAY,YACd,GFTW,WAAkB,IAAI8lB,EAAI,KAAKC,EAAGD,EAAIF,MAAMG,GAAG,OAAOA,EAAG,MAAM,CAAC+B,YAAY,iBAAiB,CAAEhC,EAAIyF,kBAAmB,CAAGzF,EAAIS,qBAA0GR,EAAG,OAAO,CAACD,EAAIiC,GAAG,2BAAtGhC,EAAG,OAAO,CAACD,EAAIiC,GAAG,mEAAgHjC,EAAIiG,KAAKjG,EAAIiC,GAAG,KAAKhC,EAAG,OAAO,CAACD,EAAIiC,GAAG,UAAUjC,EAAIqC,GAAGrC,EAAI6F,cAAc7F,EAAIiC,GAAG,KAAKhC,EAAG,OAAO,CAACD,EAAIiC,GAAG,UAAUjC,EAAIqC,GAAGrC,EAAI8F,cAAc9F,EAAIiC,GAAG,KAAKhC,EAAG,OAAO,CAACD,EAAIiC,GAAGjC,EAAIqC,GAAGrC,EAAI0F,mBAAmB,IAAI1F,EAAIqC,GAAGrC,EAAI4F,sBAAsB,EAC9gB,GACsB,IEUpB,EACA,KACA,WACA,MAIa,UAAA1rB,U,0CCnBf,M,sBCCA,IACIqlB,EAD8B,EAAQ,GACZC,EAA4B,GAE1DD,EAAwB/pB,KAAK,CAACgZ,EAAO3Y,EAAI,06FAA66F,KAEt9F2Y,EAAOE,QAAU6Q,C,yECNkP,ECGpP,CACb2G,OAAQ,C,OAACC,I,iBCIPjsB,UAAY,YACd,GDT2E8nB,WAAiB,IAAIhC,EAAIO,KAAmC9f,EAAK,EAAC,S,OAAC,QAAa,C,YAA0B,O,CAAc,aAAeuf,EAAIsC,mBAAiB9B,C,MAAmB,CAAkD,2BAAG,SAAUR,EAAIiC,SAAgDxhB,eAAM,gCAAC,0BAAa,0BAAMwf,EAAG,KAAO,EAAC,gCAACmG,OAAavkB,aAAW,K,CAAkBtM,MAAOyqB,C,WAAwC,EAA6B,YAACvf,QAAM,SAAC,MAAqB,YAAf,EAAI,WAA6C,wCAAc4lB,MAAI,CAASrE,KAAwB,qBAAxBA,EAAY,WAAY,S,CAAQ,SAAwD,aAAG,YAAU,aAAyEvhB,MAAM,CAAC,kBAAW,uCAAQ,EAAEuf,GAAG,KAAuBU,qBAAlB,EAAI,WAA6B,EAAU,IAAK,OAAQ,CAACjgB,MAAM,CAAC,SAAWigB,OAAgDT,GAAG,YAAmB,sCAAC+B,OAAsBvhB,KAAM,2C,CAAmB,qBAAsB,CAAe,sBAAG,MAAI,CAAgGA,MAAM,QAAC,mBAAkB8f,qBAAmD,gBAAyB,GAACP,KAAIS,sDAAoB,OAAG,cAAa,aACjxC,sCACGyB,0BAAoB,0B,iBCUtB,EACA,KACA,WACA,MAIa,UAAAhoB,UAAiB,QAGhCkmB,kBAAkBlmB,UAAW,CAACosB,gBAAiB,EAAQ,KAAiD5Z,QAAQ6Z,gBAAiB,EAAQ,KAAiD7Z,QAAQ8Z,kBAAmB,EAAQ,KAAmD9Z,S","file":"3993352.js","sourcesContent":["export function addRemarkExtension(self, micromarkExtensions, fromMarkdownExtensions, toMarkdownExtensions) {\n  const data = self.data();\n\n  add('micromarkExtensions', micromarkExtensions);\n  add('fromMarkdownExtensions', fromMarkdownExtensions);\n  add('toMarkdownExtensions', toMarkdownExtensions);\n\n  /**\n  * @param {string} field\n  * @param {unknown} value\n  */\n  function add(field, value) {\n    const list = /** @type {unknown[]} */ (\n      // Other extensions\n      /* c8 ignore next 2 */\n      data[field] ? data[field] : (data[field] = [])\n    )\n\n    list.push(value)\n  }\n}\n\n\nexport function assert(bool, msg) {\n  if (!bool) {\n    throw new Error(msg);\n  }\n}","import urlJoin from 'url-join';\nimport { debounce } from 'lodash';\n\nexport function absoluteApiUrl(url, axios) {\n  if (['http', 'data'].some(p => url.startsWith(p))) {\n    return url;\n  } else if (url.startsWith('/api/')) {\n    return urlJoin(new URL(axios.defaults.baseURL, window.location).origin, url);\n  } else {\n    return urlJoin(axios.defaults.baseURL, url);\n  }\n}\n\nexport function relativeTo(url, baseUrl) {\n  const absUrl = absoluteApiUrl(url);\n  baseUrl = absoluteApiUrl(baseUrl);\n\n  if (absUrl.startsWith(baseUrl)) {\n    return absUrl.substring(baseUrl.length);\n  } else {\n    return url;\n  }\n}\n\nexport class CursorPaginationFetcher {\n  constructor(baseURL, axios, toast) {\n    this.axios = axios;\n    this.toast = toast;\n    this.baseURL = baseURL;\n\n    this.nextPageURL = this.baseURL;\n    this.isLoading = false;\n    this.data = [];\n    this.hasError = false;\n    this.errorData = null;\n  }\n\n  get hasNextPage() {\n    return this.nextPageURL !== null;\n  }\n\n  async fetchNextPage() {\n    if (!this || this.isLoading || !this.hasNextPage) {\n      return;\n    }\n\n    try {\n      this.isLoading = true;\n\n      const res = await this.axios.$get(this.nextPageURL);\n      this.nextPageURL = res.next;\n      this.data.push(...res.results);\n\n      this.hasError = false;\n      this.errorData = null;\n    } catch (error) {\n      this.hasError = true;\n      this.errorData = error?.response?.data || null;\n\n      this.toast.global.requestError({ error });\n    } finally {\n      this.isLoading = false;\n    }\n  }\n}\n\nexport class SearchableCursorPaginationFetcher {\n  constructor({ baseURL, searchFilters = { search: '' }, axios, toast }) {\n    this.axios = axios;\n    this.toast = toast;\n    this.baseURL = baseURL;\n    this._searchFilters = searchFilters;\n\n    this._fetchNextPageDebounced = debounce(function() { this._fetchNextPage(); }, 500);\n\n    this.fetcher = null;\n    this._createFetcher();\n  }\n\n  _createFetcher() {\n    const searchParams = new URLSearchParams(this.baseURL.split('?')[1]);\n    for (const [k, v] of Object.entries(this.searchFilters)) {\n      if (v) {\n        if (Array.isArray(v)) {\n          searchParams.delete(k);\n          for (const e of v) {\n            searchParams.append(k, e);\n          }\n        } else {\n          searchParams.set(k, v);\n        }\n      }\n    }\n    const searchUrl = this.baseURL.split('?')[0] + '?' + searchParams.toString();\n    this.fetcher = new CursorPaginationFetcher(searchUrl, this.axios, this.toast);\n  }\n\n  search(val) {\n    this._searchFilters = Object.assign(this._searchFilters, { search: val })\n    this._createFetcher();\n    this.fetchNextPage();\n  }\n\n  applyFilters(filters) {\n    Object.assign(this._searchFilters, filters);\n    this._createFetcher();\n    this.fetchNextPageImmediate()\n  }\n\n  get searchFilters() {\n    return this._searchFilters;\n  }\n\n  get searchQuery() {\n    return this.searchFilters.search;\n  }\n\n  set searchQuery(val) {\n    this.search(val, this._searchFilters);\n  }\n\n  get hasNextPage() {\n    return this.fetcher.hasNextPage;\n  }\n\n  get hasError() {\n    return this.fetcher.hasError;\n  }\n\n  get errorData() {\n    return this.fetcher.errorData;\n  }\n\n  get data() {\n    return this.fetcher.data;\n  }\n\n  fetchNextPage() {\n    this._fetchNextPageDebounced();\n  }\n\n  async _fetchNextPage() {\n    await this.fetcher.fetchNextPage();\n  }\n\n  fetchNextPageImmediate() {\n    if (!this) {\n      return;\n    }\n\n    this._fetchNextPageDebounced();\n    this._fetchNextPageDebounced.flush();\n  }\n}\n","function normalize (strArray) {\n  var resultArray = [];\n  if (strArray.length === 0) { return ''; }\n\n  if (typeof strArray[0] !== 'string') {\n    throw new TypeError('Url must be a string. Received ' + strArray[0]);\n  }\n\n  // If the first part is a plain protocol, we combine it with the next part.\n  if (strArray[0].match(/^[^/:]+:\\/*$/) && strArray.length > 1) {\n    var first = strArray.shift();\n    strArray[0] = first + strArray[0];\n  }\n\n  // There must be two or three slashes in the file protocol, two slashes in anything else.\n  if (strArray[0].match(/^file:\\/\\/\\//)) {\n    strArray[0] = strArray[0].replace(/^([^/:]+):\\/*/, '$1:///');\n  } else {\n    strArray[0] = strArray[0].replace(/^([^/:]+):\\/*/, '$1://');\n  }\n\n  for (var i = 0; i < strArray.length; i++) {\n    var component = strArray[i];\n\n    if (typeof component !== 'string') {\n      throw new TypeError('Url must be a string. Received ' + component);\n    }\n\n    if (component === '') { continue; }\n\n    if (i > 0) {\n      // Removing the starting slashes for each component but the first.\n      component = component.replace(/^[\\/]+/, '');\n    }\n    if (i < strArray.length - 1) {\n      // Removing the ending slashes for each component but the last.\n      component = component.replace(/[\\/]+$/, '');\n    } else {\n      // For the last component we will combine multiple slashes to a single one.\n      component = component.replace(/[\\/]+$/, '/');\n    }\n\n    resultArray.push(component);\n\n  }\n\n  var str = resultArray.join('/');\n  // Each input component is now separated by a single slash except the possible first plain protocol part.\n\n  // remove trailing slash before parameters or hash\n  str = str.replace(/\\/(\\?|&|#[^!])/g, '$1');\n\n  // replace ? in parameters with &\n  var parts = str.split('?');\n  str = parts.shift() + (parts.length > 0 ? '?': '') + parts.join('&');\n\n  return str;\n}\n\nexport default function urlJoin() {\n  var input;\n\n  if (typeof arguments[0] === 'object') {\n    input = arguments[0];\n  } else {\n    input = [].slice.call(arguments);\n  }\n\n  return normalize(input);\n}\n","import {splice} from 'micromark-util-chunked'\nimport {codes} from 'micromark-util-symbol/codes.js'\nimport {resolveAll} from 'micromark-util-resolve-all'\nimport {containerPhrasing} from 'mdast-util-to-markdown/lib/util/container-phrasing.js'\nimport {all} from 'remark-rehype';\nimport {visit} from 'unist-util-visit';\nimport { addRemarkExtension, assert } from './helpers';\nimport {h} from 'hastscript';\n\n/**\n * @typedef {import('micromark-util-types').Extension} Extension\n * @typedef {import('micromark-util-types').Resolver} Resolver\n * @typedef {import('micromark-util-types').Token} Token\n * @typedef {import('micromark-util-types').Tokenizer} Tokenizer\n * @typedef {import('micromark-util-types').Exiter} Exiter\n * @typedef {import('micromark-util-types').State} State\n * @typedef {import('micromark-util-types').HtmlExtension} HtmlExtension\n * @typedef {import('micromark-util-types').CompileContext} CompileContext\n * \n * @typedef {import('mdast-util-from-markdown').Extension} FromMarkdownExtension\n * @typedef {import('mdast-util-from-markdown').Handle} FromMarkdownHandle\n * @typedef {import('mdast-util-to-markdown').Options} ToMarkdownExtension\n * @typedef {import('mdast-util-to-markdown').Handle} ToMarkdownHandle\n * @typedef {import('mdast-util-to-markdown').Map} Map\n */\n \n\n/**\n * @returns {Extension}\n */\nfunction footnoteSyntax() {\n  /** @type {Extension} */\n  return {\n    _hiddenFootnoteSupport: {},\n    text: {\n      [codes.caret]: {\n        tokenize: tokenizeInlineFootnoteStart, \n        resolveAll: resolveAllFootnote\n      },\n      [codes.rightSquareBracket]: {\n        add: 'after',\n        tokenize: tokenizeInlineFootnoteEnd,\n        resolveAll: resolveAllFootnote,\n        resolveTo: resolveToFootnoteEnd\n      },  \n    }\n  };\n\n  /** @type {Tokenizer} */\n  function tokenizeInlineFootnoteStart(effects, ok, nok) {\n    return start;\n\n    /** @type {State} */\n    function start(code) {\n      assert(code === codes.caret, 'expected `^`');\n      effects.enter('inlineFootnoteStart');\n      effects.enter('inlineFootnoteMarker');\n      effects.consume(code);\n      effects.exit('inlineFootnoteMarker');\n      return inlineFootnoteStart;\n    }\n\n    /** @type {State} */\n    function inlineFootnoteStart(code) {\n      if (code !== codes.leftSquareBracket) {\n        return nok(code);\n      }\n\n      effects.enter('inlineFootnoteStartMarker');\n      effects.consume(code);\n      effects.exit('inlineFootnoteStartMarker');\n      effects.exit('inlineFootnoteStart');\n      return ok;\n    }\n  }\n\n  /** @type {Tokenizer} */\n  function tokenizeInlineFootnoteEnd(effects, ok, nok) {\n    const self = this;\n    return start;\n\n    /** @type {State} */\n    function start(code) {\n      assert(code === codes.rightSquareBracket, 'expected `]`');\n      let index = self.events.length;\n      /** @type {boolean|undefined} */\n      let hasStart;\n\n      // Find an opening.\n      while (index--) {\n        if (self.events[index][1].type === 'inlineFootnoteStart') {\n          hasStart = true;\n          break;\n        }\n      }\n\n      if (!hasStart) {\n        return nok(code);\n      }\n\n      effects.enter('inlineFootnoteEnd');\n      effects.enter('inlineFootnoteEndMarker');\n      effects.consume(code);\n      effects.exit('inlineFootnoteEndMarker');\n      effects.exit('inlineFootnoteEnd');\n      return ok;\n    }\n  }\n\n  /**\n   * Remove remaining note starts.\n   *\n   * @type {Resolver}\n   */\n  function resolveAllFootnote(events) {\n    let index = -1;\n    /** @type {Token} */\n    let token;\n\n    while (++index < events.length) {\n      token = events[index][1];\n\n      if (events[index][0] === 'enter' && token.type === 'inlineFootnoteStart') {\n        token.type = 'data';\n        // Remove the two marker (`^[`).\n        events.splice(index + 1, 4);\n      }\n    }\n\n    return events;\n  }\n\n  /** @type {Resolver} */\n  function resolveToFootnoteEnd(events, context) {\n    let index = events.length - 4;\n    /** @type {Token} */\n    let token;\n    /** @type {number} */\n    let openIndex;\n\n    // Find an opening.\n    while (index--) {\n      token = events[index][1];\n\n      // Find where the note starts.\n      if (events[index][0] === 'enter' && token.type === 'inlineFootnoteStart') {\n        openIndex = index;\n        break;\n      }\n    }\n\n    // @ts-expect-error Its fine.\n    assert(openIndex !== undefined, 'expected `openIndex` to be found');\n\n    /** @type {Token} */\n    const group = {\n      type: 'inlineFootnote',\n      start: Object.assign({}, events[openIndex][1].start),\n      end: Object.assign({}, events[events.length - 1][1].end),\n    }\n\n    const text = {\n      type: 'inlineFootnoteText',\n      start: Object.assign({}, events[openIndex + 4][1].end),\n      end: Object.assign({}, events[events.length - 3][1].start),\n    }\n\n    const note = [\n      ['enter', group, context],\n      events[openIndex + 1],\n      events[openIndex + 2],\n      events[openIndex + 3],\n      events[openIndex + 4],\n      ['enter', text, context]\n    ];\n\n    splice(\n      note,\n      note.length,\n      0,\n      resolveAll(\n        context.parser.constructs.insideSpan.null,\n        events.slice(openIndex + 6, -4),\n        context\n      )\n    );\n\n    note.push(\n      ['exit', text, context],\n      events[events.length - 3],\n      events[events.length - 2],\n      ['exit', group, context]\n    );\n\n    splice(events, index, events.length - index, note);\n\n    return events;\n  }\n}\n\n\n\nfunction footnoteFromMarkdown() {\n  /** @type {FromMarkdownExtension} */\n  return {\n    enter: {\n      inlineFootnote: enterInlineFootnote,\n    },\n    exit: {\n      inlineFootnote: exitInlineFootnote,\n    }\n  };\n\n  function enterInlineFootnote(token) {\n    this.enter({type: 'footnote', children: []}, token);\n  }\n\n  function exitInlineFootnote(token) {\n    this.exit(token);\n  }\n}\n\nfunction footnoteToMarkdown() {\n  return {\n    unsafe: [{character: '[', inConstruct: ['phrasing', 'label', 'reference']}],\n    handlers: {footnote},\n  };\n\n  function footnote(node, _, context) {\n    const exit = context.enter('footnote');\n    const subexit = context.enter('label');\n    const value = '^[' + containerPhrasing(node, context, {before: '[', after: ']'}) + ']';\n    subexit();\n    exit();\n    return value;\n  }\n};\n\n\n\nexport function remarkFootnotes() {\n  addRemarkExtension(this, footnoteSyntax(), footnoteFromMarkdown(), footnoteToMarkdown());\n}\n\n\n/**\n * Render footnotes as <footnote>content</footnote>\n */\nexport const remarkToRehypeHandlersFootnotes = {\n  footnote(h, node) {\n    return h(node, 'footnote', all(h, node))\n  },\n  footnoteDefinition(h, node) {\n    return null;\n  },\n  footnoteReference(h, node) {\n    return null;\n  },\n};\n\n\nexport function rehypeFootnoteSeparator() {\n  // add a footnote call separator tag between consecutive <footnote> tags\n  return tree => visit(tree, 'element', (node, index, parent) => {\n    if (node.tagName === 'footnote' && parent.children[index + 1]?.tagName === 'footnote') {\n      parent.children.splice(index + 1, 0, h('sup', {class: 'footnote-call-separator'}));\n    }\n  })\n}\n\n\nexport function rehypeFootnoteSeparatorPreview() {\n  return tree => visit(tree, 'element', (node, index, parent) => {\n    // Remove link from footnote call\n    if (node.tagName !== 'sup' || node.children.length !== 1 || !node.children[0]?.properties?.dataFootnoteRef) {\n      return;\n    }\n    node.children = node.children[0].children;\n\n    // Add footnote call separator\n    const nextSibling = parent.children[index + 1];\n    if (nextSibling?.tagName !== 'sup' || nextSibling.children.length !== 1 || !nextSibling.children[0]?.properties?.dataFootnoteRef) {\n      return;\n    }\n    parent.children.splice(index + 1, 0, h('sup', {class: 'footnote-call-separator'}, [',']));\n  })\n}","import { gfmStrikethrough } from 'micromark-extension-gfm-strikethrough';\nimport { gfmStrikethroughFromMarkdown, gfmStrikethroughToMarkdown } from 'mdast-util-gfm-strikethrough';\nimport { gfmTaskListItem } from 'micromark-extension-gfm-task-list-item';\nimport { gfmTaskListItemFromMarkdown, gfmTaskListItemToMarkdown } from 'mdast-util-gfm-task-list-item';\nimport { addRemarkExtension } from './helpers';\n\n\nexport function remarkStrikethrough() {\n  addRemarkExtension(this, gfmStrikethrough(), gfmStrikethroughFromMarkdown, gfmStrikethroughToMarkdown);\n}\n\n\nexport function remarkTaskListItem() {\n  addRemarkExtension(this, gfmTaskListItem, gfmTaskListItemFromMarkdown, gfmTaskListItemToMarkdown);\n}\n","import {visit} from 'unist-util-visit';\n\n/**\n * Add target=\"_blank\" to links.\n */\nexport function rehypeLinkTargetBlank() {\n  return tree => {\n    visit(tree, 'element', node => {\n      if (node.tagName === 'a' && !(node.properties.href || '#').startsWith('#')) {\n        node.properties.target = '_blank';\n        node.properties.rel = 'nofollow noopener noreferrer';\n      }\n    });\n  }\n}\n\n/**\n * Convert HTML attributes to inline CSS styles.\n */\nexport function rehypeConvertAttrsToStyle() {\n  const convertAttrs = {\n    'width': 'width', \n    'height': 'height'\n  };\n\n  return tree => {\n    visit(tree, 'element', node => {\n      for (const [attrName, styleName] of Object.entries(convertAttrs)) {\n        if (node.properties[attrName]) {\n          let style = (node.properties.style || '');\n          if (style && style[style.length - 1] !== ';') {\n            style += ';'\n          }\n          style += styleName + ':' + node.properties[attrName] + ';';\n          node.properties.style = style;\n          node.properties[attrName] = undefined;\n        }\n      }\n    });\n  }\n}\n\n\nexport function addClass(node, className) {\n  if (!node.properties.className) {\n    node.properties.className = [];\n  }  \n  if (Array.isArray(className)) {\n    node.properties.className.push(...className);\n  } else {\n    node.properties.className.push(className);\n  }\n}\n\n\nexport function rehypeRewriteImageSources({rewriteImageSource}) {\n  return tree => visit(tree, 'element', node => {\n    if (node.tagName === 'img' && node.properties.src && rewriteImageSource) {\n      node.properties.src = rewriteImageSource(node.properties.src);\n    }\n  });\n}\n\n\nexport function rehypeRewriteFileLinks({ rewriteFileUrl }) {\n  return tree => visit(tree, 'element', node => {\n    if (node.tagName === 'a' && node.properties?.href?.startsWith('/files/') && rewriteFileUrl) {\n      node.properties.href = rewriteFileUrl(node.properties.href);\n      node.properties.download = true;\n      addClass(node, ['file-download-preview', 'v-icon', 'mdi', 'mdi-file-download']);\n    }\n  });\n}\n\n\nexport function rehypeTemplates() {\n  return tree => visit(tree, 'element', node => {\n    if (node.tagName === 'template') {\n      node.children = node.content?.children || [];\n      node.tagName = 'span';\n    }\n  })\n}\n","import {codes} from 'micromark-util-symbol/codes.js';\nimport {factoryAttributes} from 'micromark-extension-directive/lib/factory-attributes.js';\nimport {parseEntities} from 'parse-entities';\nimport {visit} from 'unist-util-visit';\nimport { addRemarkExtension } from './helpers';\n\n\nfunction attrsSyntax() {\n  return {\n    name: 'attrs',\n    text: {\n      [codes.leftCurlyBrace]: {\n        tokenize: tokenizeAttributes,\n      }\n    }\n  };\n\n  function tokenizeAttributes(effects, ok, nok) {\n    // Always a `{`\n    return factoryAttributes(\n      effects,\n      ok,\n      nok,\n      'textAttributes',\n      'textAttributesMarker',\n      'textAttribute',\n      'textAttributeId',\n      'textAttributeClass',\n      'textAttributeName',\n      'textAttributeInitializerMarker',\n      'textAttributeValueLiteral',\n      'textAttributeValue',\n      'textAttributeValueMarker',\n      'textAttributeValueData'\n    )\n  }\n};\n\n\nfunction attrsFromMarkdown() {\n  return {\n    transforms: [transformAttributesAttachToElements],\n    enter: {\n      textAttributes: enterAttributes,\n    },\n    exit: {\n      textAttributes: exitAttributes,\n      textAttributeClassValue: exitAttributeClassValue,\n      textAttributeIdValue: exitAttributeIdValue,\n      textAttributeName: exitAttributeName,\n      textAttributeValue: exitAttributeValue,\n    }\n  };\n\n  function enterAttributes(token) {\n    this.setData('directiveAttributes', []);\n    this.enter({type: 'attributes', attrs: {}, attrsString: ''}, token);\n    this.buffer();\n  }\n\n  function exitAttributeIdValue(token) {\n    const list = this.getData('directiveAttributes');\n    list.push(['id', parseEntities(this.sliceSerialize(token))])\n  }\n\n  function exitAttributeClassValue(token) {\n    const list = this.getData('directiveAttributes');\n    list.push(['class', parseEntities(this.sliceSerialize(token))])\n  }\n\n  function exitAttributeValue(token) {\n    const list = this.getData('directiveAttributes');\n    list[list.length - 1][1] = parseEntities(this.sliceSerialize(token))\n  }\n\n  function exitAttributeName(token) {\n    // Attribute names in CommonMark are significantly limited, so character\n    // references cant exist.\n    this.getData('directiveAttributes').push([this.sliceSerialize(token), ''])\n  }\n\n  function exitAttributes(token) {\n    const cleaned = {};\n    for (const attribute of this.getData('directiveAttributes')) {\n      if (attribute[0] === 'class' && cleaned.class) {\n        cleaned.class += ' ' + attribute[1];\n      } else {\n        cleaned[attribute[0]] = attribute[1];\n      }\n    }\n  \n    this.setData('directiveAttributes')\n    this.resume(); // Drop EOLs\n\n    const node = this.stack[this.stack.length - 1];\n    node.attrs = cleaned;\n    node.attrsString = this.sliceSerialize(token);\n    this.exit(token);\n  }\n\n  function transformAttributesAttachToElements(tree) {\n    // Attach attributes to elements or convert to text\n    visit(tree, (node, index, parent) => {\n      if (node.type === 'attributes') {\n        const prevNode = index > 0 ? parent.children[index - 1] : null;\n        if (prevNode && prevNode.type !== 'text') {\n          // Attach attributes to previous element e.g. ![img](img.png){width=\"50%\"}, **bold**{.styled}, but not \"**bold** {.not-styled}\"\n          prevNode.data = {...prevNode.data, hProperties: node.attrs};\n        } else {\n          // Could not attach to any node: convert attributes to text\n          node.type = 'text';\n          node.value = node.attrsString;\n          delete node.attrs;\n          delete node.attrsString;\n        }\n      }\n    });\n  }\n}\n\n\nfunction attrsToMarkdown() {\n  return {\n    handlers: {\n      attributes\n    }\n  };\n\n  function attributes(node, _, context) {\n    const exit = context.enter('attributes');\n    const value = node.attrsString || Object.entries(node.attrs).map(([k, v]) => {\n      if (k === 'id') { return '#' + v }\n      else if (k === 'class') { return v.split(' ').map(c => '.' + c).join(' ')}\n      else { return `${k}=${v}`; }\n    }).join(' ');\n    exit();\n    return value;\n  }\n}\n\nexport const remarkToRehypeAttrs = {\n  attributes(h, node) {\n    // Remove attributes nodes\n    return null;\n  }\n}\n\nexport function remarkAttrs() {\n  addRemarkExtension(this, attrsSyntax(), attrsFromMarkdown(), attrsToMarkdown());\n}\n\n","import { addRemarkExtension } from \"./helpers\";\nimport {checkQuote} from 'mdast-util-to-markdown/lib/util/check-quote.js'\nimport {containerPhrasing} from 'mdast-util-to-markdown/lib/util/container-phrasing.js'\nimport {track} from 'mdast-util-to-markdown/lib/util/track.js'\nimport {safe} from 'mdast-util-to-markdown/lib/util/safe.js'\nimport {all} from 'remark-rehype';\nimport {normalizeUri} from 'micromark-util-sanitize-uri';\n\n\nfunction figureFromMarkdown() {\n  // Extend default image formatter from mdast-util-from-markdown to support child markdown text\n  return {\n    enter: {\n      image: enterImage,\n    }, \n    exit: {\n      label: exitLabel,\n    }\n  };\n\n  function enterImage(token) {\n    this.enter({type: 'image', title: null, url: '', alt: null, children: []}, token);\n  }\n\n\n  /**\n   * Label for link or image\n   */\n  function exitLabel(token) {\n    const fragment = /** @type {Fragment} */ (this.stack[this.stack.length - 1]);\n    const value = this.resume();\n    const node =\n      /** @type {(Link|Image) & {identifier: string, label: string}} */ (\n        this.stack[this.stack.length - 1]\n      );\n\n    // Assume a reference.\n    this.setData('inReference', true);\n\n    // @ts-expect-error: Assume static phrasing content.\n    node.children = fragment.children;\n    if (node.type === 'image') {\n      node.alt = value;\n    }\n  }\n}\n\n\nfunction figureToMarkdown() {\n  image.peek = () => '!';\n\n  return {\n    handlers: {\n      image\n    },\n  };\n\n  function image(node, _, context, safeOptions) {\n    const quote = checkQuote(context);\n    const suffix = quote === '\"' ? 'Quote' : 'Apostrophe';\n    const exit = context.enter('image');\n    let subexit = context.enter('label');\n    const tracker = track(safeOptions);\n    let value = tracker.move('![');\n    value += tracker.move(\n      containerPhrasing(node, context, {\n        before: value,\n        after: '](',\n        ...tracker.current()\n      })\n    );\n    value += tracker.move('](');\n\n    subexit();\n\n    if (\n      // If theres no url but there is a title\n      (!node.url && node.title) ||\n      // If there are control characters or whitespace.\n      /[\\0- \\u007F]/.test(node.url)\n    ) {\n      subexit = context.enter('destinationLiteral');\n      value += tracker.move('<');\n      value += tracker.move(\n        safe(context, node.url, {before: value, after: '>', ...tracker.current()})\n      );\n      value += tracker.move('>');\n    } else {\n      // No whitespace, raw is prettier.\n      subexit = context.enter('destinationRaw');\n      value += tracker.move(\n        safe(context, node.url, {\n          before: value,\n          after: node.title ? ' ' : ')',\n          ...tracker.current()\n        })\n      );\n    }\n\n    subexit();\n\n    if (node.title) {\n      subexit = context.enter('title' + suffix);\n      value += tracker.move(' ' + quote);\n      value += tracker.move(\n        safe(context, node.title, {\n          before: value,\n          after: quote,\n          ...tracker.current()\n        })\n      );\n      value += tracker.move(quote);\n      subexit();\n    }\n\n    value += tracker.move(')');\n    exit();\n\n    return value;\n  }\n  \n}\n\n\nexport function remarkFigure() {\n  addRemarkExtension(this, {}, figureFromMarkdown(), figureToMarkdown());\n}\n\n\nexport const remarkToRehypeHandlersFigure = {\n  image(h, node) {\n    // only add attributes to <img> tag, not to <figure>\n    const attrs = (node.data || {}).hProperties || {};\n    if (!node.data) {\n      node.data = {};\n    }\n    node.data.hProperties = {};\n\n    return h(node, 'figure', [\n      h(node, 'img', {src: normalizeUri(node.url), alt: node.alt, ...attrs}),\n      ...(node.children.length > 0 ? [h(node, 'figcaption', all(h, node))] : [])\n    ]);\n  }\n};\n","import { gfmTable } from 'micromark-extension-gfm-table';\nimport { gfmTableFromMarkdown, gfmTableToMarkdown } from 'mdast-util-gfm-table';\nimport { addRemarkExtension } from './helpers';\nimport { visit } from 'unist-util-visit';\nimport { all } from 'remark-rehype';\nimport { containerPhrasing } from 'mdast-util-to-markdown/lib/util/container-phrasing.js'\n\n\nexport function remarkTables() {\n  addRemarkExtension(this, gfmTable, gfmTableFromMarkdown, gfmTableToMarkdown());\n}\n\n\nfunction tableCaptionFromMarkdown() {\n  return {\n    transforms: [transformTableCaption]\n  };\n\n  function transformTableCaption(tree) {\n    visit(tree, (node, index, parent) => {\n      if (node.type === 'table') {\n        const captionBlock = parent.children[index + 1];\n        if (captionBlock && captionBlock.type === 'paragraph' && captionBlock.children.length > 0 && captionBlock.children[0].type === 'text') {\n          const captionText = captionBlock.children[0];\n          let captionPrefixLength = 0;\n          if (captionText.value.startsWith(':')) {\n            captionPrefixLength = 1;\n          } else if (captionText.value.startsWith('Table:')) {\n            captionPrefixLength = 6;\n          }\n\n          \n          if (captionPrefixLength) {\n            const captionVal = captionText.value.slice(captionPrefixLength);\n            const captionValTrimmed = captionVal.trimStart();\n            captionPrefixLength += captionVal.length - captionValTrimmed.length;\n\n            captionText.value = captionText.value.slice(captionPrefixLength);\n            captionText.position.start.column += captionPrefixLength;\n            captionText.position.start.offset += captionPrefixLength;\n\n            // Mark block as table caption, but do not move caption into table (this is done when transforming to rehype)\n            captionBlock.type = 'tableCaption';\n          }\n        }\n      }\n    });\n  }\n}\n\n\nfunction tableCaptionToMarkdown() {\n  return {\n    handlers: {tableCaption},\n  };\n\n  function tableCaption(node, _, context, safeOptions) {\n    const exit = context.enter('tableCaption');\n    const subexit = context.enter('phrasing');\n    const value = 'Table: ' + containerPhrasing(node, context, safeOptions);\n    subexit();\n    exit();\n    return value;\n  }\n}\n\n\nexport function remarkTableCaptions() {\n  addRemarkExtension(this, {}, tableCaptionFromMarkdown(), tableCaptionToMarkdown());\n}\n\n\nexport const remarkToRehypeHandlersTableCaptions = {\n  tableCaption(h, node) {\n    return h(node, 'caption', all(h, node));\n  }\n};\n\nexport function rehypeTableCaptions() {\n  return tree =>\n    visit(tree, 'element', (node, index, parent) => {\n      if (node.tagName === 'caption') {\n        // Move table caption tag into HTML table\n        const tableNode1 = parent.children[index - 1];\n        const tableNode2 = parent.children[index - 2];\n        if (tableNode1 && tableNode1.tagName === 'table') {\n          tableNode1.children.push(node);\n          parent.children.splice(index, 1);\n        } else if (tableNode1 && tableNode1.type === 'text' && tableNode1.value === '\\n' && tableNode2.tagName === 'table') {\n          tableNode2.children.push(node);\n          parent.children.splice(index, 1);\n        }\n      }\n    });\n}","import { micromarkEventsToTree, parseMicromarkEvents } from './micromark-utils.js';\n\n\nfunction createBlockSeparator(pos) {\n  return {\n    type: 'annotatedTextBlockSeparator', \n    text: '', \n    children: [],\n    enter: {\n      type: 'annotatedTextBlockSeparator',\n      start: pos,\n      end: pos,\n    },\n    exit: {\n      type: 'annotatedTextBlockSeparator',\n      start: pos,\n      end: pos,\n    },\n  };\n}\n\nexport function extractLeafNodesFromMicromarkTree(tree, {interpretAsLeafNodes = [], interpretAsLeafNodesFns = {}, wrapTypesWithBlockSeparators = []}) {\n  const leafNodes = [];\n  collectLeafNodes(tree);\n  return leafNodes;\n\n  function collectLeafNodes(t) {\n    for (const n of t) {\n      const wrapWithSeparators = wrapTypesWithBlockSeparators.includes(n.type);\n      if (wrapWithSeparators) {\n        leafNodes.push(createBlockSeparator(n.enter.start));\n      }\n\n      if (n.children.length === 0 || interpretAsLeafNodes.includes(n.type) || interpretAsLeafNodesFns[n.type]?.(n)) {\n        leafNodes.push(n);\n      } else {\n        collectLeafNodes(n.children);\n      }\n\n      if (wrapWithSeparators) {\n        leafNodes.push(createBlockSeparator(n.exit.end));\n      }\n    }\n  } \n}\n\n\n\nfunction micromarkToAnnotatedText(text, events) {\n  const tree = micromarkEventsToTree(text, events);\n  // console.log('micromark tree', tree);\n\n  // Add separators between blocks, such that blocks are always interpreted as separate\n  for (let i = tree.length - 1; i >= 0; i--) {\n    tree.splice(i, 0, createBlockSeparator(tree[i].enter.start));\n  }\n\n  // extract leaf nodes of tree => this is a sequence of all the text tokens\n  const leafNodes = extractLeafNodesFromMicromarkTree(tree, {\n    interpretAsLeafNodes: ['codeFenced', 'codeText', 'textAttributes', 'inlineFootnote', 'table', 'resource', 'templateVariable'],\n    interpretAsLeafNodesFns: {\n      'labelText': n => n.children.length === 0,\n    },\n    wrapTypesWithBlockSeparators: ['image'],\n  });\n\n  // console.log('annotatedText.leafNodes', leafNodes)\n\n  // convert leaf nodes to annotatedText => either text or markup\n  // TODO: support table caption in micromark (instead of mdast)\n  const textTypes = ['data', 'lineEnding', 'lineEndingBlank'];\n  const markupTypesInterpretAs = {\n    'listItemMarker': '\\n\\n',\n    'codeFenced': '\\n\\n',\n    'annotatedTextBlockSeparator': '\\n\\n',\n    'codeText': '`code`',\n    'templateVariable': '`code`',\n    'labelText': '`code`',\n  };\n  const annotatedText = [];\n  for (const n of leafNodes) {\n    if (n.type === 'lineEnding') {\n      // Workaround for micromark bug: the end position of lineEnding elements is wrong (overlaps with next element)\n      annotatedText.push({\n        text: '\\n',\n        offset: n.enter.start.offset,\n      });\n    } else if (textTypes.includes(n.type)) {\n      annotatedText.push({\n        text: n.text,\n        offset: n.enter.start.offset,\n      });\n    } else {\n      annotatedText.push({\n        markup: n.text,\n        offset: n.enter.start.offset,\n        interpretAs: markupTypesInterpretAs[n.type] || '',\n      });\n    }\n  }\n  return annotatedText;\n}\n\n\nexport function annotatedTextParse() {\n  const micromarkExtensions = this.data('micromarkExtensions') || [];\n  this.Parser = parser;\n\n  function parser(text) {\n    const events = parseMicromarkEvents(text, {extensions: micromarkExtensions});\n    return micromarkToAnnotatedText(text, events);\n  }\n}","import { codes } from 'micromark-util-symbol/codes.js';\nimport { addRemarkExtension, assert } from './helpers';\n\n\nfunction templateVariableSyntax() {\n  return {\n    text: {\n      [codes.leftCurlyBrace]: {\n        tokenize: tokenizeTemplateVariable,\n      },\n    }\n  };\n\n  function tokenizeTemplateVariable(effects, ok, nok) {\n    let closeBraceCount = 0;\n    return start;\n\n    function start(code) {\n      assert(code === codes.leftCurlyBrace, 'expected `{`}');\n      effects.enter('templateVariable');\n      effects.consume(code);\n      return start2;\n    }\n    function start2(code) {\n      if (code !== codes.leftCurlyBrace) {\n        return nok(code);\n      }\n      effects.consume(code);\n      return between;\n    }\n    function between(code) {\n      if (code === codes.eof) {\n        return nok(code);\n      } else if (code === codes.rightCurlyBrace) {\n        // Closing sequence or part of content?\n        closeBraceCount = 0;\n        return sequenceClose(code);\n      } else {\n        effects.consume(code);\n        return between;\n      }\n    }\n    function sequenceClose(code) {\n      if (code === codes.rightCurlyBrace) {\n        effects.consume(code);\n        closeBraceCount += 1;\n\n        if (closeBraceCount === 2) {\n          // Dummy close events, rewritten in resolveTemplateVariable\n          effects.exit('templateVariable');\n          return ok(code);\n        } else {\n          return sequenceClose;\n        }\n      } else {\n        return between(code);\n      }\n    }\n  }\n\n}\n\n\nfunction templateVariableFromMarkdown() {\n  return {\n    enter: {\n      templateVariable: enterTemplateVariable,\n    },\n    exit: {\n      templateVariable: exitTemplateVariable,\n    }\n  };\n\n  function enterTemplateVariable(token) {\n    this.enter({type: 'templateVariable', value: ''}, token);\n  }\n  function exitTemplateVariable(token) {\n    const node = this.stack[this.stack.length - 1];\n    node.value = this.sliceSerialize(token); \n    this.exit(token);\n  }\n}\n\nfunction templateVariableToMarkdown() {\n  return {\n    handlers: {\n      templateVariable,\n    } \n  };\n\n  function templateVariable(node, _, context) {\n    const exit = context.enter('templateVariable');\n    const value = node.value;\n    exit();\n    return value;\n  }\n}\n\n\nexport function remarkTemplateVariables() {\n  addRemarkExtension(this, templateVariableSyntax(), templateVariableFromMarkdown(), templateVariableToMarkdown());\n}\n","import { codes } from 'micromark-util-symbol/codes.js';\nimport { addRemarkExtension } from \"./helpers\";\nimport { containerPhrasing } from 'mdast-util-to-markdown/lib/util/container-phrasing.js'\n\n\nfunction todoSyntax() {\n  return {\n    name: 'todo',\n    text: {\n      [codes.uppercaseT]: {\n        tokenize: tokenizeTodo,\n      },\n      [codes.lowercaseT]: {\n        tokenize: tokenizeTodo,\n      },\n    }\n  };\n\n  function tokenizeTodo(effects, ok, nok) {\n    return startT;\n\n    function startT(code) {\n      effects.enter('todo');\n      effects.enter('data');\n      effects.consume(code);\n      return middleO;\n    }\n    function middleO(code) {\n      if (![codes.uppercaseO, codes.lowercaseO].includes(code)) {\n        return nok(code);\n      }\n      effects.consume(code);\n      return middleDorDash;\n    }\n    function middleDorDash(code) {\n      if (code == codes.dash) {\n        effects.consume(code);\n        return middleD;\n      }\n      return middleD(code);\n    }\n    function middleD(code) {\n      if (![codes.uppercaseD, codes.lowercaseD].includes(code)) {\n        return nok(code);\n      }\n      effects.consume(code);\n      return endO;\n    }\n    function endO(code) {\n      if (![codes.uppercaseO, codes.lowercaseO].includes(code)) {\n        return nok(code);\n      }\n      effects.consume(code);\n      effects.exit('data');\n      effects.exit('todo');\n      return ok(code);\n    }\n  }\n}\n\n\nfunction todoFromMarkdown() {\n  return {\n    enter: {\n      todo: enterTodo,\n    },\n    exit: {\n      todo: exitTodo,\n    }\n  };\n\n  function enterTodo(token) {\n    this.enter({type: 'todo', children: [], data: {hName: 'span', hProperties: {class: 'todo'}}}, token);\n  }\n  function exitTodo(token) {\n    this.exit(token);\n  }\n}\n\nfunction todoToMarkdown() {\n  return {\n    handlers: {\n      todo,\n    } \n  };\n\n  function todo(node, _, context, safeOptions) {\n    const exit = context.enter('todo');\n    const value = containerPhrasing(node, context, safeOptions);\n    exit();\n    return value;\n  }\n}\n\n\nexport function remarkTodoMarker() {\n  addRemarkExtension(this, todoSyntax(), todoFromMarkdown(), todoToMarkdown());\n}\n","import { visit } from 'unist-util-visit';\nimport { toString } from 'hast-util-to-string';\nimport { camelCase } from 'lodash';\nimport { lowlight } from 'lowlight/lib/all'\nimport { unified } from 'unified';\nimport rehypeParse from 'rehype-parse';\nimport { addClass } from './rehypePlugins';\n\n\nfunction getLanguage(node) {\n  return (node.properties?.className || [])\n    .filter(c => c.startsWith('language-'))\n    .map(c => c.slice(9).toLowerCase())\n    [0] || 'none';\n}\n\nfunction highlightSyntax(code, node) {\n  const language = getLanguage(node);\n  \n  addClass(node, 'hljs');\n  try {\n    return lowlight.highlight(language, code);\n  } catch (error) {\n    if (!/Unknown language/.test(error)) {\n      throw error;\n    }\n  }\n  return {\n    type: 'root',\n    children: [{type: 'text', value: code}]\n  };\n}\n\nfunction parseMeta(metaLine) {\n  const meta = Object.fromEntries(\n    Array.from(metaLine.matchAll(/(?<name>[a-zA-Z0-9\\-]+)(?:=\"(?<value>[^\"]+)\")?/g))\n      .map(m => [camelCase(m.groups.name), m.groups.value || null])\n  );\n  if (meta.highlightManual !== undefined) {\n    meta.highlightManual = meta.highlightManual || '';\n  }\n  if (meta.lineNumbers !== undefined) {\n    meta.lineNumbers = Number.parseInt(meta.lineNumbers) || 1;\n  }\n  return meta;\n}\n\nfunction parseManualHighlightAreas(code, meta) {\n  const highlightInfos = []\n  if (!meta.highlightManual || meta.highlightManual.length !== 1) {\n      return {code, highlightInfos};\n  }\n\n  const highlightMarkerRe = `\\\\${meta.highlightManual}[^\\\\${meta.highlightManual}\\\\R]*\\\\${meta.highlightManual}`;\n  const highlightedAreaRe = new RegExp(`(${highlightMarkerRe})([^\\\\${meta.highlightManual}]*)(${highlightMarkerRe})`, 'g');\n  const parts = code.split(highlightedAreaRe);\n  let codeNew = '';\n  for (let i = 0; i < parts.length; i += 4) {\n    codeNew += parts[i];\n    if (i + 3 < parts.length) {\n      const highlightInfo = {\n        startMarker: parts[i + 1].slice(1, parts[i + 1].length - 1),\n        startMarkerPos: codeNew.length,\n        endMarker: parts[i + 3].slice(1, parts[i + 3].length - 1),\n        endMarkerPos: 0,\n      };\n      codeNew += parts[i + 2];\n      highlightInfo.endMarkerPos = codeNew.length;\n      highlightInfos.push(highlightInfo);\n    }\n  }\n\n  return {code: codeNew, highlightInfos};\n}\n\n\nfunction splitTreeAtPosition(tree, splitPos) {\n  return {\n    ...tree,\n    children: processChildren(tree.children, 0).flat(),\n  }\n\n  function processChildren(children, currentPos) {\n    const childrenLeft = [];\n    const childrenRight = [];\n\n    for (const c of children) {\n      for (const pc of processNode(c, currentPos)) {\n        if (currentPos < splitPos) {\n          childrenLeft.push(pc);\n        } else {\n          childrenRight.push(pc);\n        }\n        currentPos += toString(pc).length;\n      }\n    }\n    return [childrenLeft, childrenRight];\n  }\n\n  function processNode(node, currentPos) {\n    const nodeLength = toString(node).length;\n    if (currentPos < splitPos && currentPos + nodeLength > splitPos) {\n      if (node.type === 'text') {\n        return [\n          {...node, value: node.value.slice(0, splitPos - currentPos)},\n          {...node, value: node.value.slice(splitPos - currentPos)},\n        ];\n      } else {\n        const [childrenLeft, childrenRight] = processChildren(node.children, currentPos)\n        return [\n          {...node, children: childrenLeft},\n          {...node, children: childrenRight},\n        ];\n      }\n    }\n\n    return [node];\n  }\n}\n\n\nfunction wrapTreeAreas(tree, wrapInfos) {\n  for (const wi of wrapInfos) {\n    // Split highlighted HTML tree at the positions where manual highlight markers will be inserted\n    tree = splitTreeAtPosition(tree, wi.startMarkerPos);\n    tree = splitTreeAtPosition(tree, wi.endMarkerPos);\n  }\n\n  // Insert manual highlighting markers\n  const children = [];\n  for (let ci = 0, wii = 0, currentPos = 0; ci < tree.children.length; currentPos += toString(tree.children[ci]).length, ci++) {\n    const c = tree.children[ci];\n    let wi = wrapInfos[wii];\n\n    if (wi && (currentPos >= wi.startMarkerPos && currentPos + toString(c).length <= wi.endMarkerPos)) {\n      wi.children = (wi.children || []).concat([c]);\n\n      if (currentPos + toString(c).length == wi.endMarkerPos) {\n        visit(wi.markerTree, 'element', (node, index, parent) => {\n          if (node.tagName === 'content-placeholder') {\n            parent.children.splice(index, 1, ...wi.children);\n          }\n        });\n        children.push(...wi.markerTree.children);\n        wii += 1;\n      }\n    } else if (wi && (currentPos === wi.startMarkerPos && currentPos === wi.endMarkerPos)) {\n      visit(wi.markerTree, 'element', (node, index, parent) => {\n        if (node.tagName === 'content-placeholder') {\n          parent.children.splice(index, 1);\n        }\n      });\n      children.push(...wi.markerTree.children);\n      children.push(c);\n      wii += 1;\n    } else {\n      children.push(c);\n    }\n  }\n\n  tree.children = children;\n  return tree;\n}\n\n\nfunction applyManualHighlighting(tree, highlightInfos) {\n  for (const hi of highlightInfos) {\n    // Parse marker as HTML\n    hi.markerTree = unified()\n      .use(rehypeParse, {fragment: true})\n      .parse((hi.startMarker || '<mark>') + '<content-placeholder />' + (hi.endMarker || '</mark>'))\n  }\n\n  return wrapTreeAreas(tree, highlightInfos);\n}\n\n\nfunction splitIntoLines(tree) {\n  const lines = [];\n  let currentPos = 0;\n  for (const line of toString(tree).split('\\n')) {\n    lines.push({\n      startMarkerPos: currentPos,\n      endMarkerPos: currentPos + line.length,\n      markerTree: {\n        type: 'root',\n        children: [\n          {\n            type: 'element',\n            tagName: 'span',\n            properties: {\n              className: ['code-block-line'],\n              dataLineNumber: lines.length + 1\n            },\n            children: [{type: 'element', tagName: 'content-placeholder', children: []}],\n          }\n        ]\n      }\n    });\n    currentPos += line.length + 1;\n  }\n  \n  return wrapTreeAreas(tree, lines);\n}\n\n\nexport function rehypeHighlightCode() {\n  return tree => visit(tree, 'element', (node, index, parent) => {\n    if (node.tagName === 'code' && parent.tagName === 'pre') {\n      addClass(parent, 'code-block');\n\n      const meta = parseMeta(node.data?.meta || '');\n\n      // Manual highlighting\n      const {code, highlightInfos} = parseManualHighlightAreas(toString(node), meta);\n\n      // Syntax highlighting\n      let tree = highlightSyntax(code, node);\n\n      // Add manual highighting\n      if (highlightInfos.length > 0) {\n        tree = applyManualHighlighting(tree, highlightInfos);\n      }\n\n      // Add line infos\n      tree = splitIntoLines(tree);\n\n      node.children = tree.children;\n    } else if (node.tagName === 'code') {\n      addClass(node, 'code-inline');\n    }\n  }); \n}\n","\nimport { unified } from 'unified';\nimport remarkParse from 'remark-parse';\nimport remarkRehype from 'remark-rehype';\nimport rehypeStringify from 'rehype-stringify';\nimport rehypeRaw from 'rehype-raw';\nimport 'highlight.js/styles/default.css';\n\nimport { remarkFootnotes, remarkToRehypeHandlersFootnotes, rehypeFootnoteSeparator, rehypeFootnoteSeparatorPreview } from './mdext/footnotes.js';\nimport { remarkStrikethrough, remarkTaskListItem } from './mdext/gfm.js';\nimport { rehypeConvertAttrsToStyle, rehypeLinkTargetBlank, rehypeRewriteImageSources, rehypeRewriteFileLinks, rehypeTemplates } from './mdext/rehypePlugins.js';\nimport { remarkAttrs, remarkToRehypeAttrs } from './mdext/attrs.js';\nimport { remarkFigure, remarkToRehypeHandlersFigure } from './mdext/image.js';\nimport { remarkTables, remarkTableCaptions, remarkToRehypeHandlersTableCaptions, rehypeTableCaptions } from './mdext/tables.js';\nimport { annotatedTextParse } from './editor/annotatedtext.js';\nimport { remarkTemplateVariables } from './mdext/templates.js';\nimport { remarkTodoMarker } from './mdext/todo.js';\nimport { rehypeHighlightCode } from './mdext/codeHighlight.js';\nimport remarkStringify from 'remark-stringify';\nimport rehypeSanitize, { defaultSchema } from 'rehype-sanitize';\nimport { defaults, merge } from 'lodash';\n\n\nconst rehypeSanitizeSchema = merge({}, defaultSchema, {\n  allowComments: true,\n  clobberPrefix: null,\n  tagNames: ['footnote', 'template'].concat(defaultSchema.tagNames),\n  attributes: {\n    '*': ['className', 'style', 'data*', 'v-if', 'v-for'].concat(defaultSchema.attributes['*']),\n    'a': ['download'].concat(defaultSchema.attributes['a']),\n  }\n});\n\n\nexport function markdownParser() {\n  // TODO: add plugins: \n  // * reference findings: #<finding-id>; current workaround [](#<finding-id>)\n  // * enable autolinks?\n  return unified()\n    .use(remarkFootnotes)\n    .use(remarkTables)\n    .use(remarkTableCaptions)\n    .use(remarkStrikethrough)\n    .use(remarkTaskListItem)\n    .use(remarkTemplateVariables)\n    .use(remarkAttrs)\n    .use(remarkFigure)\n    .use(remarkTodoMarker);\n}\n\n\nexport function formatMarkdown(text) {\n  const md = markdownParser()\n    .use(remarkParse)\n    .use(remarkStringify, {\n      fence: '`',\n      fences: true,\n      bullet: '*',\n      strong: '*',\n      emphasis: '_',\n    });\n  return md.processSync(text).value;\n}\n\nexport function renderMarkdownToHtml(text, {preview = false, rewriteFileSource = null} = {}) {\n  const md = markdownParser()\n      .use(remarkParse)\n      .use(remarkRehype, { \n        allowDangerousHtml: true, \n        footnoteLabelTagName: 'h4',\n        handlers: {\n          ...(preview ? {} : remarkToRehypeHandlersFootnotes),\n          ...remarkToRehypeHandlersFigure,\n          ...remarkToRehypeHandlersTableCaptions,\n          ...remarkToRehypeAttrs,\n        }\n      }) \n      .use(rehypeConvertAttrsToStyle)\n      .use(rehypeTableCaptions)\n      .use(preview ? rehypeFootnoteSeparatorPreview : rehypeFootnoteSeparator)\n      .use(rehypeHighlightCode)\n      .use(rehypeRaw)\n      .use(rehypeLinkTargetBlank)\n      .use(rehypeTemplates)\n      .use(rehypeRewriteImageSources, {rewriteImageSource: rewriteFileSource})\n      .use(rehypeRewriteFileLinks, {rewriteFileUrl: rewriteFileSource})\n      .use(rehypeSanitize, rehypeSanitizeSchema)\n      .use(rehypeStringify);\n\n    // const mdAst = md.parse(text);\n    // console.log('MarkdownAST', mdAst);\n    // const rehypeAst = md.runSync(mdAst);\n    // console.log('RehypeAST', rehypeAst);\n    // const mdHtml = md.stringify(rehypeAst);\n    // console.log('HTML', mdHtml);\n    const mdHtml = md.processSync(text).value;\n    return mdHtml;\n}\n\n\nexport function markdownToAnnotatedText(text) {\n  const md = markdownParser()\n    .use(annotatedTextParse);\n  const at = md.parse(text);\n  // console.log('AnnotatedText', at);\n  return at;\n}\n","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"preview\",domProps:{\"innerHTML\":_vm._s(_vm.renderedMarkdown)}})\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--7-oneOf-1-3!../../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ToolbarButton.vue?vue&type=style&index=0&id=5dedde00&prod&lang=scss&scoped=true&\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"07404f30\", content, true, {\"sourceMap\":false});","import {parse} from 'micromark/lib/parse.js';\nimport {preprocess} from 'micromark/lib/preprocess.js';\nimport {postprocess} from 'micromark/lib/postprocess.js';\nimport {assert} from '../mdext/helpers.js';\n\n\nexport function parseMicromarkEvents(text, config) {\n  return postprocess(parse(config).document().write(preprocess()(text, undefined, true)));\n}\n\nexport function micromarkEventsToTree(text, events) {\n  // console.log('micromark events', events);\n\n  // build enter/exit tree of nested elements\n  const tree = [];\n  const stack = [];\n  for (const [action, node, context] of events) {\n    if (action === 'enter') {\n      const treeNode = {\n        enter: node,\n        exit: null,  \n        children: [],\n\n        type: node.type,\n        text: null,\n      };\n      if (stack.length > 0) {\n        stack[stack.length - 1].children.push(treeNode);\n      } else {\n        tree.push(treeNode);\n      }\n      stack.push(treeNode);\n    } else if (action === 'exit') {\n      const treeNode = stack[stack.length - 1];\n      assert(treeNode.type == node.type);\n\n      treeNode.exit = node;\n      treeNode.text = text.slice(treeNode.enter.start.offset, treeNode.exit.end.offset);\n      stack.splice(stack.length - 1, 1);\n    }\n  }\n  // console.log('micromark tree', tree);\n  return tree;\n}\n","import {EditorSelection} from \"@codemirror/state\"\n\n\nexport function linesInRange(doc, range) {\n  const out = [];\n  const startLine = doc.lineAt(range.from).number;\n  const endLine = doc.lineAt(range.to).number;\n  for (let i = startLine; i <= endLine; i++) {\n    out.push(doc.line(i));\n  }\n  return out;\n}\n\nexport function getChildren(n) {\n  const out = [];\n  for (let c = n.firstChild; c; c = c.nextSibling) {\n    out.push(c);\n  }\n  return out;\n}\n\nexport function intersectsRange(range, node) {\n  return range.to >= node.from && node.to >= range.from;\n}\n\nexport function iterateRange(tree, range, cb) {\n  iterateChildren(tree.topNode);\n\n  function iterateChildren(n) {\n    if (!intersectsRange(range, n)) {\n      return;\n    }\n    cb(n);\n    for (const c of getChildren(n)) {\n      iterateChildren(c);\n    }\n  }\n}\n\nexport function getIntersectionNodes(tree, range, predicate) {\n  const nodes = [];\n  iterateRange(tree, range, n => {\n    if (predicate(n)) {\n      nodes.push(n);\n    }\n  });\n  return nodes;\n}\n\nfunction clamp(val, min, max) {\n  return Math.max(min, Math.min(max, val));\n}\n\n\nexport function moveRangeDelete(moveRange, range, change) {\n  const moveStart = clamp(change.from - range.from, change.from - change.to, 0);\n  const moveEnd = clamp(change.from - range.to, change.from - change.to, 0);\n  return EditorSelection.range(\n    moveRange.from + moveStart,\n    moveRange.to + moveEnd\n  );\n}\n\n\nexport function moveRangeInsert(moveRange, range, change) {\n  return EditorSelection.range(\n    moveRange.from + ((range.from > change.from) ? change.insert.length : 0),\n    moveRange.to + ((range.to > change.from) ? change.insert.length : 0),\n  );\n}","import {EditorSelection} from \"@codemirror/state\"\nimport {syntaxTree} from \"@codemirror/language\"\nimport { markdownLanguage } from \"./language\";\nimport {linesInRange, getChildren, intersectsRange, getIntersectionNodes, moveRangeDelete, moveRangeInsert} from './codemirror-utils';\n\n\nclass Context {\n  constructor(\n    node,\n    from,\n    to,\n    spaceBefore,\n    spaceAfter,\n    type,\n    item\n  ) {\n    this.node = node;\n    this.from = from;\n    this.to = to;\n    this.spaceBefore = spaceBefore;\n    this.spaceAfter = spaceAfter;\n    this.type = type;\n    this.item = item;\n  }\n\n  blank(maxWidth = null, trailing = true) {\n    let result = this.spaceBefore;\n    if (this.node.name === \"blockQuote\") { \n      result += \">\";\n    }\n    if (maxWidth !== null) {\n      while (result.length < maxWidth) {\n        result += \" \";\n      }\n      return result;\n    } else {\n      for (let i = this.to - this.from - result.length - this.spaceAfter.length; i > 0; i--) {\n        result += \" \";\n      }\n      return result + (trailing ? this.spaceAfter : \"\");\n    }\n  }\n\n  marker(doc, add) {\n    let number = this.node.name == \"listOrdered\" ? String((+itemNumber(this.item, doc)[2] + add)) : \"\"\n    return this.spaceBefore + number + this.type + this.spaceAfter\n  }\n}\n\nfunction getContext(selectedNode, doc) {\n  let nodes = []\n  for (let cur = selectedNode; cur && cur.name != \"document\"; cur = cur.parent) {\n    if (cur.name == \"listItem\" || cur.name == \"blockQuote\")\n      nodes.push(cur)\n  }\n  let context = [];\n  for (let i = nodes.length - 1; i >= 0; i--) {\n    let node = nodes[i], match;\n    let line = doc.lineAt(node.from), startPos = node.from - line.from;\n    if (node.name == \"blockQuote\" && (match = /^[ \\t]*>( ?)/.exec(line.text.slice(startPos)))) {\n      context.push(new Context(node, startPos, startPos + match[0].length, \"\", match[1], \">\", null));\n    } else if (node.name == \"listItem\" && node.parent.name == \"listOrdered\" &&\n               (match = /^([ \\t]*)\\d+([.)])([ \\t]*)/.exec(line.text.slice(startPos)))) {\n      let after = match[3], len = match[0].length\n      if (after.length >= 4) { after = after.slice(0, after.length - 4); len -= 4 }\n      context.push(new Context(node.parent, startPos, startPos + len, match[1], after, match[2], node));\n    } else if (node.name == \"listItem\" && node.parent.name == \"listUnordered\" &&\n               (match = /^([ \\t]*)([-+*])([ \\t]{1,4}\\[[ xX]\\])?([ \\t]+)/.exec(line.text.slice(startPos)))) {\n      let after = match[4], len = match[0].length\n      if (after.length > 4) { after = after.slice(0, after.length - 4); len -= 4 }\n      let type = match[2]\n      if (match[3]) type += match[3].replace(/[xX]/, ' ')\n      context.push(new Context(node.parent, startPos, startPos + len, match[1], after, type, node));\n    }\n  }\n  return context\n}\n\nfunction itemNumber(item, doc) {\n  return /^(\\s*)(\\d+)(?=[.)])/.exec(doc.sliceString(item.from, item.from + 10))\n}\n\nfunction renumberList(after, doc, changes, offset = 0) {\n  for (let prev = -1, node = after;;) {\n    if (node.name == \"listItem\") {\n      let m = itemNumber(node, doc)\n      let number = +m[2]\n      if (prev >= 0) {\n        if (number != prev + 1) return\n        changes.push({from: node.from + m[1].length, to: node.from + m[0].length, insert: String(prev + 2 + offset)})\n      }\n      prev = number\n    }\n    let next = node.nextSibling\n    if (!next) break\n    node = next\n  }\n}\n\n/// This command, when invoked in Markdown context with cursor\n/// selection(s), will create a new line with the markup for\n/// blockquotes and lists that were active on the old line. If the\n/// cursor was directly after the end of the markup for the old line,\n/// trailing whitespace and list markers are removed from that line.\n///\n/// The command does nothing in non-Markdown context, so it should\n/// not be used as the only binding for Enter (even in a Markdown\n/// document, HTML and code regions might use a different language).\nexport const insertNewlineContinueMarkup = ({state, dispatch}) => {\n  let tree = syntaxTree(state), {doc} = state\n  let dont = null, changes = state.changeByRange(range => {\n    if (!range.empty || !markdownLanguage.isActiveAt(state, range.from)) return dont = {range}\n    let pos = range.from, line = doc.lineAt(pos)\n    let context = getContext(tree.resolveInner(pos, -1), doc)\n    while (context.length && context[context.length - 1].from > pos - line.from) context.pop()\n    if (!context.length) return dont = {range}\n    let inner = context[context.length - 1]\n    if (inner.to - inner.spaceAfter.length > pos - line.from) return dont = {range}\n\n    let emptyLine = pos >= (inner.to - inner.spaceAfter.length) && !/\\S/.test(line.text.slice(inner.to))\n    // Empty line in list\n    if (inner.item && emptyLine) {\n      let next = context.length > 1 ? context[context.length - 2] : null\n      let delTo, insert = \"\"\n      if (next && next.item) { // Re-add marker for the list at the next level\n        delTo = line.from + next.from\n        insert = next.marker(doc, 1)\n      } else {\n        delTo = line.from + (next ? next.to : 0)\n      }\n      let changes = [{from: delTo, to: pos, insert}]\n      if (inner.node.name == \"listOrdered\") {\n        renumberList(inner.item, doc, changes, -2);\n      }\n      if (next && next.node.name == \"listOrdered\") {\n        renumberList(next.item, doc, changes);\n      }\n      return {range: EditorSelection.cursor(delTo + insert.length), changes}\n    }\n\n    if (inner.node.name == \"blockQuote\" && emptyLine && line.from) {\n      let prevLine = doc.lineAt(line.from - 1), quoted = />\\s*$/.exec(prevLine.text)\n      // Two aligned empty quoted lines in a row\n      if (quoted && quoted.index == inner.from) {\n        let changes = state.changes([{from: prevLine.from + quoted.index, to: prevLine.to},\n                                     {from: line.from + inner.from, to: line.to}])\n        return {range: range.map(changes), changes}\n      }\n    }\n\n    let changes = []\n    if (inner.node.name == \"listOrdered\") {\n      renumberList(inner.item, doc, changes);\n    }\n    let continued = inner.item && inner.item.from < line.from;\n    let insert = \"\";\n    // If not dedented\n    if (!continued || /^[\\s\\d.)\\-+*>]*/.exec(line.text)[0].length >= inner.to) {\n      for (let i = 0, e = context.length - 1; i <= e; i++) {\n        insert += i == e && !continued ? context[i].marker(doc, 1)\n          : context[i].blank(i < e ? context[i + 1].from - insert.length : null);\n      }\n    }\n    let from = pos;\n    while (from > line.from && /\\s/.test(line.text.charAt(from - line.from - 1))) { \n      from--; \n    }\n    insert = state.lineBreak + insert;\n    changes.push({from, to: pos, insert});\n    return {range: EditorSelection.cursor(from + insert.length), changes};\n  })\n  if (dont) return false\n  dispatch(state.update(changes, {scrollIntoView: true, userEvent: \"input\"}))\n  return true\n}\n\n\n\nfunction isMark(node) {\n  return node.name == \"blockQuotePrefix\" || node.name == \"listItemPrefix\"\n}\n\nfunction contextNodeForDelete(tree, pos) {\n  let node = tree.resolveInner(pos, -1), scan = pos\n  if (isMark(node)) {\n    scan = node.from\n    node = node.parent\n  }\n  for (let prev; prev = node.childBefore(scan);) {\n    if (isMark(prev)) {\n      scan = prev.from\n    } else if (prev.name == \"listOrdered\" || prev.name == \"listUnordered\") {\n      node = prev.lastChild\n      scan = node.to\n    } else {\n      break\n    }\n  }\n  return node;\n}\n\n\n/// This command will, when invoked in a Markdown context with the\n/// cursor directly after list or blockquote markup, delete one level\n/// of markup. When the markup is for a list, it will be replaced by\n/// spaces on the first invocation (a further invocation will delete\n/// the spaces), to make it easy to continue a list.\n///\n/// When not after Markdown block markup, this command will return\n/// false, so it is intended to be bound alongside other deletion\n/// commands, with a higher precedence than the more generic commands.\nexport const deleteMarkupBackward = ({state, dispatch}) => {\n  let tree = syntaxTree(state)\n  let dont = null, changes = state.changeByRange(range => {\n    let pos = range.from, {doc} = state\n    if (range.empty && markdownLanguage.isActiveAt(state, range.from)) {\n      let line = doc.lineAt(pos)\n      let context = getContext(contextNodeForDelete(tree, pos), doc)\n      if (context.length) {\n        let inner = context[context.length - 1]\n        let spaceEnd = inner.to - inner.spaceAfter.length + (inner.spaceAfter ? 1 : 0)\n        // Delete extra trailing space after markup\n        if (pos - line.from > spaceEnd && !/\\S/.test(line.text.slice(spaceEnd, pos - line.from)))\n          return {range: EditorSelection.cursor(line.from + spaceEnd),\n                  changes: {from: line.from + spaceEnd, to: pos}}\n        if (pos - line.from == spaceEnd &&\n            // Only apply this if we're on the line that has the\n            // construct's syntax, or there's only indentation in the\n            // target range\n            (!inner.item || line.from <= inner.item.from || !/\\S/.test(line.text.slice(0, inner.to)))) {\n          let start = line.from + inner.from\n          // Replace a list item marker with blank space\n          if (inner.item && inner.node.from < inner.item.from && /\\S/.test(line.text.slice(inner.from, inner.to))) {\n            return {range, changes: {from: start, to: line.from + inner.to, insert: inner.blank(inner.to - inner.from)}};\n          }\n          // Delete one level of indentation\n          if (start < pos) {\n            return {range: EditorSelection.cursor(start), changes: {from: start, to: pos}};\n          }\n        }\n      }\n    }\n    return dont = {range}\n  })\n  if (dont) return false\n  dispatch(state.update(changes, {scrollIntoView: true, userEvent: \"delete\"}))\n  return true\n}\n\n\nexport function isTypeInSelection(state, type) {\n  let tree = syntaxTree(state);\n  return state.selection.ranges.some(range => getIntersectionNodes(tree, range, n => n.name === type).length > 0);\n}\n\n\nfunction toggleMarkdownAction({state, dispatch}, { isInSelection, enable, disable }) {\n  const tree = syntaxTree(state);\n\n  const changes = state.changeByRange(range => {\n    if (!markdownLanguage.isActiveAt(state, range.from)) {\n      return {range};\n    }\n\n    const foundNodes = getIntersectionNodes(tree, range, isInSelection);\n    if (foundNodes.length > 0) {\n      if (disable) {\n        return disable(range, foundNodes);\n      } else {\n        return {range};\n      }\n    } else {\n      if (enable) {\n        return enable(range, tree);\n      } else {\n        return {range};\n      }\n    }\n  });\n\n  dispatch(state.update(changes, {scrollIntoView: true, userEvent: 'input'}));\n  return true;\n}\n\n\nfunction toggleMarkerType({state, dispatch}, { type, markerTypes = [], startMarker = null, endMarker = null}) {\n  return toggleMarkdownAction({state, dispatch}, {\n    isInSelection: n => {\n      return n.name === type || (n.name === 'data' && state.doc.sliceString(n.from, n.to) === startMarker + endMarker)\n    },\n    enable: (range) => {\n      if (range.empty) {\n        const insertText = 'text';\n        return {\n          range: EditorSelection.range(range.from + startMarker.length, range.to + startMarker.length + insertText.length),\n          changes: [{from: range.from, insert: startMarker + insertText + endMarker}],\n        };\n      } else {\n        // insert bold markers at start and end of selection\n        return {\n          range: EditorSelection.range(range.from + startMarker.length, range.to + startMarker.length),\n          changes: [\n            {from: range.from, insert: startMarker},\n            {from: range.to, insert: endMarker},\n        ]};\n      }\n    },\n    disable: (range, foundNodes) => {\n      // remove bold markers of all intersecting bold nodes\n      const removeMarkers = foundNodes\n        .flatMap(n => getChildren(n).concat(n))\n        .filter(c => markerTypes.includes(c.name) || (c.name === 'data' && state.doc.sliceString(c.from, c.to) === startMarker + endMarker));\n      let newRange = range;\n      const changes = [];\n      for (const cn of removeMarkers) {\n        const change = {from: cn.from, to: cn.to};\n        newRange = moveRangeDelete(newRange, range, change)\n        changes.push(change);\n      }\n      return { range: newRange, changes };\n    }\n  });\n}\n\nexport function toggleStrong({state, dispatch}) {\n  return toggleMarkerType({state, dispatch}, {\n    type: 'strong',\n    markerTypes: ['strongSequence'],\n    startMarker: '**',\n    endMarker: '**'\n  });\n}\n\nexport function toggleEmphasis({state, dispatch}) {\n  return toggleMarkerType({state, dispatch}, {\n    type: 'emphasis',\n    markerTypes: ['emphasisSequence'],\n    startMarker: '_',\n    endMarker: '_',\n  });\n}\n\nexport function toggleStrikethrough({state, dispatch}) {\n  return toggleMarkerType({state, dispatch}, {\n    type: 'strikethrough',\n    markerTypes: ['strikethroughSequence'],\n    startMarker: '~~',\n    endMarker: '~~'\n  });\n}\n\nexport function toggleListUnordered({state, dispatch}) {\n  return toggleMarkdownAction({state, dispatch}, {\n    isInSelection: n => n.name === 'listUnordered',\n    enable: (range, tree) => {\n      // Add marker to start of each line\n      // If line is a listItem of an listOrdered: replace the marker\n      const changes = [];\n      let newRange = range;\n      for (const line of linesInRange(state.doc, range)) {\n        const listItemNumber = getIntersectionNodes(tree, line, n => n.name === 'listItem' && n.parent.name === 'listOrdered')\n          .flatMap(n => getChildren(n))\n          .filter(n => n.name === 'listItemPrefix')\n          .find(n => intersectsRange(line, n));\n        \n        if (listItemNumber) {\n          const change = {from: listItemNumber.from, to: listItemNumber.to, insert: '* '};\n          newRange = moveRangeInsert(moveRangeDelete(newRange, range, change), range, change);\n          changes.push(change);\n        } else {\n          const change = {from: line.from, insert: '* '};\n          newRange = moveRangeInsert(newRange, range, change);\n          changes.push(change);\n        }\n      }\n      return {\n        range: newRange,\n        changes,\n      };\n    },\n    disable: (range, foundNodes) => {\n      const removeMarkers = foundNodes\n        .flatMap(n => getChildren(n))  // Get all listItems\n        .filter(i => intersectsRange(range, i))  // Get selected listItems\n        .flatMap(n => getChildren(n))\n        .filter(n => n.name === 'listItemPrefix');\n      let newRange = range;\n      const changes = [];\n      for (const cn of removeMarkers) {\n        const change = {from: cn.from, to: cn.to};\n        newRange = moveRangeDelete(newRange, range, change)\n        changes.push(change);\n      }\n      return { range: newRange, changes };\n    }\n  });\n}\n\nexport function toggleListOrdered({state, dispatch}) {\n  return toggleMarkdownAction({state, dispatch}, {\n    isInSelection: n => n.name === 'listOrdered',\n    enable: (range, tree) => {\n      // Add marker to start of each line\n      // If line is a listItem of an listUnordered: replace the marker\n      const changes = [];\n      let newRange = range;\n      let itemNumber = 0;\n      for (const line of linesInRange(state.doc, range)) {\n        itemNumber += 1;\n        const listItemNumber =  itemNumber + '. ';\n\n        const listItemBullet = getIntersectionNodes(tree, line, n => n.name === 'listItem' && n.parent.name === 'listUnordered')\n          .flatMap(n => getChildren(n))\n          .filter(n => n.name === 'listItemPrefix')\n          .find(n => intersectsRange(line, n));\n        \n        if (listItemBullet) {\n          const change = {from: listItemBullet.from, to: listItemBullet.to, insert: listItemNumber};\n          newRange = moveRangeInsert(moveRangeDelete(newRange, range, change), range, change);\n          changes.push(change);\n        } else {\n          const change = {from: line.from, insert: listItemNumber};\n          newRange = moveRangeInsert(newRange, range, change);\n          changes.push(change);\n        }\n      }\n      return {\n        range: newRange,\n        changes,\n      };\n    },\n    disable: (range, foundNodes) => {\n      const removeMarkers = foundNodes\n        .flatMap(n => getChildren(n))  // Get all listItems\n        .filter(i => intersectsRange(range, i))  // Get selected listItems\n        .flatMap(n => getChildren(n))\n        .filter(n => n.name === 'listItemPrefix');\n      let newRange = range;\n      const changes = [];\n      for (const cn of removeMarkers) {\n        const change = {from: cn.from, to: cn.to};\n        newRange = moveRangeDelete(newRange, range, change)\n        changes.push(change);\n      }\n      return { range: newRange, changes };\n    }\n  });\n}\n\n\nexport function toggleLink({state, dispatch}) {\n  return toggleMarkdownAction({state, dispatch}, {\n    isInSelection: n => n.name === 'link',\n    enable: (range) => {\n      return {\n        range: EditorSelection.range(range.from + 1, range.to + 1),\n        changes: [\n          {from: range.from, insert: '['},\n          {from: range.to, insert: '](' + (range.from === range.to ? 'https://' : state.doc.sliceString(range.from, range.to)) + ')'},\n        ]\n      };\n    },\n    disable: (range, foundNodes) => {\n      // Remove links only when a range is inside the link label\n      const linksToRemove = foundNodes\n        .filter(n => \n          getChildren(n)\n          .flatMap(c => getChildren(c))\n          .filter(c => c.name === 'labelText' && c.parent.name === 'label' && range.from >= c.from && range.to <= c.to)\n          .length === 1)\n        .flatMap(n => getChildren(n).flatMap(c => getChildren(c)))\n        .filter(c => !(c.name === 'labelText' && c.parent.name === 'label'));\n      const changes = [];\n      let newRange = range;\n      for (const n of linksToRemove) {\n        const change = {from: n.from, to: n.to};\n        newRange = moveRangeDelete(newRange, range, change);\n        changes.push(change);\n      }\n      return {\n        range: newRange,\n        changes,\n      };\n    }\n  });\n}\n\nexport function insertCodeBlock({state, dispatch}) {\n  return toggleMarkdownAction({state, dispatch}, {\n    isInSelection: n => n.name === 'codeFenced',\n    enable: (range) => {\n      // insert \"```\\n\" at the start of the first selected line and \"\\n```\" at the end of the last selected line\n      const codeBlockStart = state.lineBreak + '```' + state.lineBreak;\n      const codeBlockEnd = state.lineBreak + '```';\n      return {\n        range: EditorSelection.range(range.from + codeBlockStart.length, range.to + codeBlockStart.length),\n        changes: [\n          {from: state.doc.lineAt(range.from).from, insert: codeBlockStart},\n          {from: state.doc.lineAt(range.to).to, insert: codeBlockEnd},\n        ],\n      };\n    },\n  })\n}\n\nexport function insertTable({state, dispatch}) {\n  return toggleMarkdownAction({state, dispatch}, {\n    isInSelection: n => n.name === 'table',\n    enable: (range) => {\n      return {\n        range,\n        changes: [{\n          from: state.doc.lineAt(range.to).to, \n          insert: state.lineBreak +\n                  '| Column1 | Column2 | Column3 |' + state.lineBreak +\n                  '| ------- | ------- | ------- |' + state.lineBreak +\n                  '| Text    | Text    | Text    |' + state.lineBreak + \n                  state.lineBreak,\n        }],\n      };\n    }\n  });\n}\n\n","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--7-oneOf-1-3!../../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Toolbar.vue?vue&type=style&index=0&id=1f0d8b7b&prod&lang=scss&scoped=true&\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"7a5abe77\", content, true, {\"sourceMap\":false});","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--7-oneOf-1-3!../../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Preview.vue?vue&type=style&index=0&id=67a31026&prod&lang=scss&scoped=true&\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"a3fed0a2\", content, true, {\"sourceMap\":false});","import { micromarkEventsToTree, parseMicromarkEvents } from \"./micromark-utils\";\nimport { LanguageSupport, Language, defineLanguageFacet, languageDataProp, indentNodeProp } from '@codemirror/language';\nimport {html} from \"@codemirror/lang-html\"\nimport {Prec} from \"@codemirror/state\";\nimport { keymap } from '@codemirror/view';\nimport { Parser, Tree, NodeSet, NodeType, parseMixed } from '@lezer/common';\nimport {styleTags, tags as t} from \"@lezer/highlight\"\nimport { markdownParser } from \"..\";\nimport { tags } from \"./highlight\";\nimport { insertNewlineContinueMarkup, deleteMarkupBackward, toggleStrong, toggleEmphasis } from \"./commands\";\n\nconst markdownLanguageFacet = defineLanguageFacet({block: {open: '<!--', close: '-->'}});\n\nconst markdownHighlighting = styleTags({\n  \"strong/...\": t.strong,\n  \"emphasis/...\": t.emphasis,\n  \"strikethrough/...\": t.strikethrough,\n  \"codeText/...\": tags.inlinecode,\n  \"codeFenced/...\": tags.codeblock,\n  \"table/...\": tags.table,\n  \"blockQuote/...\": t.quote,\n  \"heading1/...\": t.heading1,\n  \"heading2/...\": t.heading2,\n  \"heading3/...\": t.heading3,\n  \"heading4/...\": t.heading4,\n  \"heading5/...\": t.heading5,\n  \"heading6/...\": t.heading6,\n  \"link/...\": t.link,\n  \"image/...\": t.link,\n  \"textAttributes/...\": t.link,\n  \"resource/...\": t.url,\n  \"inlineFootnote/...\": tags.footnote, \n  \"templateVariable\": tags.inlinecode,\n  \"todo/...\": tags.todo,\n});\nconst nodeTypes = [\n  'strong', 'strongSequence', 'emphasis', 'emphasisSequence', 'strikethrough', 'strikethroughSequence', \n  'codeText', 'codeFenced', 'table', 'blockQuote',\n  'heading1', 'heading2', 'heading3', 'heading4', 'heading5', 'heading6',\n  'link', 'image', 'resource', 'label', 'labelMarker', 'labelText',\n  'inlineFootnote', 'textAttributes', 'templateVariable', 'todo',\n  'htmlText', 'htmlFlow',\n  'data', 'paragraph', 'content', 'document', 'lineEnding',\n  'listOrdered', 'listUnordered', 'listItem', 'listItemPrefix', 'blockQuotePrefix', 'listItemMarker', \n];\nconst nodeSet = new NodeSet([NodeType.none].concat(nodeTypes.map((type, idx) => NodeType.define({id: idx + 1, name: type}))))\n  .extend(markdownHighlighting)\n  .extend(languageDataProp.add({ document: markdownLanguageFacet }))\n  .extend(indentNodeProp.add({ document: () => null }));\n\n\nfunction modifySyntaxTree(tree) {\n  visitTree(tree);\n  return tree;\n\n  function visitTree(t) {\n    for (const n of t) {\n      visitNode(n);\n      if ((n.children?.length || 0) > 0) {\n        visitTree(n.children);\n      }\n    }\n  }\n  function visitNode(n) {\n    // Add ListItem nodes\n    if (['listOrdered', 'listUnordered'].includes(n.type)) {\n      let listItems = [];\n      let currentListItem = [];\n      for (const c of n.children) {\n        if (c.type === 'listItemPrefix') {\n          addListItem();\n        }\n        currentListItem.push(c);\n      }\n      addListItem();\n\n      function addListItem() {\n        if (currentListItem.length > 0) {      \n          const info = {\n            type: 'listItem',\n            start: currentListItem[0].enter.start,\n            end: currentListItem.slice(-1)[0].exit.end,\n          };\n\n          listItems.push({\n            type: 'listItem', \n            enter: info,\n            exit: info,\n            children: currentListItem,\n          });\n          currentListItem = [];\n        }\n      }\n\n      if (listItems.length > 0) {\n        n.children = listItems;\n      }\n    }\n  }\n}\n\nfunction micromarkToLezerSyntaxTree(text, events) {\n  const tree = modifySyntaxTree(micromarkEventsToTree(text, events));\n  // console.log('markdown syntax tree', tree);\n  \n  function toBuffer(node) {\n    const buffer = [];\n    for (const c of node.children || []) {\n      buffer.push(...toBuffer(c));\n    }\n    let nodeId = nodeSet.types.find(t => t.name === node.enter.type);\n    if (node.type === 'atxHeading' && node.children.length >= 1 && node.children[0].type === 'atxHeadingSequence') {\n      nodeId = nodeSet.types.find(t => t.name === 'heading' + node.children[0].text.length || 0);\n    }\n    \n    buffer.push((nodeId || NodeType.none).id, node.enter.start.offset, node.enter.end.offset, 4 + buffer.length);\n    return buffer;\n  }\n\n  return Tree.build({\n    buffer: tree.length > 0 ? toBuffer({children: tree, enter: {type: 'document', start: tree[0].enter.start, end: tree.slice(-1)[0].enter.end}}) : [],\n    nodeSet: nodeSet,\n    topID: nodeSet.types.find(t => t.name === 'document').id,\n  });\n}\n\n\nexport function lezerSyntaxTreeParse() {\n  const micromarkExtensions = this.data('micromarkExtensions') || [];\n  this.Parser = parser;\n\n  function parser(text) {\n    const events = parseMicromarkEvents(text, {extensions: micromarkExtensions});\n    return micromarkToLezerSyntaxTree(text, events);\n  }\n}\n\n\nclass BlockContext {\n  constructor(parser, input, fragments, ranges) {\n    this.parser = parser;\n    this.input = input;\n    this.fragments = fragments;\n    this.ranges = ranges;\n    this.stoppedAt = null;\n  }\n  \n  advance() {\n    // TODO: support incremental parsing: only parse current (and sourrounding?) blocks to increase performance\n    // test performance:\n    // * ~1ms: very short text\n    // * 10-20ms: longer md document with many costructs\n    // * 10-20ms: long text, no markup\n    // * ~30-100ms: https://raw.githubusercontent.com/toptensoftware/markdowndeep/master/Backup/MarkdownDeepBenchmark/benchmark/markdown-example-long-2.text\n    return markdownParser()\n    .use(lezerSyntaxTreeParse)\n    .parse(this.input.read(0, this.input.length));\n  }\n\n  get parsedPos() {\n    return this.input.length;\n  }\n\n  stopAt(pos) {\n    this.stoppedAt = pos;\n  }\n\n}\n\n\nclass MarkdownParser extends Parser {\n  createParse(input, fragments, ranges) {\n    const mdParser = new BlockContext(this, input, fragments, ranges);\n    return parseMixed((node, input) => {\n      if (['htmlText', 'htmlFlow'].includes(node.name)) {\n        return {parser: htmlLanguage.language.parser, overlay: [{from: node.from, to: node.to}]}\n      }\n      return null;\n    })(mdParser, input, fragments, ranges);\n  }\n}\n\nconst htmlLanguage = html({matchClosingTags: false});\n\nexport const markdownLanguage = new Language(\n  markdownLanguageFacet, \n  new MarkdownParser()\n);\n\nexport function markdown() {\n  return new LanguageSupport(markdownLanguage, [\n    Prec.high(keymap.of([\n      {key: 'Enter', run: insertNewlineContinueMarkup},\n      {key: 'Backspace', run: deleteMarkupBackward},\n    ])),\n    keymap.of([\n      {key: 'Mod-b', run: toggleStrong},\n      {key: 'Mod-i', run: toggleEmphasis},\n    ])\n  ]);\n}\n","import { syntaxTree } from \"@codemirror/language\";\nimport { RangeSetBuilder } from \"@codemirror/state\";\nimport { Decoration, ViewPlugin } from \"@codemirror/view\";\nimport { tags as t, Tag, tagHighlighter } from \"@lezer/highlight\";\nimport { linesInRange } from \"./codemirror-utils\";\n\nexport const tags = {\n  codeblock: Tag.define(),\n  inlinecode: Tag.define(),\n  footnote: Tag.define(),\n  table: Tag.define(),\n  todo: Tag.define(),\n};\n\n      \nexport const markdownHighlightStyle = tagHighlighter([\n  {tag: t.heading1, class: 'tok-h1'},\n  {tag: t.heading2, class: 'tok-h2'},\n  {tag: t.heading3, class: 'tok-h3'},\n  {tag: t.heading4, class: 'tok-h4'},\n  {tag: t.heading5, class: 'tok-h5'},\n  {tag: t.heading6, class: 'tok-h6'},\n  {tag: t.strong, class: 'tok-strong'},\n  {tag: t.emphasis, class: 'tok-emphasis'},\n  {tag: t.strikethrough, class: 'tok-strikethrough'},\n  {tag: t.link, class: 'tok-link'},\n  {tag: t.url, class: 'tok-url'},\n  {tag: t.quote, class: 'tok-quote'},\n\n  {tag: tags.inlinecode, class: 'tok-inlinecode'},\n  {tag: tags.table, class: 'tok-table'},\n  {tag: tags.footnote, class: 'tok-footnote'},\n  {tag: tags.todo, class: 'tok-todo'},\n\n  {tag: t.tagName, class: 'tok-tagname'},\n  {tag: t.angleBracket, class: 'tok-anglebracket'},\n  {tag: t.attributeName, class: 'tok-attributename'},\n  {tag: t.attributeValue, class: 'tok-attributevalue'},\n  {tag: t.comment, class: 'tok-comment'},\n]);\n\n\n// https://discuss.codemirror.net/t/how-to-define-highlighting-styles-for-blocks/4029\nexport const markdownHighlightCodeBlocks = ViewPlugin.fromClass(class {\n  decorations = Decoration.none;\n\n  constructor(view) {\n    this.updateDecorations(view);\n  }\n\n  update(update) {\n    this.updateDecorations(update.view);\n  }\n\n  updateDecorations(view) {\n    let builder = new RangeSetBuilder();\n    syntaxTree(view.state).iterate({\n      enter: (n) => {\n        if (n.name === 'codeFenced') {\n          for (const l of linesInRange(view.state.doc, n)) {\n            builder.add(l.from, l.from, Decoration.line({class: 'tok-codeblock'}));\n          }    \n        }\n      }\n    })\n    this.decorations = builder.finish();\n  }\n}, {decorations: v => v.decorations});","import { Compartment, StateEffect } from '@codemirror/state';\n\nexport function createEditorCompartment(view) {\n  const compartment = new Compartment();\n  const run = (extension) => {\n    compartment.get(view.state)\n      ? view.dispatch({ effects: compartment.reconfigure(extension) }) // reconfigure\n      : view.dispatch({ effects: StateEffect.appendConfig.of(compartment.of(extension)) }) // inject\n  }\n  return { compartment, run }\n}\n\nexport function createEditorExtensionToggler(view, extension) {\n  const { compartment, run } = createEditorCompartment(view)\n  return (targetApply) => {\n    const exExtension = compartment.get(view.state)\n    const apply = targetApply ?? exExtension !== extension\n    run(apply ? extension : [])\n  }\n}\n","import { markdownToAnnotatedText } from \"..\";\nimport { linter, setDiagnostics, forEachDiagnostic } from \"@codemirror/lint\";\nimport elt from \"crelt\";\nimport { EditorView } from \"@codemirror/view\";\n\n\nconst MAX_REPLACEMENTS = 5;\nconst SPELLING_RULE_IDS = [\n  \"SPELLER_RULE\",\n  \"MORFOLOGIK_RULE\",\n  \"HUNSPELL\",\n  \"SPELLING_RULE\"\n];\nconst STYLE_ISSUE_TYPES = [\n  \"style\",\n  \"locale-violation\",\n  \"register\"\n];\n\n\nexport function spellcheck({ performSpellcheckRequest, performSpellcheckAddWordRequest }) {\n  return linter(async (view) => {\n    const annotatedText = markdownToAnnotatedText(view.state.doc.toString());\n    if (annotatedText.length === 0) {\n      return [];\n    }\n\n    const spellcheckResults = await performSpellcheckRequest({\n      data: {annotation: annotatedText},\n    });\n    \n    return spellcheckResults.matches.map(m => {\n      const severity = SPELLING_RULE_IDS.some(r => m.rule.id.includes(r)) ? 'error' :\n                       STYLE_ISSUE_TYPES.some(r => m.rule.id.includes(r)) ? 'info' : \n                       'warning';\n      const from = m.offset;\n      const to = Math.min(m.offset + m.length, view.state.doc.length);\n      return {\n        from,\n        to,\n        severity: severity,\n        renderMessage() {\n          return elt('div', {class: 'cm-spellcheck-content'},\n            elt('div', {class: 'cm-spellcheck-title cm-spellcheck-title-' + severity}, m.rule.category.name),\n            elt('div', {class: 'cm-spellcheck-message'}, \n              m.message,\n              m.rule.urls?.length > 0 ? elt('a', {href: m.rule.urls[0].value, target: '_blank', rel: 'noreferrer noopener', class: 'cm-spellcheck-details'}) : null,\n            ),\n          );\n        },\n        actions: m.replacements.slice(0, MAX_REPLACEMENTS).map(r => ({\n          name: r.value,\n          apply(view, from, to) {\n            view.dispatch({changes: {from, to, insert: r.value}});\n          }\n        })).concat((performSpellcheckAddWordRequest && severity === 'error') ? [{\n          name: `Add \"${view.state.doc.sliceString(from, to)}\" to dictionary`,\n          async apply(view, from, to) {\n            const word = view.state.doc.sliceString(from, to);\n            await performSpellcheckAddWordRequest({ word });\n            \n            // remove spellcheck errors for word\n            const diagnostics = []\n            forEachDiagnostic(view.state, (d, from, to) => {\n              if (!(d.severity === 'error' && view.state.doc.sliceString(from, to) == word)) {\n                diagnostics.push(d);\n              }\n            });\n            view.dispatch(setDiagnostics(view.state, diagnostics));\n          }\n        }] : []),\n      };\n    });\n  }, {delay: 750});\n}\n\n\nfunction svg(content, attrs = `viewBox=\"0 0 40 40\"`) {\n  return `url('data:image/svg+xml,<svg xmlns=\"http://www.w3.org/2000/svg\" ${attrs}>${encodeURIComponent(content)}</svg>')`\n}\n\nfunction underline(color) {\n  return svg(`<path d=\"m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0\" stroke=\"${color}\" fill=\"none\" stroke-width=\".7\"/>`,\n             `width=\"6\" height=\"3\"`)\n}\n\nexport const spellcheckTheme = EditorView.theme({\n  '.cm-diagnostic': {\n    listStyle: 'none',\n    fontSize: '10pt',\n    maxWidth: '400px',\n    backgroundColor: 'white',\n    paddingBottom: '0.5em',\n  },\n  '.cm-diagnosticText': {\n    display: 'block',\n    marginBottom: '0.5em',\n  },\n  '.cm-diagnosticAction': {\n    backgroundColor: '#45a8fc',\n    color: 'white',\n    marginLeft: '0',\n    marginRight: '8px',\n    '&:hover': {\n      backgroundColor: '#1976d2'\n    },\n  },\n  [`.cm-diagnosticAction[aria-label*=\"Add \"][aria-label*=\" to dictionary\"]`]: {\n    display: 'block',\n    backgroundColor: 'inherit',\n    color: 'gray',\n    width: '100%',\n    textAlign: 'center',\n    marginTop: '0.5em',\n    '&:hover': {\n      backgroundColor: 'rgba(0, 0, 0, 0.05)',\n    },\n  },\n  '.cm-spellcheck-details': {\n    opacity: '0.7',\n    background: 'transparent url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTEwIDRhNiA2IDAgMTAwIDEyIDYgNiAwIDAwMC0xMnptMC0xYTcgNyAwIDExMCAxNCA3IDcgMCAwMTAtMTR6bS0uNSA2aDFhLjUuNSAwIDExMCAxdjNhLjUuNSAwIDExMCAxaC0xYS41LjUgMCAxMTAtMXYtM2EuNS41IDAgMDEwLTF6bS41LTFhMSAxIDAgMTEwLTIgMSAxIDAgMDEwIDJ6IiBmaWxsPSIjM0MzRjQ5IiBmaWxsLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=) 50% no-repeat',\n    backgroundSize: '100% 100%',\n    display: 'inline-block',\n    marginBottom: '-0.3em',\n    marginLeft: '0.2em',\n  },\n  '.cm-spellcheck-title': {\n    fontWeight: 'bold',\n    paddingLeft: '1.3em',\n  },\n  '.cm-spellcheck-title:before': {\n    content: '\"\"',\n    height: '0.6em',\n    width: '0.6em',\n    borderRadius: '50%',\n    position: 'absolute',\n    left: '1em',\n    top: '0.5em',\n  },\n  '.cm-spellcheck-title-error:before': { background: '#f91a47' },\n  '.cm-spellcheck-title-warning:before': { background: 'orange' },\n  '.cm-spellcheck-title-info:before': { background: '#5c4cff' },\n\n  \".cm-diagnostic-error\": { borderLeft: \"5px solid #f91a47\" },\n  \".cm-diagnostic-warning\": { borderLeft: \"5px solid orange\" },\n  \".cm-diagnostic-info\": { borderLeft: \"5px solid #5c4cff\" },\n\n  '.cm-lintRange-error': { backgroundImage: underline('#f91a47') },\n  '.cm-lintRange-warning': { backgroundImage: underline('orange') },\n  '.cm-lintRange-info': { backgroundImage: underline('#5c4cff') },\n});\n","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--7-oneOf-1-3!../../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Statusbar.vue?vue&type=style&index=0&id=bdd476bc&prod&lang=scss&scoped=true&\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"52db84eb\", content, true, {\"sourceMap\":false});","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--7-oneOf-1-3!../../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FieldContent.vue?vue&type=style&index=0&id=d90305dc&prod&lang=scss&scoped=true&\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"5dae0837\", content, true, {\"sourceMap\":false});","export * from \"-!../../node_modules/vue-style-loader/index.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--7-oneOf-1-3!../../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ToolbarButton.vue?vue&type=style&index=0&id=5dedde00&prod&lang=scss&scoped=true&\"","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../node_modules/css-loader/dist/runtime/api.js\");\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(false);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".v-btn--outlined[data-v-5dedde00]{border-radius:15%}\", \"\"]);\n// Exports\nmodule.exports = ___CSS_LOADER_EXPORT___;\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js??ref--2-0!../../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ToolbarButton.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js??ref--2-0!../../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ToolbarButton.vue?vue&type=script&lang=js&\"","\nexport default {\n  props: {\n    icon: {\n      type: String,\n      required: true,\n    },\n    title: {\n      type: String,\n      default: '',\n    },\n    disabled: {\n      type: Boolean,\n      default: false,\n    },\n    active: {\n      type: Boolean,\n      default: false,\n    },\n  },\n}\n","import { render, staticRenderFns } from \"./ToolbarButton.vue?vue&type=template&id=5dedde00&scoped=true&\"\nimport script from \"./ToolbarButton.vue?vue&type=script&lang=js&\"\nexport * from \"./ToolbarButton.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ToolbarButton.vue?vue&type=style&index=0&id=5dedde00&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5dedde00\",\n  null\n  \n)\n\nexport default component.exports\n\n/* nuxt-component-imports */\ninstallComponents(component, {SBtn: require('/app/frontend/components/S/Btn.vue').default,STooltip: require('/app/frontend/components/S/Tooltip.vue').default})\n","export * from \"-!../../node_modules/vue-style-loader/index.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--7-oneOf-1-3!../../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Toolbar.vue?vue&type=style&index=0&id=1f0d8b7b&prod&lang=scss&scoped=true&\"","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../node_modules/css-loader/dist/runtime/api.js\");\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(false);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".toolbar[data-v-1f0d8b7b]{background-color:inherit!important}.separator[data-v-1f0d8b7b]{display:inline-block;height:1.5em;width:0;border-left:1px solid #d9d9d9;border-right:1px solid #fff;color:transparent;text-indent:-10px;margin:0 .5em}\", \"\"]);\n// Exports\nmodule.exports = ___CSS_LOADER_EXPORT___;\n","export * from \"-!../../node_modules/vue-style-loader/index.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--7-oneOf-1-3!../../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Preview.vue?vue&type=style&index=0&id=67a31026&prod&lang=scss&scoped=true&\"","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../node_modules/css-loader/dist/runtime/api.js\");\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(false);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".preview[data-v-67a31026]{overflow:auto;word-wrap:break-word;background-color:#fafafa}[data-v-67a31026]  .code-block,[data-v-67a31026]  blockquote,[data-v-67a31026]  ol,[data-v-67a31026]  p,[data-v-67a31026]  table,[data-v-67a31026]  ul{margin:.8em 0 0;padding:0}[data-v-67a31026]  .code-block:first-child,[data-v-67a31026]  blockquote:first-child,[data-v-67a31026]  ol:first-child,[data-v-67a31026]  p:first-child,[data-v-67a31026]  table:first-child,[data-v-67a31026]  ul:first-child{margin-top:0}[data-v-67a31026]  h1,[data-v-67a31026]  h2,[data-v-67a31026]  h3,[data-v-67a31026]  h4,[data-v-67a31026]  h5,[data-v-67a31026]  h6{font-weight:700;margin:1em 0 0}[data-v-67a31026]  h1+*,[data-v-67a31026]  h1:first-child,[data-v-67a31026]  h2+*,[data-v-67a31026]  h2:first-child,[data-v-67a31026]  h3+*,[data-v-67a31026]  h3:first-child,[data-v-67a31026]  h4+*,[data-v-67a31026]  h4:first-child,[data-v-67a31026]  h5+*,[data-v-67a31026]  h5:first-child,[data-v-67a31026]  h6+*,[data-v-67a31026]  h6:first-child{margin-top:0}[data-v-67a31026]  h1,[data-v-67a31026]  h2,[data-v-67a31026]  h3,[data-v-67a31026]  h4,[data-v-67a31026]  h5,[data-v-67a31026]  h6{margin-top:1em}[data-v-67a31026]  h1{font-size:2em}[data-v-67a31026]  h2{font-size:1.75em}[data-v-67a31026]  h3{font-size:1.5em}[data-v-67a31026]  h4{font-size:1.25em}[data-v-67a31026]  h5{font-size:1.1em}[data-v-67a31026]  h6{font-size:1em}[data-v-67a31026]  blockquote{background:#f9f9f9;border-left:5px solid #ccc;padding:.1em .5em}[data-v-67a31026]  .code-block{white-space:pre-wrap}[data-v-67a31026]  .code-block code{display:block}[data-v-67a31026]  .footnotes{border-top:1px solid #000;margin-top:2em}[data-v-67a31026]  table{caption-side:bottom;width:100%}[data-v-67a31026]  table,[data-v-67a31026]  td,[data-v-67a31026]  th{border:1px solid #000;border-collapse:collapse}[data-v-67a31026]  td,[data-v-67a31026]  th{padding:5px}[data-v-67a31026]  figure{text-align:center}[data-v-67a31026]  img{max-width:100%}[data-v-67a31026]  caption,[data-v-67a31026]  figcaption{font-weight:700}[data-v-67a31026]  .footnotes h4{font-size:1em}[data-v-67a31026]  .footnotes .data-footnote-backref{display:none}[data-v-67a31026]  ol li,[data-v-67a31026]  ul li{margin-left:1.5em;padding-left:0}[data-v-67a31026]  ol li.task-list-item,[data-v-67a31026]  ul li.task-list-item{list-style-type:none}[data-v-67a31026]  ol li.task-list-item input[type=checkbox],[data-v-67a31026]  ul li.task-list-item input[type=checkbox]{margin-left:-1.5em;width:1.5em;padding:0}[data-v-67a31026]  .file-download-preview{text-align:center;font-size:inherit;text-decoration:none}[data-v-67a31026]  .file-download-preview:before{font-size:20pt}\", \"\"]);\n// Exports\nmodule.exports = ___CSS_LOADER_EXPORT___;\n","\nimport { undo, redo, undoDepth, redoDepth } from '@codemirror/commands';\nimport { isTypeInSelection, toggleStrong, toggleEmphasis, toggleStrikethrough, toggleListUnordered, toggleListOrdered, toggleLink, insertCodeBlock, insertTable } from 'reportcreator-markdown/editor/commands.js';\n\nexport default {\n  props: {\n    editorView: {\n      type: Object,\n      required: true,\n    },\n    disabled: {\n      type: Boolean,\n      default: false,\n    },\n    uploadFiles: {\n      type: Function,\n      default: null\n    },\n    fileUploadInProgress: {\n      type: Boolean,\n      default: false\n    },\n  },\n  computed: {\n    editorMode: {\n      get() {\n        return this.$store.state.settings.markdownEditorMode;\n      },\n      set(val) {\n        this.$store.commit('settings/updateMarkdownEditorMode', val);\n      },\n    },\n    spellcheckSupported() {\n      return this.$store.getters['apisettings/settings'].features.spellcheck;\n    },\n    spellcheckEnabled: {\n      get() {\n        return this.$store.state.settings.spellcheckEnabled && this.spellcheckSupported;\n      },\n      set(val) {\n        this.$store.commit('settings/updateSpellcheckEnabled', val);\n      }\n    },\n    canUndo() {\n      if (this.editorView) {\n        return undoDepth(this.editorView.state);\n      }\n      return false;\n    },\n    canRedo() {\n      if (this.editorView) {\n        return redoDepth(this.editorView.state);\n      }\n      return false;\n    },\n  },\n  methods: {\n    ...Object.fromEntries(Object.entries({\n      undo,\n      redo,\n      toggleStrong,\n      toggleEmphasis,\n      toggleStrikethrough,\n      toggleListUnordered,\n      toggleListOrdered,\n      toggleLink,\n      insertCodeBlock,\n      insertTable,\n    })\n      .map(([n, fn]) => [n, function() { \n        if (!this.editorView) {\n          return false;\n        }\n\n        try {\n          return fn(this.editorView); \n        } catch (err) {\n          // eslint-disable-next-line no-console\n          console.error('Error in CodeMirror action', err);\n        }\n      }])),\n    isTypeInSelection(type) {\n      if (!this.editorView) {\n        return false;\n      }\n      return isTypeInSelection(this.editorView.state, type);\n    },\n    async onUploadFiles(event) {\n      const files = event.target.files;\n      try {\n        await this.uploadFiles(files);\n      } finally {\n        this.$refs.fileInput.value = null;\n      }\n    },\n  }\n}\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js??ref--2-0!../../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Toolbar.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js??ref--2-0!../../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Toolbar.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Toolbar.vue?vue&type=template&id=1f0d8b7b&scoped=true&\"\nimport script from \"./Toolbar.vue?vue&type=script&lang=js&\"\nexport * from \"./Toolbar.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Toolbar.vue?vue&type=style&index=0&id=1f0d8b7b&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1f0d8b7b\",\n  null\n  \n)\n\nexport default component.exports\n\n/* nuxt-component-imports */\ninstallComponents(component, {MarkdownToolbarButton: require('/app/frontend/components/Markdown/ToolbarButton.vue').default})\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js??ref--2-0!../../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Preview.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js??ref--2-0!../../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Preview.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Preview.vue?vue&type=template&id=67a31026&scoped=true&\"\nimport script from \"./Preview.vue?vue&type=script&lang=js&\"\nexport * from \"./Preview.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Preview.vue?vue&type=style&index=0&id=67a31026&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"67a31026\",\n  null\n  \n)\n\nexport default component.exports","import { EditorState } from '@codemirror/state';\nimport { EditorView, keymap, lineNumbers } from '@codemirror/view';\nimport { defaultKeymap, historyKeymap, indentWithTab, history } from '@codemirror/commands';\nimport { createEditorExtensionToggler } from 'reportcreator-markdown/editor/utils';\nimport { markdown } from 'reportcreator-markdown/editor/language.js';\nimport { spellcheck, spellcheckTheme } from 'reportcreator-markdown/editor/spellcheck.js';\nimport 'highlight.js/styles/default.css';\nimport { syntaxHighlighting, indentUnit } from '@codemirror/language';\nimport { forceLinting, setDiagnostics } from '@codemirror/lint';\nimport { markdownHighlightStyle, markdownHighlightCodeBlocks } from 'reportcreator-markdown/editor/highlight.js';\n\nexport default {\n  props: {\n    value: {\n      type: String,\n      default: '',\n    },\n    uploadFile: {\n      type: Function,\n      default: null,\n    },\n    rewriteFileUrl: {\n      type: Function,\n      default: null,\n    },\n    disabled: {\n      type: Boolean,\n      default: false,\n    },\n    lang: {\n      type: String,\n      default: null,\n    }\n  },\n  emits: ['input'],\n  data() {\n    return {\n      editorView: null,\n      editorActions: {},\n      fileUploadInProgress: false,\n    };\n  },\n  computed: {\n    valueNotNull() {\n      return this.value || '';\n    },\n    editorMode() {\n      return this.$store.state.settings.markdownEditorMode;\n    },\n    spellcheckEnabled() {\n      return this.lang !== null && !this.disabled && \n        this.$store.state.settings.spellcheckEnabled && this.$store.getters['apisettings/settings'].features.spellcheck;\n    },\n  },\n  watch: {\n    value() {\n      if (this.editorView && this.valueNotNull !== this.editorView.state.doc.toString()) {\n        this.editorView.dispatch({\n          changes: {\n            from: 0,\n            to: this.editorView.state.doc.length,\n            insert: this.valueNotNull,\n          }\n        });\n      }\n    },\n    disabled(val) {\n      if (this.editorActions) {\n        this.editorActions.disabled(val);\n      }\n    },\n    lang(val) {\n      if (this.spellcheckEnabled) {\n        forceLinting(this.editorView);\n      }\n    },\n    spellcheckEnabled(val) {\n      this.editorActions.spellcheck(val);\n      if (!val) {\n        // clear existing spellcheck items from editor\n        this.editorView.dispatch(setDiagnostics(this.editorView.state, []));\n      }\n    }\n  },\n  mounted() {\n    this.initializeEditorView();\n  },\n  beforeDestroy() {\n    if (this.editorView) {\n      this.editorView.destroy();\n    }\n  },\n  methods: {\n    initializeEditorView() {\n      this.editorView = new EditorView({\n        parent: this.$refs.editor,\n        state: EditorState.create({\n          doc: this.valueNotNull,\n          extensions: [\n            lineNumbers(),\n            history(),\n            EditorState.allowMultipleSelections.of(true),\n            EditorView.lineWrapping,\n            EditorState.tabSize.of(4),\n            indentUnit.of('    '),\n            keymap.of([defaultKeymap, indentWithTab, historyKeymap]),\n            markdown(),\n            syntaxHighlighting(markdownHighlightStyle),\n            markdownHighlightCodeBlocks,\n            EditorView.updateListener.of((viewUpdate) => {\n              // https://discuss.codemirror.net/t/codemirror-6-proper-way-to-listen-for-changes/2395/11\n              if (viewUpdate.docChanged && viewUpdate.state.doc.toString() !== this.valueNotNull) {\n                this.$emit('input', viewUpdate.state.doc.toString());\n              }\n            }),\n            ...this.additionalCodeMirrorExtensions(),\n          ]\n        }),\n      });\n\n      this.editorActions = {\n        disabled: createEditorExtensionToggler(this.editorView, [\n          EditorView.editable.of(false),\n          EditorState.readOnly.of(true),\n        ]),\n        spellcheck: createEditorExtensionToggler(this.editorView, [\n          spellcheck({ performSpellcheckRequest: this.performSpellcheckRequest, performSpellcheckAddWordRequest: this.performSpellcheckAddWordRequest }),\n          spellcheckTheme,\n        ]),\n        uploadFile: createEditorExtensionToggler(this.editorView, [\n          EditorView.domEventHandlers({\n            drop: (event, view) => {\n              event.stopPropagation();\n              event.preventDefault();\n              const dropPos = this.editorView.posAtCoords({ x: event.clientX, y: event.clientY });\n              this.uploadFiles(event.dataTransfer.files, dropPos);\n            },\n            paste: (event, view) => {\n              if (event.clipboardData.files?.length > 0) {\n                event.stopPropagation();\n                event.preventDefault();\n                this.uploadFiles(event.clipboardData.files);\n              }\n            }\n          })\n        ]),\n      };\n      this.editorActions.disabled(this.disabled);\n      this.editorActions.spellcheck(this.spellcheckEnabled);\n      this.editorActions.uploadFile(this.uploadFile !== null);\n    },\n    additionalCodeMirrorExtensions() {\n      return [];\n    },\n    handleInput(val) {\n      this.$emit('input', val);\n    },\n    handleBlur(val) {\n      this.$emit('blur', val);\n    },\n    async uploadFiles(files, pos = null) {\n      if (!this.uploadFile || !files || files.length === 0 || this.fileUploadInProgress) {\n        return;\n      }\n\n      try {\n        this.fileUploadInProgress = true;\n        const results = await Promise.all(Array.from(files).map((file) => {\n          try {\n            return this.uploadFile(file);\n          } catch (error) {\n            this.$toast.global.requestError({ error, message: 'Failed to upload ' + file.name });\n            return null;\n          }\n        }));\n\n        const mdFileText = results.filter(u => u).join('\\n');\n        if (pos === null) {\n          pos = this.editorView.state.selection.main.from;\n        }\n        this.editorView.dispatch({ changes: { from: pos, insert: mdFileText } });\n      } finally {\n        this.fileUploadInProgress = false;\n      }\n    },\n    async performSpellcheckRequest(data) {\n      if (!this.lang || !data) {\n        return {\n          matches: []\n        };\n      }\n\n      return await this.$axios.$post('/utils/spellcheck/', {\n        ...data,\n        language: this.lang,\n      });\n    },\n    async performSpellcheckAddWordRequest(data) {\n      try {\n        return await this.$axios.$post('/utils/spellcheck/words/', data);\n      } catch (error) {\n        this.$toast.global.requestError({ error });\n      }\n    },\n  }\n}\n","export * from \"-!../../node_modules/vue-style-loader/index.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--7-oneOf-1-3!../../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Statusbar.vue?vue&type=style&index=0&id=bdd476bc&prod&lang=scss&scoped=true&\"","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../node_modules/css-loader/dist/runtime/api.js\");\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(false);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".mde-statusbar[data-v-bdd476bc]{font-size:smaller;text-align:right;padding:.3em 1em;color:#959694}.mde-statusbar span[data-v-bdd476bc]{display:inline-block;min-width:4em;margin-left:1em}\", \"\"]);\n// Exports\nmodule.exports = ___CSS_LOADER_EXPORT___;\n","\nexport default {\n  props: {\n    editorView: {\n      type: Object,\n      required: true,\n    },\n    fileUploadEnabled: {\n      type: Boolean,\n      default: false,\n    },\n    fileUploadInProgress: {\n      type: Boolean,\n      default: false,\n    },\n  },\n  computed: {\n    currentLineNumber() {\n      return this.editorView.state.doc.lineAt(this.editorView.state.selection.main.head).number;\n    },\n    currentColNumber() {\n      const pos = this.editorView.state.selection.main.head\n      const line = this.editorView.state.doc.lineAt(pos);\n      return pos - line.from;\n    },\n    lineCount() {\n      return this.editorView.state.doc.lines;\n    },\n    wordCount() {\n      const pattern = /[a-zA-Z0-9_\\u00A0-\\u02AF\\u0392-\\u03C9\\u0410-\\u04F9]+|[\\u4E00-\\u9FFF\\u3400-\\u4DBF\\uF900-\\uFAFF\\u3040-\\u309F\\uAC00-\\uD7AF]+/g;\n      const m = (this.editorView.state.doc.toString()).match(pattern);\n      let count = 0;\n      if (m === null) { return count; }\n      for (let i = 0; i < m.length; i++) {\n        if (m[i].charCodeAt(0) >= 0x4E00) {\n          count += m[i].length;\n        } else {\n          count += 1;\n        }\n      }\n      return count;\n    },\n  }\n}\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js??ref--2-0!../../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Statusbar.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js??ref--2-0!../../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Statusbar.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Statusbar.vue?vue&type=template&id=bdd476bc&scoped=true&\"\nimport script from \"./Statusbar.vue?vue&type=script&lang=js&\"\nexport * from \"./Statusbar.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Statusbar.vue?vue&type=style&index=0&id=bdd476bc&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"bdd476bc\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../node_modules/vue-style-loader/index.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--7-oneOf-1-3!../../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FieldContent.vue?vue&type=style&index=0&id=d90305dc&prod&lang=scss&scoped=true&\"","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../node_modules/css-loader/dist/runtime/api.js\");\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(false);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".mde-editor[data-v-d90305dc]{display:contents}.mde-editor-side.cm-editor[data-v-d90305dc]{width:50%}[data-v-d90305dc] .mde-editor .cm-content,[data-v-d90305dc] .mde-editor .cm-gutter{min-height:15em}[data-v-d90305dc] .mde-editor .cm-scroller{overflow:auto}[data-v-d90305dc] .mde-editor .cm-wrap{border:1px solid silver}[data-v-d90305dc] .mde-editor .cm-focused{outline:none!important}[data-v-d90305dc] .mde-editor .cm-content{font-family:\\\"Exo\\\"}[data-v-d90305dc] .mde-editor .cm-content .tok-h1,[data-v-d90305dc] .mde-editor .cm-content .tok-h2,[data-v-d90305dc] .mde-editor .cm-content .tok-h3,[data-v-d90305dc] .mde-editor .cm-content .tok-h4,[data-v-d90305dc] .mde-editor .cm-content .tok-h5,[data-v-d90305dc] .mde-editor .cm-content .tok-h6{font-weight:700}[data-v-d90305dc] .mde-editor .cm-content .tok-h1{font-size:2em}[data-v-d90305dc] .mde-editor .cm-content .tok-h2{font-size:1.75em}[data-v-d90305dc] .mde-editor .cm-content .tok-h3{font-size:1.5em}[data-v-d90305dc] .mde-editor .cm-content .tok-h4{font-size:1.25em}[data-v-d90305dc] .mde-editor .cm-content .tok-h5{font-size:1.1em}[data-v-d90305dc] .mde-editor .cm-content .tok-h6{font-size:1em}[data-v-d90305dc] .mde-editor .cm-content .tok-strong{font-weight:700}[data-v-d90305dc] .mde-editor .cm-content .tok-emphasis{font-style:italic}[data-v-d90305dc] .mde-editor .cm-content .tok-strikethrough{text-decoration:line-through}[data-v-d90305dc] .mde-editor .cm-content .tok-codeblock,[data-v-d90305dc] .mde-editor .cm-content .tok-inlinecode{font-family:monospace;background-color:rgba(0,0,0,.05);color:currentColor}[data-v-d90305dc] .mde-editor .cm-content .tok-table{font-family:monospace}[data-v-d90305dc] .mde-editor .cm-content .tok-footnote{vertical-align:super;font-size:.9em}[data-v-d90305dc] .mde-editor .cm-content .tok-footnote,[data-v-d90305dc] .mde-editor .cm-content .tok-image,[data-v-d90305dc] .mde-editor .cm-content .tok-link{color:#7f8c8d}[data-v-d90305dc] .mde-editor .cm-content .tok-url{color:#aab2b3;text-decoration:underline}[data-v-d90305dc] .mde-editor .cm-content .tok-quote{color:#7f8c8d}[data-v-d90305dc] .mde-editor .cm-content .tok-todo{background-color:#e83221;color:#fff;padding-left:.2em;padding-right:.2em;border-radius:10%}[data-v-d90305dc] .mde-editor .cm-content .tok-anglebracket,[data-v-d90305dc] .mde-editor .cm-content .tok-attributename,[data-v-d90305dc] .mde-editor .cm-content .tok-attributevalue,[data-v-d90305dc] .mde-editor .cm-content .tok-comment,[data-v-d90305dc] .mde-editor .cm-content .tok-tagname{font-family:monospace}[data-v-d90305dc] .mde-editor .cm-content .tok-anglebracket,[data-v-d90305dc] .mde-editor .cm-content .tok-tagname{color:#085}[data-v-d90305dc] .mde-editor .cm-content .tok-attributename{color:#795da3}[data-v-d90305dc] .mde-editor .cm-content .tok-attributevalue{color:#a11}[data-v-d90305dc] .mde-editor .cm-content .tok-comment{color:#940}.preview[data-v-d90305dc]{height:100%;min-height:15em;padding:.5em}.preview-side[data-v-d90305dc]{width:50%}\", \"\"]);\n// Exports\nmodule.exports = ___CSS_LOADER_EXPORT___;\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js??ref--2-0!../../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FieldContent.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js??ref--2-0!../../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FieldContent.vue?vue&type=script&lang=js&\"","\nimport MarkdownEditorBase from '~/mixins/MarkdownEditorBase';\n\nexport default {\n  mixins: [MarkdownEditorBase],\n}\n","import { render, staticRenderFns } from \"./FieldContent.vue?vue&type=template&id=d90305dc&scoped=true&\"\nimport script from \"./FieldContent.vue?vue&type=script&lang=js&\"\nexport * from \"./FieldContent.vue?vue&type=script&lang=js&\"\nimport style0 from \"./FieldContent.vue?vue&type=style&index=0&id=d90305dc&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"d90305dc\",\n  null\n  \n)\n\nexport default component.exports\n\n/* nuxt-component-imports */\ninstallComponents(component, {MarkdownToolbar: require('/app/frontend/components/Markdown/Toolbar.vue').default,MarkdownPreview: require('/app/frontend/components/Markdown/Preview.vue').default,MarkdownStatusbar: require('/app/frontend/components/Markdown/Statusbar.vue').default})\n"],"sourceRoot":""}