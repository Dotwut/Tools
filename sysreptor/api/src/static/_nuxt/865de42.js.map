{"version":3,"sources":["webpack:///../packages/markdown/mdext/helpers.js","webpack:///./utils/urls.js","webpack:///./node_modules/url-join/lib/url-join.js","webpack:///../packages/markdown/mdext/footnotes.js","webpack:///../packages/markdown/mdext/gfm.js","webpack:///../packages/markdown/mdext/rehypePlugins.js","webpack:///../packages/markdown/mdext/attrs.js","webpack:///../packages/markdown/mdext/image.js","webpack:///../packages/markdown/mdext/tables.js","webpack:///../packages/markdown/mdext/reference.js","webpack:///../packages/markdown/editor/annotatedtext.js","webpack:///../packages/markdown/mdext/templates.js","webpack:///../packages/markdown/mdext/todo.js","webpack:///../packages/markdown/mdext/codeHighlight.js","webpack:///../packages/markdown/mdext/label-end.js","webpack:///../packages/markdown/mdext/modified-commonmark.js","webpack:///../packages/markdown/index.js","webpack:///./components/Markdown/Preview.vue","webpack:///../packages/markdown/node_modules/@codemirror/lint/dist/index.js","webpack:///./components/Markdown/ToolbarButton.vue?d91e","webpack:///../packages/markdown/node_modules/crelt/index.es.js","webpack:///../packages/markdown/editor/micromark-utils.js","webpack:///../packages/markdown/editor/codemirror-utils.js","webpack:///../packages/markdown/editor/commands.js","webpack:///./components/Markdown/Toolbar.vue?e54b","webpack:///./components/Markdown/Preview.vue?9783","webpack:///../packages/markdown/editor/language.js","webpack:///../packages/markdown/editor/highlight.js","webpack:///../packages/markdown/editor/utils.js","webpack:///../packages/markdown/editor/spellcheck.js","webpack:///./components/Markdown/Statusbar.vue?888f","webpack:///./components/Markdown/FieldContent.vue?f90c","webpack:///./components/Markdown/ToolbarButton.vue?c569","webpack:///./components/Markdown/ToolbarButton.vue?3446","webpack:///./components/Markdown/ToolbarButton.vue?9578","webpack:///./components/Markdown/ToolbarButton.vue","webpack:///./components/Markdown/ToolbarButton.vue?f373","webpack:///./components/Markdown/Toolbar.vue?8948","webpack:///./components/Markdown/Toolbar.vue?eac1","webpack:///./components/Markdown/Preview.vue?f713","webpack:///./components/Markdown/Preview.vue?4b7b","webpack:///./components/Markdown/Field.vue?717e","webpack:///./components/Markdown/Toolbar.vue","webpack:///./components/Markdown/Toolbar.vue?0924","webpack:///./components/Markdown/Toolbar.vue?f936","webpack:///./components/Markdown/Preview.vue?4fd4","webpack:///./components/Markdown/Preview.vue?95cb","webpack:///./mixins/MarkdownEditorBase.js","webpack:///./node_modules/vuetify/src/components/VTextarea/VTextarea.sass?df30","webpack:///./node_modules/vuetify/src/components/VTextarea/VTextarea.sass","webpack:///./components/Markdown/Statusbar.vue?749d","webpack:///./components/Markdown/Statusbar.vue?db11","webpack:///./components/Markdown/Statusbar.vue","webpack:///./components/Markdown/Statusbar.vue?ef32","webpack:///./components/Markdown/Statusbar.vue?8ab1","webpack:///../../../src/components/VTextarea/VTextarea.ts","webpack:///./components/Markdown/FieldContent.vue?be9b","webpack:///./components/Markdown/FieldContent.vue?1a7c","webpack:///../../../src/components/VGrid/VRow.ts","webpack:///../../../src/components/VGrid/VCol.ts","webpack:///./components/Markdown/FieldContent.vue?eec6","webpack:///./components/Markdown/FieldContent.vue","webpack:///./components/Markdown/FieldContent.vue?21aa","webpack:///./components/Markdown/Field.vue?1f15","webpack:///./components/Markdown/Field.vue?5e9a","webpack:///./components/Markdown/Field.vue?80b6","webpack:///./components/Markdown/Field.vue","webpack:///./components/Markdown/Field.vue?d9da"],"names":["addRemarkExtension","self","micromarkExtensions","fromMarkdownExtensions","toMarkdownExtensions","data","add","field","value","push","assert","bool","msg","Error","i","absoluteApiUrl","url","axios","some","p","startsWith","urlJoin","URL","defaults","baseURL","window","location","origin","CursorPaginationFetcher","toast","this","nextPageURL","isLoading","hasError","errorData","hasNextPage","$get","res","next","results","response","global","requestError","error","SearchableCursorPaginationFetcher","searchFilters","search","_searchFilters","_fetchNextPageDebounced","debounce","_fetchNextPage","fetcher","_createFetcher","searchParams","URLSearchParams","split","Object","entries","k","v","Array","isArray","delete","e","append","set","searchUrl","toString","val","assign","fetchNextPage","filters","fetchNextPageImmediate","flush","normalize","strArray","resultArray","length","TypeError","match","first","shift","replace","component","str","join","parts","arguments","slice","call","remarkFootnotes","_hiddenFootnoteSupport","text","codes","caret","tokenize","effects","ok","nok","code","enter","consume","exit","inlineFootnoteStart","leftSquareBracket","resolveAll","resolveAllFootnote","rightSquareBracket","hasStart","index","events","type","resolveTo","context","token","openIndex","undefined","group","start","end","note","splice","parser","constructs","insideSpan","null","footnoteSyntax","inlineFootnote","children","unsafe","character","inConstruct","handlers","footnote","node","_","subexit","containerPhrasing","before","after","remarkToRehypeHandlersFootnotes","h","all","footnoteDefinition","footnoteReference","rehypeFootnoteSeparator","tree","visit","parent","tagName","class","rehypeFootnoteSeparatorPreview","properties","dataFootnoteRef","nextSibling","remarkStrikethrough","gfmStrikethrough","gfmStrikethroughFromMarkdown","gfmStrikethroughToMarkdown","remarkTaskListItem","gfmTaskListItem","gfmTaskListItemFromMarkdown","gfmTaskListItemToMarkdown","rehypeLinkTargetBlank","href","target","rel","rehypeConvertAttrsToStyle","convertAttrs","attrName","styleName","style","addClass","className","rehypeRewriteImageSources","rewriteImageSource","src","rehypeRewriteFileLinks","rewriteFileUrl","download","rehypeTemplates","content","rehypeRawFixSelfClosingTags","console","log","replaceAll","attrsFromMarkdown","transforms","prevNode","hProperties","attrs","includes","attrsString","textAttributes","setData","buffer","cleaned","getData","attribute","resume","stack","sliceSerialize","textAttributeClassValue","parseEntities","textAttributeIdValue","textAttributeName","textAttributeValue","list","remarkToRehypeAttrs","attributes","remarkAttrs","name","leftCurlyBrace","factoryAttributes","map","c","remarkFigure","image","title","alt","label","fragment","peek","safeOptions","quote","checkQuote","suffix","tracker","track","move","current","test","safe","figureToMarkdown","remarkToRehypeHandlersFigure","normalizeUri","remarkTables","gfmTable","gfmTableFromMarkdown","gfmTableToMarkdown","remarkTableCaptions","captionBlock","captionText","captionPrefixLength","captionVal","captionValTrimmed","trimStart","position","column","offset","tableCaption","remarkToRehypeHandlersTableCaptions","rehypeTableCaptions","tableNode1","tableNode2","rehypeReferenceLink","to","substring","rehypeReferenceLinkPreview","rewriteReferenceLink","refNodes","refTargets","id","refId","refPreview","cn","createBlockSeparator","pos","micromarkToAnnotatedText","micromarkEventsToTree","leafNodes","interpretAsLeafNodes","interpretAsLeafNodesFns","wrapTypesWithBlockSeparators","collectLeafNodes","t","n","wrapWithSeparators","extractLeafNodesFromMicromarkTree","textTypes","markupTypesInterpretAs","annotatedText","markup","interpretAs","annotatedTextParse","Parser","parseMicromarkEvents","extensions","remarkTemplateVariables","closeBraceCount","start2","between","eof","rightCurlyBrace","sequenceClose","templateVariable","remarkTodoMarker","uppercaseT","tokenizeTodo","lowercaseT","middleO","uppercaseO","lowercaseO","middleDorDash","dash","middleD","uppercaseD","lowercaseD","endO","todoSyntax","todo","hName","splitTreeAtPosition","splitPos","processChildren","flat","currentPos","childrenLeft","childrenRight","processNode","pc","nodeLength","wrapTreeAreas","wrapInfos","wi","startMarkerPos","endMarkerPos","ci","wii","concat","markerTree","rehypeHighlightCode","meta","metaLine","fromEntries","from","matchAll","m","camelCase","groups","highlightManual","lineNumbers","Number","parseInt","parseMeta","highlightInfos","highlightMarkerRe","highlightedAreaRe","RegExp","codeNew","highlightInfo","startMarker","endMarker","parseManualHighlightAreas","language","filter","toLowerCase","getLanguage","lowlight","highlight","highlightSyntax","hi","unified","use","rehypeParse","parse","applyManualHighlighting","lines","line","dataLineNumber","splitIntoLines","labelEnd","labelStart","defined","types","labelImage","labelLink","_labelEnd_balanced","_inactive","balanced","normalizeIdentifier","now","labelMarker","afterLabelEnd","leftParenthesis","attempt","resourceConstruct","fullReferenceConstruct","collapsedReferenceConstruct","open","close","media","link","labelText","resource","resourceMarker","factoryWhitespace","rightParenthesis","factoryDestination","destinationAfter","resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString","constants","linkResourceDestinationBalanceMax","markdownLineEndingOrSpace","quotationMark","apostrophe","factoryTitle","resourceTitle","resourceTitleMarker","resourceTitleString","factoryLabel","afterLabel","reference","referenceMarker","referenceString","labelEndSyntax","modifiedCommonmarkFeatures","disable","rehypeSanitizeSchema","merge","defaultSchema","allowComments","clobberPrefix","tagNames","markdownParser","renderMarkdownToHtml","preview","rewriteFileSource","md","remarkParse","remarkRehype","allowDangerousHtml","footnoteLabelTagName","rehypeRaw","rehypeSanitize","rehypeStringify","mdHtml","processSync","markdownToAnnotatedText","props","String","default","Function","renderedMarkdownRaw","imageCache","computed","renderedMarkdown","html","imgCacheEntry","placeholder","watch","updatePreview","created","throttle","renderMarkdown","updated","$el","querySelectorAll","forEach","a","addEventListener","preventDefault","document","querySelector","getAttribute","scrollIntoView","behavior","methods","fetchImage","$nextTick","$axios","responseType","imgRes","imageType","endsWith","imgData","Buffer","status","imgSrc","apiUrl","SelectedDiagnostic","constructor","diagnostic","LintState","diagnostics","panel","selected","static","state","markedDiagnostics","diagnosticFilter","facet","lintConfig","markerFilter","ranges","d","doc","lineAt","widget","DiagnosticWidget","range","mark","severity","findDiagnostic","found","spec","hideTooltip","tr","tooltip","is","setDiagnosticsEffect","changes","touchesRange","maybeEnableLint","lintState","appendConfig","of","decorations","compute","activeMark","none","lintTooltip","hideOn","baseTheme","setDiagnostics","define","togglePanel","movePanelSelection","create","update","docChanged","mapped","selPos","mapPos","effect","init","LintPanel","provide","f","s","view","side","stackStart","stackEnd","Math","min","max","tooltipFilter","above","dom","diagnosticsTooltip","renderDiagnostic","closeLintPanel","dispatch","lintPlugin","fromClass","timeout","delay","lintTime","Date","run","bind","setTimeout","sources","Promise","source","resolve","then","annotations","reduce","b","config","startState","needsRefresh","force","destroy","clearTimeout","combine","input","u","enables","linter","forceLinting","plugin","assignKeys","actions","assigned","ch","inPanel","_a","keys","renderMessage","message","action","fired","click","apply","keyIndex","indexOf","nameElt","onclick","onmousedown","super","eq","other","toDOM","PanelItem","floor","random","setAttribute","items","tabIndex","role","phrase","onkeydown","event","keyCode","focus","moveSelection","selectedIndex","toUpperCase","charCodeAt","contains","needsSync","newSelectedItem","_start","_end","item","j","hasAttribute","removeAttribute","pop","requestMeasure","key","read","sel","getBoundingClientRect","write","top","scrollTop","bottom","sync","domPos","firstChild","rm","prev","remove","parentNode","insertBefore","selection","anchor","head","svg","encodeURIComponent","underline","color","padding","marginLeft","display","whiteSpace","borderLeft","font","border","backgroundColor","borderRadius","cursor","fontSize","opacity","backgroundPosition","backgroundRepeat","paddingBottom","backgroundImage","margin","left","borderRight","borderBottom","borderBottomColor","maxHeight","overflowY","textDecoration","background_fallback","color_fallback","right","background","LintGutterMarker","elt","createElement","diagnosticsFilter","lintGutterConfig","onmouseover","marker","hovered","elementAtHeight","documentTop","coordsAtPos","setLintGutterTooltip","getCoords","onmouseout","onmousemove","mousemove","rect","clientX","clientY","nodeType","classList","removeEventListener","lintGutterTooltip","trackHoverOn","hoverTime","hoverTimeout","gutterMarkerMouseOver","forEachDiagnostic","lState","size","iter","__esModule","module","locals","exports","crelt","prototype","hasOwnProperty","child","appendChild","createTextNode","RangeError","postprocess","preprocess","treeNode","linesInRange","out","startLine","number","endLine","getChildren","intersectsRange","getIntersectionNodes","predicate","nodes","cb","iterateChildren","topNode","iterateRange","clamp","moveRangeDelete","moveRange","change","moveStart","moveEnd","EditorSelection","moveRangeInsert","insert","Context","spaceBefore","spaceAfter","maxWidth","trailing","result","itemNumber","getContext","selectedNode","cur","startPos","exec","len","sliceString","renumberList","insertNewlineContinueMarkup","syntaxTree","dont","changeByRange","empty","markdownLanguage","isActiveAt","resolveInner","inner","emptyLine","delTo","prevLine","quoted","continued","blank","charAt","lineBreak","userEvent","isMark","deleteMarkupBackward","scan","childBefore","lastChild","contextNodeForDelete","spaceEnd","isTypeInSelection","toggleMarkdownAction","isInSelection","enable","foundNodes","toggleMarkerType","markerTypes","insertText","newRange","flatMap","toggleStrong","toggleEmphasis","toggleStrikethrough","toggleListUnordered","listItemNumber","find","removeMarkers","toggleListOrdered","listItemBullet","toggleLink","linksToRemove","insertCodeBlock","codeBlockStart","codeBlockEnd","insertTable","markdownLanguageFacet","defineLanguageFacet","block","markdownHighlighting","styleTags","strong","emphasis","strikethrough","tags","inlinecode","codeblock","table","heading1","heading2","heading3","heading4","heading5","heading6","nodeSet","NodeSet","NodeType","idx","extend","languageDataProp","indentNodeProp","micromarkToLezerSyntaxTree","visitTree","visitNode","addListItem","currentListItem","info","listItems","modifySyntaxTree","Tree","build","toBuffer","nodeId","topID","lezerSyntaxTreeParse","BlockContext","fragments","stoppedAt","MarkdownParser","mdParser","parseMixed","htmlLanguage","overlay","matchClosingTags","Language","markdown","LanguageSupport","Prec","high","keymap","Tag","markdownHighlightStyle","tagHighlighter","tag","angleBracket","attributeName","attributeValue","comment","markdownHighlightCodeBlocks","ViewPlugin","Decoration","updateDecorations","builder","RangeSetBuilder","iterate","l","finish","createEditorExtensionToggler","extension","compartment","Compartment","get","reconfigure","StateEffect","createEditorCompartment","targetApply","exExtension","SPELLING_RULE_IDS","STYLE_ISSUE_TYPES","spellcheck","performSpellcheckRequest","performSpellcheckAddWordRequest","annotation","spellcheckResults","matches","r","rule","category","urls","replacements","word","spellcheckTheme","EditorView","theme","listStyle","marginBottom","marginRight","width","textAlign","marginTop","backgroundSize","fontWeight","paddingLeft","height","___CSS_LOADER_EXPORT___","___CSS_LOADER_API_IMPORT___","icon","required","disabled","Boolean","active","_self","scopedSlots","_vm","_c","fn","proxy","installComponents","SBtn","STooltip","editorView","uploadFiles","fileUploadInProgress","lang","editorMode","$store","settings","markdownEditorMode","commit","spellcheckSupported","getters","features","languages","spellcheckEnabled","canUndo","undoDepth","canRedo","redoDepth","undo","redo","err","onUploadFiles","files","$refs","fileInput","staticClass","_v","staticRenderFns","MarkdownToolbarButton","domProps","_s","uploadFile","emits","editorActions","valueNotNull","mounted","initializeEditorView","beforeDestroy","editor","EditorState","history","allowMultipleSelections","lineWrapping","tabSize","indentUnit","defaultKeymap","indentWithTab","historyKeymap","syntaxHighlighting","updateListener","viewUpdate","$emit","additionalCodeMirrorExtensions","editable","readOnly","domEventHandlers","drop","stopPropagation","dropPos","posAtCoords","x","y","dataTransfer","paste","clipboardData","handleInput","handleBlur","file","$toast","mdFileText","main","$post","fileUploadEnabled","currentLineNumber","currentColNumber","lineCount","wordCount","count","_e","baseMixins","mixins","VTextField","autoGrow","noResize","rowHeight","validator","isNaN","parseFloat","rows","classes","noResizeHandle","options","calculateInputHeight","removeProperty","lazyValue","scrollHeight","minHeight","genInput","onInput","onKeyDown","isFocused","breakpoints","ALIGNMENT","makeProps","prefix","def","upperFirst","alignValidator","alignProps","justifyValidator","justifyProps","alignContentValidator","alignContentProps","propMap","align","justify","alignContent","classMap","breakpointClass","prop","breakpoint","cache","Map","Vue","functional","dense","noGutters","render","cacheKey","mergeData","breakpointProps","offsetProps","orderProps","col","order","cols","alignSelf","hasColClasses","MarkdownEditorBase","directives","ref","MarkdownToolbar","MarkdownPreview","MarkdownStatusbar","VTextArea","extends","outlined","isLabelActive","$createElement","MarkdownFieldContent","on","onMouseDown","VInput"],"mappings":"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","file":"865de42.js","sourcesContent":["export function addRemarkExtension(self, micromarkExtensions, fromMarkdownExtensions, toMarkdownExtensions) {\n  const data = self.data();\n\n  add('micromarkExtensions', micromarkExtensions);\n  add('fromMarkdownExtensions', fromMarkdownExtensions);\n  add('toMarkdownExtensions', toMarkdownExtensions);\n\n  /**\n  * @param {string} field\n  * @param {unknown} value\n  */\n  function add(field, value) {\n    if (!value) {\n      return;\n    }\n\n    const list = /** @type {unknown[]} */ (\n      // Other extensions\n      /* c8 ignore next 2 */\n      data[field] ? data[field] : (data[field] = [])\n    )\n\n    list.push(value)\n  }\n}\n\n\nexport function assert(bool, msg) {\n  if (!bool) {\n    throw new Error(msg);\n  }\n}","import urlJoin from 'url-join';\nimport { debounce } from 'lodash';\n\nexport function absoluteApiUrl(url, axios) {\n  if (['http', 'data'].some(p => url.startsWith(p))) {\n    return url;\n  } else if (url.startsWith('/api/')) {\n    return urlJoin(new URL(axios.defaults.baseURL, window.location).origin, url);\n  } else {\n    return urlJoin(axios.defaults.baseURL, url);\n  }\n}\n\nexport function relativeTo(url, baseUrl) {\n  const absUrl = absoluteApiUrl(url);\n  baseUrl = absoluteApiUrl(baseUrl);\n\n  if (absUrl.startsWith(baseUrl)) {\n    return absUrl.substring(baseUrl.length);\n  } else {\n    return url;\n  }\n}\n\nexport class CursorPaginationFetcher {\n  constructor(baseURL, axios, toast) {\n    this.axios = axios;\n    this.toast = toast;\n    this.baseURL = baseURL;\n\n    this.nextPageURL = this.baseURL;\n    this.isLoading = false;\n    this.data = [];\n    this.hasError = false;\n    this.errorData = null;\n  }\n\n  get hasNextPage() {\n    return this.nextPageURL !== null;\n  }\n\n  async fetchNextPage() {\n    if (!this || this.isLoading || !this.hasNextPage) {\n      return;\n    }\n\n    try {\n      this.isLoading = true;\n\n      const res = await this.axios.$get(this.nextPageURL);\n      this.nextPageURL = res.next;\n      this.data.push(...res.results);\n\n      this.hasError = false;\n      this.errorData = null;\n    } catch (error) {\n      this.hasError = true;\n      this.errorData = error?.response?.data || null;\n\n      this.toast.global.requestError({ error });\n    } finally {\n      this.isLoading = false;\n    }\n  }\n}\n\nexport class SearchableCursorPaginationFetcher {\n  constructor({ baseURL, searchFilters = { search: '' }, axios, toast }) {\n    this.axios = axios;\n    this.toast = toast;\n    this.baseURL = baseURL;\n    this._searchFilters = searchFilters;\n\n    this._fetchNextPageDebounced = debounce(function() { this._fetchNextPage(); }, 500);\n\n    this.fetcher = null;\n    this._createFetcher();\n  }\n\n  _createFetcher() {\n    const searchParams = new URLSearchParams(this.baseURL.split('?')[1]);\n    for (const [k, v] of Object.entries(this.searchFilters)) {\n      if (v) {\n        if (Array.isArray(v)) {\n          searchParams.delete(k);\n          for (const e of v) {\n            searchParams.append(k, e);\n          }\n        } else {\n          searchParams.set(k, v);\n        }\n      }\n    }\n    const searchUrl = this.baseURL.split('?')[0] + '?' + searchParams.toString();\n    this.fetcher = new CursorPaginationFetcher(searchUrl, this.axios, this.toast);\n  }\n\n  search(val) {\n    this._searchFilters = Object.assign(this._searchFilters, { search: val })\n    this._createFetcher();\n    this.fetchNextPage();\n  }\n\n  applyFilters(filters) {\n    Object.assign(this._searchFilters, filters);\n    this._createFetcher();\n    this.fetchNextPageImmediate()\n  }\n\n  get searchFilters() {\n    return this._searchFilters;\n  }\n\n  get searchQuery() {\n    return this.searchFilters.search;\n  }\n\n  set searchQuery(val) {\n    this.search(val, this._searchFilters);\n  }\n\n  get hasNextPage() {\n    return this.fetcher.hasNextPage;\n  }\n\n  get hasError() {\n    return this.fetcher.hasError;\n  }\n\n  get errorData() {\n    return this.fetcher.errorData;\n  }\n\n  get data() {\n    return this.fetcher.data;\n  }\n\n  fetchNextPage() {\n    this._fetchNextPageDebounced();\n  }\n\n  async _fetchNextPage() {\n    await this.fetcher.fetchNextPage();\n  }\n\n  fetchNextPageImmediate() {\n    if (!this) {\n      return;\n    }\n\n    this._fetchNextPageDebounced();\n    this._fetchNextPageDebounced.flush();\n  }\n}\n","function normalize (strArray) {\n  var resultArray = [];\n  if (strArray.length === 0) { return ''; }\n\n  if (typeof strArray[0] !== 'string') {\n    throw new TypeError('Url must be a string. Received ' + strArray[0]);\n  }\n\n  // If the first part is a plain protocol, we combine it with the next part.\n  if (strArray[0].match(/^[^/:]+:\\/*$/) && strArray.length > 1) {\n    var first = strArray.shift();\n    strArray[0] = first + strArray[0];\n  }\n\n  // There must be two or three slashes in the file protocol, two slashes in anything else.\n  if (strArray[0].match(/^file:\\/\\/\\//)) {\n    strArray[0] = strArray[0].replace(/^([^/:]+):\\/*/, '$1:///');\n  } else {\n    strArray[0] = strArray[0].replace(/^([^/:]+):\\/*/, '$1://');\n  }\n\n  for (var i = 0; i < strArray.length; i++) {\n    var component = strArray[i];\n\n    if (typeof component !== 'string') {\n      throw new TypeError('Url must be a string. Received ' + component);\n    }\n\n    if (component === '') { continue; }\n\n    if (i > 0) {\n      // Removing the starting slashes for each component but the first.\n      component = component.replace(/^[\\/]+/, '');\n    }\n    if (i < strArray.length - 1) {\n      // Removing the ending slashes for each component but the last.\n      component = component.replace(/[\\/]+$/, '');\n    } else {\n      // For the last component we will combine multiple slashes to a single one.\n      component = component.replace(/[\\/]+$/, '/');\n    }\n\n    resultArray.push(component);\n\n  }\n\n  var str = resultArray.join('/');\n  // Each input component is now separated by a single slash except the possible first plain protocol part.\n\n  // remove trailing slash before parameters or hash\n  str = str.replace(/\\/(\\?|&|#[^!])/g, '$1');\n\n  // replace ? in parameters with &\n  var parts = str.split('?');\n  str = parts.shift() + (parts.length > 0 ? '?': '') + parts.join('&');\n\n  return str;\n}\n\nexport default function urlJoin() {\n  var input;\n\n  if (typeof arguments[0] === 'object') {\n    input = arguments[0];\n  } else {\n    input = [].slice.call(arguments);\n  }\n\n  return normalize(input);\n}\n","import {splice} from 'micromark-util-chunked'\nimport {codes} from 'micromark-util-symbol/codes.js'\nimport {resolveAll} from 'micromark-util-resolve-all'\nimport {containerPhrasing} from 'mdast-util-to-markdown/lib/util/container-phrasing.js'\nimport {all} from 'remark-rehype';\nimport {visit} from 'unist-util-visit';\nimport { addRemarkExtension, assert } from './helpers';\nimport {h} from 'hastscript';\n\n/**\n * @typedef {import('micromark-util-types').Extension} Extension\n * @typedef {import('micromark-util-types').Resolver} Resolver\n * @typedef {import('micromark-util-types').Token} Token\n * @typedef {import('micromark-util-types').Tokenizer} Tokenizer\n * @typedef {import('micromark-util-types').Exiter} Exiter\n * @typedef {import('micromark-util-types').State} State\n * @typedef {import('micromark-util-types').HtmlExtension} HtmlExtension\n * @typedef {import('micromark-util-types').CompileContext} CompileContext\n * \n * @typedef {import('mdast-util-from-markdown').Extension} FromMarkdownExtension\n * @typedef {import('mdast-util-from-markdown').Handle} FromMarkdownHandle\n * @typedef {import('mdast-util-to-markdown').Options} ToMarkdownExtension\n * @typedef {import('mdast-util-to-markdown').Handle} ToMarkdownHandle\n * @typedef {import('mdast-util-to-markdown').Map} Map\n */\n \n\n/**\n * @returns {Extension}\n */\nfunction footnoteSyntax() {\n  /** @type {Extension} */\n  return {\n    _hiddenFootnoteSupport: {},\n    text: {\n      [codes.caret]: {\n        tokenize: tokenizeInlineFootnoteStart, \n        resolveAll: resolveAllFootnote\n      },\n      [codes.rightSquareBracket]: {\n        add: 'after',\n        tokenize: tokenizeInlineFootnoteEnd,\n        resolveAll: resolveAllFootnote,\n        resolveTo: resolveToFootnoteEnd\n      },  \n    }\n  };\n\n  /** @type {Tokenizer} */\n  function tokenizeInlineFootnoteStart(effects, ok, nok) {\n    return start;\n\n    /** @type {State} */\n    function start(code) {\n      assert(code === codes.caret, 'expected `^`');\n      effects.enter('inlineFootnoteStart');\n      effects.enter('inlineFootnoteMarker');\n      effects.consume(code);\n      effects.exit('inlineFootnoteMarker');\n      return inlineFootnoteStart;\n    }\n\n    /** @type {State} */\n    function inlineFootnoteStart(code) {\n      if (code !== codes.leftSquareBracket) {\n        return nok(code);\n      }\n\n      effects.enter('inlineFootnoteStartMarker');\n      effects.consume(code);\n      effects.exit('inlineFootnoteStartMarker');\n      effects.exit('inlineFootnoteStart');\n      return ok;\n    }\n  }\n\n  /** @type {Tokenizer} */\n  function tokenizeInlineFootnoteEnd(effects, ok, nok) {\n    const self = this;\n    return start;\n\n    /** @type {State} */\n    function start(code) {\n      assert(code === codes.rightSquareBracket, 'expected `]`');\n      let index = self.events.length;\n      /** @type {boolean|undefined} */\n      let hasStart;\n\n      // Find an opening.\n      while (index--) {\n        if (self.events[index][1].type === 'inlineFootnoteStart') {\n          hasStart = true;\n          break;\n        }\n      }\n\n      if (!hasStart) {\n        return nok(code);\n      }\n\n      effects.enter('inlineFootnoteEnd');\n      effects.enter('inlineFootnoteEndMarker');\n      effects.consume(code);\n      effects.exit('inlineFootnoteEndMarker');\n      effects.exit('inlineFootnoteEnd');\n      return ok;\n    }\n  }\n\n  /**\n   * Remove remaining note starts.\n   *\n   * @type {Resolver}\n   */\n  function resolveAllFootnote(events) {\n    let index = -1;\n    /** @type {Token} */\n    let token;\n\n    while (++index < events.length) {\n      token = events[index][1];\n\n      if (events[index][0] === 'enter' && token.type === 'inlineFootnoteStart') {\n        token.type = 'data';\n        // Remove the two marker (`^[`).\n        events.splice(index + 1, 4);\n      }\n    }\n\n    return events;\n  }\n\n  /** @type {Resolver} */\n  function resolveToFootnoteEnd(events, context) {\n    let index = events.length - 4;\n    /** @type {Token} */\n    let token;\n    /** @type {number} */\n    let openIndex;\n\n    // Find an opening.\n    while (index--) {\n      token = events[index][1];\n\n      // Find where the note starts.\n      if (events[index][0] === 'enter' && token.type === 'inlineFootnoteStart') {\n        openIndex = index;\n        break;\n      }\n    }\n\n    // @ts-expect-error It’s fine.\n    assert(openIndex !== undefined, 'expected `openIndex` to be found');\n\n    /** @type {Token} */\n    const group = {\n      type: 'inlineFootnote',\n      start: Object.assign({}, events[openIndex][1].start),\n      end: Object.assign({}, events[events.length - 1][1].end),\n    }\n\n    const text = {\n      type: 'inlineFootnoteText',\n      start: Object.assign({}, events[openIndex + 4][1].end),\n      end: Object.assign({}, events[events.length - 3][1].start),\n    }\n\n    const note = [\n      ['enter', group, context],\n      events[openIndex + 1],\n      events[openIndex + 2],\n      events[openIndex + 3],\n      events[openIndex + 4],\n      ['enter', text, context]\n    ];\n\n    splice(\n      note,\n      note.length,\n      0,\n      resolveAll(\n        context.parser.constructs.insideSpan.null,\n        events.slice(openIndex + 6, -4),\n        context\n      )\n    );\n\n    note.push(\n      ['exit', text, context],\n      events[events.length - 3],\n      events[events.length - 2],\n      ['exit', group, context]\n    );\n\n    splice(events, index, events.length - index, note);\n\n    return events;\n  }\n}\n\n\n\nfunction footnoteFromMarkdown() {\n  /** @type {FromMarkdownExtension} */\n  return {\n    enter: {\n      inlineFootnote: enterInlineFootnote,\n    },\n    exit: {\n      inlineFootnote: exitInlineFootnote,\n    }\n  };\n\n  function enterInlineFootnote(token) {\n    this.enter({type: 'footnote', children: []}, token);\n  }\n\n  function exitInlineFootnote(token) {\n    this.exit(token);\n  }\n}\n\nfunction footnoteToMarkdown() {\n  return {\n    unsafe: [{character: '[', inConstruct: ['phrasing', 'label', 'reference']}],\n    handlers: {footnote},\n  };\n\n  function footnote(node, _, context) {\n    const exit = context.enter('footnote');\n    const subexit = context.enter('label');\n    const value = '^[' + containerPhrasing(node, context, {before: '[', after: ']'}) + ']';\n    subexit();\n    exit();\n    return value;\n  }\n};\n\n\n\nexport function remarkFootnotes() {\n  addRemarkExtension(this, footnoteSyntax(), footnoteFromMarkdown(), footnoteToMarkdown());\n}\n\n\n/**\n * Render footnotes as <footnote>content</footnote>\n */\nexport const remarkToRehypeHandlersFootnotes = {\n  footnote(h, node) {\n    return h(node, 'footnote', all(h, node))\n  },\n  footnoteDefinition(h, node) {\n    return null;\n  },\n  footnoteReference(h, node) {\n    return null;\n  },\n};\n\n\nexport function rehypeFootnoteSeparator() {\n  // add a footnote call separator tag between consecutive <footnote> tags\n  return tree => visit(tree, 'element', (node, index, parent) => {\n    if (node.tagName === 'footnote' && parent.children[index + 1]?.tagName === 'footnote') {\n      parent.children.splice(index + 1, 0, h('sup', {class: 'footnote-call-separator'}));\n    }\n  })\n}\n\n\nexport function rehypeFootnoteSeparatorPreview() {\n  return tree => visit(tree, 'element', (node, index, parent) => {\n    // Remove link from footnote call\n    if (node.tagName !== 'sup' || node.children.length !== 1 || !node.children[0]?.properties?.dataFootnoteRef) {\n      return;\n    }\n    node.children = node.children[0].children;\n\n    // Add footnote call separator\n    const nextSibling = parent.children[index + 1];\n    if (nextSibling?.tagName !== 'sup' || nextSibling.children.length !== 1 || !nextSibling.children[0]?.properties?.dataFootnoteRef) {\n      return;\n    }\n    parent.children.splice(index + 1, 0, h('sup', {class: 'footnote-call-separator'}, [',']));\n  })\n}","import { gfmStrikethrough } from 'micromark-extension-gfm-strikethrough';\nimport { gfmStrikethroughFromMarkdown, gfmStrikethroughToMarkdown } from 'mdast-util-gfm-strikethrough';\nimport { gfmTaskListItem } from 'micromark-extension-gfm-task-list-item';\nimport { gfmTaskListItemFromMarkdown, gfmTaskListItemToMarkdown } from 'mdast-util-gfm-task-list-item';\nimport { addRemarkExtension } from './helpers';\n\n\nexport function remarkStrikethrough() {\n  addRemarkExtension(this, gfmStrikethrough(), gfmStrikethroughFromMarkdown, gfmStrikethroughToMarkdown);\n}\n\n\nexport function remarkTaskListItem() {\n  addRemarkExtension(this, gfmTaskListItem, gfmTaskListItemFromMarkdown, gfmTaskListItemToMarkdown);\n}\n","import {visit} from 'unist-util-visit';\n\n/**\n * Add target=\"_blank\" to links.\n */\nexport function rehypeLinkTargetBlank() {\n  return tree => {\n    visit(tree, 'element', node => {\n      if (node.tagName === 'a' && !(node.properties.href || '#').startsWith('#')) {\n        node.properties.target = '_blank';\n        node.properties.rel = 'nofollow noopener noreferrer';\n      }\n    });\n  }\n}\n\n/**\n * Convert HTML attributes to inline CSS styles.\n */\nexport function rehypeConvertAttrsToStyle() {\n  const convertAttrs = {\n    'width': 'width', \n    'height': 'height'\n  };\n\n  return tree => {\n    visit(tree, 'element', node => {\n      for (const [attrName, styleName] of Object.entries(convertAttrs)) {\n        if (node.properties[attrName]) {\n          let style = (node.properties.style || '');\n          if (style && style[style.length - 1] !== ';') {\n            style += ';'\n          }\n          style += styleName + ':' + node.properties[attrName] + ';';\n          node.properties.style = style;\n          node.properties[attrName] = undefined;\n        }\n      }\n    });\n  }\n}\n\n\nexport function addClass(node, className) {\n  if (!node.properties.className) {\n    node.properties.className = [];\n  }  \n  if (Array.isArray(className)) {\n    node.properties.className.push(...className);\n  } else {\n    node.properties.className.push(className);\n  }\n}\n\n\nexport function rehypeRewriteImageSources({rewriteImageSource}) {\n  return tree => visit(tree, 'element', node => {\n    if (node.tagName === 'img' && node.properties.src && rewriteImageSource) {\n      node.properties.src = rewriteImageSource(node.properties.src);\n    }\n  });\n}\n\n\nexport function rehypeRewriteFileLinks({ rewriteFileUrl }) {\n  return tree => visit(tree, 'element', node => {\n    if (node.tagName === 'a' && node.properties?.href?.startsWith('/files/') && rewriteFileUrl) {\n      node.properties.href = rewriteFileUrl(node.properties.href);\n      node.properties.download = true;\n      addClass(node, ['file-download-preview', 'v-icon', 'mdi', 'mdi-file-download']);\n    }\n  });\n}\n\n\nexport function rehypeTemplates() {\n  return tree => visit(tree, 'element', node => {\n    if (node.tagName === 'template') {\n      node.children = node.content?.children || [];\n      node.tagName = 'span';\n    }\n  })\n}\n\n\n/**\n * Replace self-closing tags with a combination of start and end tag.\n */\nexport function rehypeRawFixSelfClosingTags() {\n  return tree => visit(tree, 'raw', (node) => {\n    console.log(node.value);\n    node.value = node.value.replaceAll(/<(?<tag>[a-zA-Z0-9-]+)(?<attrs>[^>]*)\\/>/g, \"<$<tag>$<attrs>></$<tag>>\");\n    console.log(node.value);\n  });\n}","import {codes} from 'micromark-util-symbol/codes.js';\nimport {factoryAttributes} from 'micromark-extension-directive/lib/factory-attributes.js';\nimport {parseEntities} from 'parse-entities';\nimport {visit} from 'unist-util-visit';\nimport { addRemarkExtension } from './helpers';\n\n\nfunction attrsSyntax() {\n  return {\n    name: 'attrs',\n    text: {\n      [codes.leftCurlyBrace]: {\n        tokenize: tokenizeAttributes,\n      }\n    }\n  };\n\n  function tokenizeAttributes(effects, ok, nok) {\n    // Always a `{`\n    return factoryAttributes(\n      effects,\n      ok,\n      nok,\n      'textAttributes',\n      'textAttributesMarker',\n      'textAttribute',\n      'textAttributeId',\n      'textAttributeClass',\n      'textAttributeName',\n      'textAttributeInitializerMarker',\n      'textAttributeValueLiteral',\n      'textAttributeValue',\n      'textAttributeValueMarker',\n      'textAttributeValueData'\n    )\n  }\n};\n\n\nfunction attrsFromMarkdown() {\n  return {\n    transforms: [transformAttributesAttachToElements],\n    enter: {\n      textAttributes: enterAttributes,\n    },\n    exit: {\n      textAttributes: exitAttributes,\n      textAttributeClassValue: exitAttributeClassValue,\n      textAttributeIdValue: exitAttributeIdValue,\n      textAttributeName: exitAttributeName,\n      textAttributeValue: exitAttributeValue,\n    }\n  };\n\n  function enterAttributes(token) {\n    this.setData('directiveAttributes', []);\n    this.enter({type: 'attributes', attrs: {}, attrsString: ''}, token);\n    this.buffer();\n  }\n\n  function exitAttributeIdValue(token) {\n    const list = this.getData('directiveAttributes');\n    list.push(['id', parseEntities(this.sliceSerialize(token))])\n  }\n\n  function exitAttributeClassValue(token) {\n    const list = this.getData('directiveAttributes');\n    list.push(['class', parseEntities(this.sliceSerialize(token))])\n  }\n\n  function exitAttributeValue(token) {\n    const list = this.getData('directiveAttributes');\n    list[list.length - 1][1] = parseEntities(this.sliceSerialize(token))\n  }\n\n  function exitAttributeName(token) {\n    // Attribute names in CommonMark are significantly limited, so character\n    // references can’t exist.\n    this.getData('directiveAttributes').push([this.sliceSerialize(token), ''])\n  }\n\n  function exitAttributes(token) {\n    const cleaned = {};\n    for (const attribute of this.getData('directiveAttributes')) {\n      if (attribute[0] === 'class' && cleaned.class) {\n        cleaned.class += ' ' + attribute[1];\n      } else {\n        cleaned[attribute[0]] = attribute[1];\n      }\n    }\n  \n    this.setData('directiveAttributes')\n    this.resume(); // Drop EOLs\n\n    const node = this.stack[this.stack.length - 1];\n    node.attrs = cleaned;\n    node.attrsString = this.sliceSerialize(token);\n    this.exit(token);\n  }\n\n  function transformAttributesAttachToElements(tree) {\n    // Attach attributes to elements or convert to text\n    visit(tree, (node, index, parent) => {\n      if (node.type === 'attributes') {\n        const prevNode = index > 0 ? parent.children[index - 1] : null;\n        if (prevNode && prevNode.type !== 'text') {\n          // Attach attributes to previous element e.g. ![img](img.png){width=\"50%\"}, **bold**{.styled}, but not \"**bold** {.not-styled}\"\n          prevNode.data = {...prevNode.data, hProperties: node.attrs};\n        } else if (['heading', 'tableCaption'].includes(parent.type)) {\n          // Attach attributes to parent element e.g. \"# Heading {#chapter-id}\"\n          parent.data = {...parent.data, hProperties: node.attrs};\n        } else {\n          // Could not attach to any node: convert attributes to text\n          node.type = 'text';\n          node.value = node.attrsString;\n          delete node.attrs;\n          delete node.attrsString;\n        }\n      }\n    });\n  }\n}\n\n\nfunction attrsToMarkdown() {\n  return {\n    handlers: {\n      attributes\n    }\n  };\n\n  function attributes(node, _, context) {\n    const exit = context.enter('attributes');\n    const value = node.attrsString || Object.entries(node.attrs).map(([k, v]) => {\n      if (k === 'id') { return '#' + v }\n      else if (k === 'class') { return v.split(' ').map(c => '.' + c).join(' ')}\n      else { return `${k}=${v}`; }\n    }).join(' ');\n    exit();\n    return value;\n  }\n}\n\nexport const remarkToRehypeAttrs = {\n  attributes(h, node) {\n    // Remove attributes nodes\n    return null;\n  }\n}\n\nexport function remarkAttrs() {\n  addRemarkExtension(this, attrsSyntax(), attrsFromMarkdown(), attrsToMarkdown());\n}\n\n","import { addRemarkExtension } from \"./helpers\";\nimport {checkQuote} from 'mdast-util-to-markdown/lib/util/check-quote.js'\nimport {containerPhrasing} from 'mdast-util-to-markdown/lib/util/container-phrasing.js'\nimport {track} from 'mdast-util-to-markdown/lib/util/track.js'\nimport {safe} from 'mdast-util-to-markdown/lib/util/safe.js'\nimport {all} from 'remark-rehype';\nimport {normalizeUri} from 'micromark-util-sanitize-uri';\n\n\nfunction figureFromMarkdown() {\n  // Extend default image formatter from mdast-util-from-markdown to support child markdown text\n  return {\n    enter: {\n      image: enterImage,\n    }, \n    exit: {\n      label: exitLabel,\n    }\n  };\n\n  function enterImage(token) {\n    this.enter({type: 'image', title: null, url: '', alt: null, children: []}, token);\n  }\n\n\n  /**\n   * Label for link or image\n   */\n  function exitLabel(token) {\n    const fragment = /** @type {Fragment} */ (this.stack[this.stack.length - 1]);\n    const value = this.resume();\n    const node =\n      /** @type {(Link|Image) & {identifier: string, label: string}} */ (\n        this.stack[this.stack.length - 1]\n      );\n\n    // Assume a reference.\n    this.setData('inReference', true);\n\n    // @ts-expect-error: Assume static phrasing content.\n    node.children = fragment.children;\n    if (node.type === 'image') {\n      node.alt = value;\n    }\n  }\n}\n\n\nfunction figureToMarkdown() {\n  image.peek = () => '!';\n\n  return {\n    handlers: {\n      image\n    },\n  };\n\n  function image(node, _, context, safeOptions) {\n    const quote = checkQuote(context);\n    const suffix = quote === '\"' ? 'Quote' : 'Apostrophe';\n    const exit = context.enter('image');\n    let subexit = context.enter('label');\n    const tracker = track(safeOptions);\n    let value = tracker.move('![');\n    value += tracker.move(\n      containerPhrasing(node, context, {\n        before: value,\n        after: '](',\n        ...tracker.current()\n      })\n    );\n    value += tracker.move('](');\n\n    subexit();\n\n    if (\n      // If there’s no url but there is a title…\n      (!node.url && node.title) ||\n      // If there are control characters or whitespace.\n      /[\\0- \\u007F]/.test(node.url)\n    ) {\n      subexit = context.enter('destinationLiteral');\n      value += tracker.move('<');\n      value += tracker.move(\n        safe(context, node.url, {before: value, after: '>', ...tracker.current()})\n      );\n      value += tracker.move('>');\n    } else {\n      // No whitespace, raw is prettier.\n      subexit = context.enter('destinationRaw');\n      value += tracker.move(\n        safe(context, node.url, {\n          before: value,\n          after: node.title ? ' ' : ')',\n          ...tracker.current()\n        })\n      );\n    }\n\n    subexit();\n\n    if (node.title) {\n      subexit = context.enter('title' + suffix);\n      value += tracker.move(' ' + quote);\n      value += tracker.move(\n        safe(context, node.title, {\n          before: value,\n          after: quote,\n          ...tracker.current()\n        })\n      );\n      value += tracker.move(quote);\n      subexit();\n    }\n\n    value += tracker.move(')');\n    exit();\n\n    return value;\n  }\n  \n}\n\n\nexport function remarkFigure() {\n  addRemarkExtension(this, {}, figureFromMarkdown(), figureToMarkdown());\n}\n\n\nexport const remarkToRehypeHandlersFigure = {\n  image(h, node) {\n    // only add attributes to <img> tag, not to <figure>\n    const attrs = (node.data || {}).hProperties || {};\n    if (!node.data) {\n      node.data = {};\n    }\n    node.data.hProperties = {};\n\n    return h(node, 'figure', [\n      h(node, 'img', {src: normalizeUri(node.url), alt: node.alt, ...attrs}),\n      ...(node.children.length > 0 ? [h(node, 'figcaption', all(h, node))] : [])\n    ]);\n  }\n};\n","import { gfmTable } from 'micromark-extension-gfm-table';\nimport { gfmTableFromMarkdown, gfmTableToMarkdown } from 'mdast-util-gfm-table';\nimport { addRemarkExtension } from './helpers';\nimport { visit } from 'unist-util-visit';\nimport { all } from 'remark-rehype';\nimport { containerPhrasing } from 'mdast-util-to-markdown/lib/util/container-phrasing.js'\n\n\nexport function remarkTables() {\n  addRemarkExtension(this, gfmTable, gfmTableFromMarkdown, gfmTableToMarkdown());\n}\n\n\nfunction tableCaptionFromMarkdown() {\n  return {\n    transforms: [transformTableCaption]\n  };\n\n  function transformTableCaption(tree) {\n    visit(tree, (node, index, parent) => {\n      if (node.type === 'table') {\n        const captionBlock = parent.children[index + 1];\n        if (captionBlock && captionBlock.type === 'paragraph' && captionBlock.children.length > 0 && captionBlock.children[0].type === 'text') {\n          const captionText = captionBlock.children[0];\n          let captionPrefixLength = 0;\n          if (captionText.value.startsWith(':')) {\n            captionPrefixLength = 1;\n          } else if (captionText.value.startsWith('Table:')) {\n            captionPrefixLength = 6;\n          }\n\n          \n          if (captionPrefixLength) {\n            const captionVal = captionText.value.slice(captionPrefixLength);\n            const captionValTrimmed = captionVal.trimStart();\n            captionPrefixLength += captionVal.length - captionValTrimmed.length;\n\n            captionText.value = captionText.value.slice(captionPrefixLength);\n            captionText.position.start.column += captionPrefixLength;\n            captionText.position.start.offset += captionPrefixLength;\n\n            // Mark block as table caption, but do not move caption into table (this is done when transforming to rehype)\n            captionBlock.type = 'tableCaption';\n          }\n        }\n      }\n    });\n  }\n}\n\n\nfunction tableCaptionToMarkdown() {\n  return {\n    handlers: {tableCaption},\n  };\n\n  function tableCaption(node, _, context, safeOptions) {\n    const exit = context.enter('tableCaption');\n    const subexit = context.enter('phrasing');\n    const value = 'Table: ' + containerPhrasing(node, context, safeOptions);\n    subexit();\n    exit();\n    return value;\n  }\n}\n\n\nexport function remarkTableCaptions() {\n  addRemarkExtension(this, {}, tableCaptionFromMarkdown(), tableCaptionToMarkdown());\n}\n\n\nexport const remarkToRehypeHandlersTableCaptions = {\n  tableCaption(h, node) {\n    return h(node, 'caption', all(h, node));\n  }\n};\n\nexport function rehypeTableCaptions() {\n  return tree =>\n    visit(tree, 'element', (node, index, parent) => {\n      if (node.tagName === 'caption') {\n        // Move table caption tag into HTML table\n        const tableNode1 = parent.children[index - 1];\n        const tableNode2 = parent.children[index - 2];\n        if (tableNode1 && tableNode1.tagName === 'table') {\n          tableNode1.children.push(node);\n          parent.children.splice(index, 1);\n        } else if (tableNode1 && tableNode1.type === 'text' && tableNode1.value === '\\n' && tableNode2.tagName === 'table') {\n          tableNode2.children.push(node);\n          parent.children.splice(index, 1);\n        }\n      }\n    });\n}","import { visit } from 'unist-util-visit';\nimport { addClass } from './rehypePlugins';\n\n\nexport function rehypeReferenceLink() {\n  return tree => visit(tree, 'element', (node, index, parent) => {\n    if (node.tagName === 'a' && node.properties.href && node.properties.href.startsWith('#')) {\n      node.tagName = 'ref';\n      node.properties.to = node.properties.href.substring(1);\n      delete node.properties.href;\n    }\n  });\n}\n\n\nexport function rehypeReferenceLinkPreview({ rewriteReferenceLink = null }) {\n  return tree => {\n    let refNodes = [];\n    let refTargets = {};\n\n    // Collect references and elements that can be references\n    visit(tree, 'element', (node, index, parent) => {\n      if (node.tagName === 'a' && node.properties.href && node.properties.href.startsWith('#')) {\n        refNodes.push(node);\n      }\n      if (node.properties.id) {\n        refTargets[node.properties.id] = {node, index, parent};\n      }\n    });\n\n    // Resolve references\n    if (refNodes.length > 0) {\n      for (const node of refNodes) {\n        const refId = node.properties.href.substring(1);\n\n        let refPreview = null;\n        // Known reference target (e.g. other finding)\n        if (!refPreview && rewriteReferenceLink) {\n          refPreview = rewriteReferenceLink(refId);\n        }\n\n        // Local reference target (e.g. figure in same markdown field)\n        if (!refPreview && refTargets[refId]) {\n          if (refTargets[refId].node.tagName === 'img' && \n              refTargets[refId].parent.tagName === 'figure' && \n              refTargets[refId].parent.children.some(cn => cn.tagName === 'figcaption')) {\n            refPreview = {\n              title: `[Figure #${refId}]`,\n            };\n          }\n          if (refTargets[refId].node.tagName === 'caption') {\n            refPreview = {\n              title: `[Table #${refId}]`,\n            };\n          }\n        }\n\n        // Unknown reference target\n        if (!refPreview) {\n          refPreview = {\n            title: `[Reference to #${refId}]`,\n          };\n        }\n\n        // Update reference node\n        addClass(node, 'ref');\n        if (refPreview.href) {\n          node.properties.href = refPreview.href;\n        }\n        if (refPreview.title && node.children.length === 0) {\n          node.children.push({type: 'text', value: refPreview.title});\n        }\n      }\n    }\n\n  }\n}\n\n","import { micromarkEventsToTree, parseMicromarkEvents } from './micromark-utils.js';\n\n\nfunction createBlockSeparator(pos) {\n  return {\n    type: 'annotatedTextBlockSeparator', \n    text: '', \n    children: [],\n    enter: {\n      type: 'annotatedTextBlockSeparator',\n      start: pos,\n      end: pos,\n    },\n    exit: {\n      type: 'annotatedTextBlockSeparator',\n      start: pos,\n      end: pos,\n    },\n  };\n}\n\nexport function extractLeafNodesFromMicromarkTree(tree, {interpretAsLeafNodes = [], interpretAsLeafNodesFns = {}, wrapTypesWithBlockSeparators = []}) {\n  const leafNodes = [];\n  collectLeafNodes(tree);\n  return leafNodes;\n\n  function collectLeafNodes(t) {\n    for (const n of t) {\n      const wrapWithSeparators = wrapTypesWithBlockSeparators.includes(n.type);\n      if (wrapWithSeparators) {\n        leafNodes.push(createBlockSeparator(n.enter.start));\n      }\n\n      if (n.children.length === 0 || interpretAsLeafNodes.includes(n.type) || interpretAsLeafNodesFns[n.type]?.(n)) {\n        leafNodes.push(n);\n      } else {\n        collectLeafNodes(n.children);\n      }\n\n      if (wrapWithSeparators) {\n        leafNodes.push(createBlockSeparator(n.exit.end));\n      }\n    }\n  } \n}\n\n\n\nfunction micromarkToAnnotatedText(text, events) {\n  const tree = micromarkEventsToTree(text, events);\n  // console.log('micromark tree', tree);\n\n  // Add separators between blocks, such that blocks are always interpreted as separate\n  for (let i = tree.length - 1; i >= 0; i--) {\n    tree.splice(i, 0, createBlockSeparator(tree[i].enter.start));\n  }\n\n  // extract leaf nodes of tree => this is a sequence of all the text tokens\n  const leafNodes = extractLeafNodesFromMicromarkTree(tree, {\n    interpretAsLeafNodes: ['codeFenced', 'codeText', 'textAttributes', 'inlineFootnote', 'table', 'resource', 'templateVariable'],\n    interpretAsLeafNodesFns: {\n      'labelText': n => n.children.length === 0,\n    },\n    wrapTypesWithBlockSeparators: ['image'],\n  });\n\n  // console.log('annotatedText.leafNodes', leafNodes)\n\n  // convert leaf nodes to annotatedText => either text or markup\n  // TODO: support table caption in micromark (instead of mdast)\n  const textTypes = ['data', 'lineEnding', 'lineEndingBlank'];\n  const markupTypesInterpretAs = {\n    'listItemMarker': '\\n\\n',\n    'codeFenced': '\\n\\n',\n    'annotatedTextBlockSeparator': '\\n\\n',\n    'codeText': '`code`',\n    'templateVariable': '`code`',\n    'labelText': '`code`',\n    'htmlTextData': '`code`',\n  };\n  const annotatedText = [];\n  for (const n of leafNodes) {\n    if (n.type === 'lineEnding') {\n      // Workaround for micromark bug: the end position of lineEnding elements is wrong (overlaps with next element)\n      annotatedText.push({\n        text: '\\n',\n        offset: n.enter.start.offset,\n      });\n    } else if (textTypes.includes(n.type)) {\n      annotatedText.push({\n        text: n.text,\n        offset: n.enter.start.offset,\n      });\n    } else {\n      annotatedText.push({\n        markup: n.text,\n        offset: n.enter.start.offset,\n        interpretAs: markupTypesInterpretAs[n.type] || '',\n      });\n    }\n  }\n  return annotatedText;\n}\n\n\nexport function annotatedTextParse() {\n  const micromarkExtensions = this.data('micromarkExtensions') || [];\n  this.Parser = parser;\n\n  function parser(text) {\n    const events = parseMicromarkEvents(text, {extensions: micromarkExtensions});\n    return micromarkToAnnotatedText(text, events);\n  }\n}","import { codes } from 'micromark-util-symbol/codes.js';\nimport { addRemarkExtension, assert } from './helpers';\n\n\nfunction templateVariableSyntax() {\n  return {\n    text: {\n      [codes.leftCurlyBrace]: {\n        tokenize: tokenizeTemplateVariable,\n      },\n    }\n  };\n\n  function tokenizeTemplateVariable(effects, ok, nok) {\n    let closeBraceCount = 0;\n    return start;\n\n    function start(code) {\n      assert(code === codes.leftCurlyBrace, 'expected `{`}');\n      effects.enter('templateVariable');\n      effects.consume(code);\n      return start2;\n    }\n    function start2(code) {\n      if (code !== codes.leftCurlyBrace) {\n        return nok(code);\n      }\n      effects.consume(code);\n      return between;\n    }\n    function between(code) {\n      if (code === codes.eof) {\n        return nok(code);\n      } else if (code === codes.rightCurlyBrace) {\n        // Closing sequence or part of content?\n        closeBraceCount = 0;\n        return sequenceClose(code);\n      } else {\n        effects.consume(code);\n        return between;\n      }\n    }\n    function sequenceClose(code) {\n      if (code === codes.rightCurlyBrace) {\n        effects.consume(code);\n        closeBraceCount += 1;\n\n        if (closeBraceCount === 2) {\n          // Dummy close events, rewritten in resolveTemplateVariable\n          effects.exit('templateVariable');\n          return ok(code);\n        } else {\n          return sequenceClose;\n        }\n      } else {\n        return between(code);\n      }\n    }\n  }\n\n}\n\n\nfunction templateVariableFromMarkdown() {\n  return {\n    enter: {\n      templateVariable: enterTemplateVariable,\n    },\n    exit: {\n      templateVariable: exitTemplateVariable,\n    }\n  };\n\n  function enterTemplateVariable(token) {\n    this.enter({type: 'templateVariable', value: ''}, token);\n  }\n  function exitTemplateVariable(token) {\n    const node = this.stack[this.stack.length - 1];\n    node.value = this.sliceSerialize(token); \n    this.exit(token);\n  }\n}\n\nfunction templateVariableToMarkdown() {\n  return {\n    handlers: {\n      templateVariable,\n    } \n  };\n\n  function templateVariable(node, _, context) {\n    const exit = context.enter('templateVariable');\n    const value = node.value;\n    exit();\n    return value;\n  }\n}\n\n\nexport function remarkTemplateVariables() {\n  addRemarkExtension(this, templateVariableSyntax(), templateVariableFromMarkdown(), templateVariableToMarkdown());\n}\n","import { codes } from 'micromark-util-symbol/codes.js';\nimport { addRemarkExtension } from \"./helpers\";\nimport { containerPhrasing } from 'mdast-util-to-markdown/lib/util/container-phrasing.js'\n\n\nfunction todoSyntax() {\n  return {\n    name: 'todo',\n    text: {\n      [codes.uppercaseT]: {\n        tokenize: tokenizeTodo,\n      },\n      [codes.lowercaseT]: {\n        tokenize: tokenizeTodo,\n      },\n    }\n  };\n\n  function tokenizeTodo(effects, ok, nok) {\n    return startT;\n\n    function startT(code) {\n      effects.enter('todo');\n      effects.enter('data');\n      effects.consume(code);\n      return middleO;\n    }\n    function middleO(code) {\n      if (![codes.uppercaseO, codes.lowercaseO].includes(code)) {\n        return nok(code);\n      }\n      effects.consume(code);\n      return middleDorDash;\n    }\n    function middleDorDash(code) {\n      if (code == codes.dash) {\n        effects.consume(code);\n        return middleD;\n      }\n      return middleD(code);\n    }\n    function middleD(code) {\n      if (![codes.uppercaseD, codes.lowercaseD].includes(code)) {\n        return nok(code);\n      }\n      effects.consume(code);\n      return endO;\n    }\n    function endO(code) {\n      if (![codes.uppercaseO, codes.lowercaseO].includes(code)) {\n        return nok(code);\n      }\n      effects.consume(code);\n      effects.exit('data');\n      effects.exit('todo');\n      return ok(code);\n    }\n  }\n}\n\n\nfunction todoFromMarkdown() {\n  return {\n    enter: {\n      todo: enterTodo,\n    },\n    exit: {\n      todo: exitTodo,\n    }\n  };\n\n  function enterTodo(token) {\n    this.enter({type: 'todo', children: [], data: {hName: 'span', hProperties: {class: 'todo'}}}, token);\n  }\n  function exitTodo(token) {\n    this.exit(token);\n  }\n}\n\nfunction todoToMarkdown() {\n  return {\n    handlers: {\n      todo,\n    } \n  };\n\n  function todo(node, _, context, safeOptions) {\n    const exit = context.enter('todo');\n    const value = containerPhrasing(node, context, safeOptions);\n    exit();\n    return value;\n  }\n}\n\n\nexport function remarkTodoMarker() {\n  addRemarkExtension(this, todoSyntax(), todoFromMarkdown(), todoToMarkdown());\n}\n","import { visit } from 'unist-util-visit';\nimport { toString } from 'hast-util-to-string';\nimport { camelCase } from 'lodash';\nimport { lowlight } from 'lowlight/lib/all'\nimport { unified } from 'unified';\nimport rehypeParse from 'rehype-parse';\nimport { addClass } from './rehypePlugins';\n\n\nfunction getLanguage(node) {\n  return (node.properties?.className || [])\n    .filter(c => c.startsWith('language-'))\n    .map(c => c.slice(9).toLowerCase())\n    [0] || 'none';\n}\n\nfunction highlightSyntax(code, node) {\n  const language = getLanguage(node);\n  \n  addClass(node, 'hljs');\n  try {\n    return lowlight.highlight(language, code);\n  } catch (error) {\n    if (!/Unknown language/.test(error)) {\n      throw error;\n    }\n  }\n  return {\n    type: 'root',\n    children: [{type: 'text', value: code}]\n  };\n}\n\nfunction parseMeta(metaLine) {\n  const meta = Object.fromEntries(\n    Array.from(metaLine.matchAll(/(?<name>[a-zA-Z0-9\\-]+)(?:=\"(?<value>[^\"]+)\")?/g))\n      .map(m => [camelCase(m.groups.name), m.groups.value || null])\n  );\n  if (meta.highlightManual !== undefined) {\n    meta.highlightManual = meta.highlightManual || '§';\n  }\n  if (meta.lineNumbers !== undefined) {\n    meta.lineNumbers = Number.parseInt(meta.lineNumbers) || 1;\n  }\n  return meta;\n}\n\nfunction parseManualHighlightAreas(code, meta) {\n  const highlightInfos = []\n  if (!meta.highlightManual || meta.highlightManual.length !== 1) {\n      return {code, highlightInfos};\n  }\n\n  const highlightMarkerRe = `\\\\${meta.highlightManual}[^\\\\${meta.highlightManual}\\\\R]*\\\\${meta.highlightManual}`;\n  const highlightedAreaRe = new RegExp(`(${highlightMarkerRe})([^\\\\${meta.highlightManual}]*)(${highlightMarkerRe})`, 'g');\n  const parts = code.split(highlightedAreaRe);\n  let codeNew = '';\n  for (let i = 0; i < parts.length; i += 4) {\n    codeNew += parts[i];\n    if (i + 3 < parts.length) {\n      const highlightInfo = {\n        startMarker: parts[i + 1].slice(1, parts[i + 1].length - 1),\n        startMarkerPos: codeNew.length,\n        endMarker: parts[i + 3].slice(1, parts[i + 3].length - 1),\n        endMarkerPos: 0,\n      };\n      codeNew += parts[i + 2];\n      highlightInfo.endMarkerPos = codeNew.length;\n      highlightInfos.push(highlightInfo);\n    }\n  }\n\n  return {code: codeNew, highlightInfos};\n}\n\n\nfunction splitTreeAtPosition(tree, splitPos) {\n  return {\n    ...tree,\n    children: processChildren(tree.children, 0).flat(),\n  }\n\n  function processChildren(children, currentPos) {\n    const childrenLeft = [];\n    const childrenRight = [];\n\n    for (const c of children) {\n      for (const pc of processNode(c, currentPos)) {\n        if (currentPos < splitPos) {\n          childrenLeft.push(pc);\n        } else {\n          childrenRight.push(pc);\n        }\n        currentPos += toString(pc).length;\n      }\n    }\n    return [childrenLeft, childrenRight];\n  }\n\n  function processNode(node, currentPos) {\n    const nodeLength = toString(node).length;\n    if (currentPos < splitPos && currentPos + nodeLength > splitPos) {\n      if (node.type === 'text') {\n        return [\n          {...node, value: node.value.slice(0, splitPos - currentPos)},\n          {...node, value: node.value.slice(splitPos - currentPos)},\n        ];\n      } else {\n        const [childrenLeft, childrenRight] = processChildren(node.children, currentPos)\n        return [\n          {...node, children: childrenLeft},\n          {...node, children: childrenRight},\n        ];\n      }\n    }\n\n    return [node];\n  }\n}\n\n\nfunction wrapTreeAreas(tree, wrapInfos) {\n  for (const wi of wrapInfos) {\n    // Split highlighted HTML tree at the positions where manual highlight markers will be inserted\n    tree = splitTreeAtPosition(tree, wi.startMarkerPos);\n    tree = splitTreeAtPosition(tree, wi.endMarkerPos);\n  }\n\n  // Insert manual highlighting markers\n  const children = [];\n  for (let ci = 0, wii = 0, currentPos = 0; ci < tree.children.length; currentPos += toString(tree.children[ci]).length, ci++) {\n    const c = tree.children[ci];\n    let wi = wrapInfos[wii];\n\n    if (wi && (currentPos >= wi.startMarkerPos && currentPos + toString(c).length <= wi.endMarkerPos)) {\n      wi.children = (wi.children || []).concat([c]);\n\n      if (currentPos + toString(c).length == wi.endMarkerPos) {\n        visit(wi.markerTree, 'element', (node, index, parent) => {\n          if (node.tagName === 'content-placeholder') {\n            parent.children.splice(index, 1, ...wi.children);\n          }\n        });\n        children.push(...wi.markerTree.children);\n        wii += 1;\n      }\n    } else if (wi && (currentPos === wi.startMarkerPos && currentPos === wi.endMarkerPos)) {\n      visit(wi.markerTree, 'element', (node, index, parent) => {\n        if (node.tagName === 'content-placeholder') {\n          parent.children.splice(index, 1);\n        }\n      });\n      children.push(...wi.markerTree.children);\n      children.push(c);\n      wii += 1;\n    } else {\n      children.push(c);\n    }\n  }\n\n  tree.children = children;\n  return tree;\n}\n\n\nfunction applyManualHighlighting(tree, highlightInfos) {\n  for (const hi of highlightInfos) {\n    // Parse marker as HTML\n    hi.markerTree = unified()\n      .use(rehypeParse, {fragment: true})\n      .parse((hi.startMarker || '<mark>') + '<content-placeholder />' + (hi.endMarker || '</mark>'))\n  }\n\n  return wrapTreeAreas(tree, highlightInfos);\n}\n\n\nfunction splitIntoLines(tree) {\n  const lines = [];\n  let currentPos = 0;\n  for (const line of toString(tree).split('\\n')) {\n    lines.push({\n      startMarkerPos: currentPos,\n      endMarkerPos: currentPos + line.length,\n      markerTree: {\n        type: 'root',\n        children: [\n          {\n            type: 'element',\n            tagName: 'span',\n            properties: {\n              className: ['code-block-line'],\n              dataLineNumber: lines.length + 1\n            },\n            children: [{type: 'element', tagName: 'content-placeholder', children: []}],\n          }\n        ]\n      }\n    });\n    currentPos += line.length + 1;\n  }\n  \n  return wrapTreeAreas(tree, lines);\n}\n\n\nexport function rehypeHighlightCode() {\n  return tree => visit(tree, 'element', (node, index, parent) => {\n    if (node.tagName === 'code' && parent.tagName === 'pre') {\n      addClass(parent, 'code-block');\n\n      const meta = parseMeta(node.data?.meta || '');\n\n      // Manual highlighting\n      const {code, highlightInfos} = parseManualHighlightAreas(toString(node), meta);\n\n      // Syntax highlighting\n      let tree = highlightSyntax(code, node);\n\n      // Add manual highighting\n      if (highlightInfos.length > 0) {\n        tree = applyManualHighlighting(tree, highlightInfos);\n      }\n\n      // Add line infos\n      tree = splitIntoLines(tree);\n\n      node.children = tree.children;\n    } else if (node.tagName === 'code') {\n      addClass(node, 'code-inline');\n    }\n  }); \n}\n","/**\n * @typedef {import('micromark-util-types').Construct} Construct\n * @typedef {import('micromark-util-types').Resolver} Resolver\n * @typedef {import('micromark-util-types').Tokenizer} Tokenizer\n * @typedef {import('micromark-util-types').TokenizeContext} TokenizeContext\n * @typedef {import('micromark-util-types').Event} Event\n * @typedef {import('micromark-util-types').Token} Token\n * @typedef {import('micromark-util-types').State} State\n */\n\nimport {factoryDestination} from 'micromark-factory-destination'\nimport {factoryLabel} from 'micromark-factory-label'\nimport {factoryTitle} from 'micromark-factory-title'\nimport {factoryWhitespace} from 'micromark-factory-whitespace'\nimport {markdownLineEndingOrSpace} from 'micromark-util-character'\nimport {push, splice} from 'micromark-util-chunked'\nimport {normalizeIdentifier} from 'micromark-util-normalize-identifier'\nimport {resolveAll} from 'micromark-util-resolve-all'\nimport {codes} from 'micromark-util-symbol/codes.js'\nimport {constants} from 'micromark-util-symbol/constants.js'\nimport {types} from 'micromark-util-symbol/types.js'\nimport { addRemarkExtension, assert } from './helpers'\n\n\n/** @type {Construct} */\nconst labelEnd = {\n  name: 'labelEndCustom',\n  tokenize: tokenizeLabelEnd,\n  resolveTo: resolveToLabelEnd,\n  resolveAll: resolveAllLabelEnd\n}\n\n\n/** @type {Construct} */\nconst resourceConstruct = {tokenize: tokenizeResource}\n/** @type {Construct} */\nconst fullReferenceConstruct = {tokenize: tokenizeFullReference}\n/** @type {Construct} */\nconst collapsedReferenceConstruct = {tokenize: tokenizeCollapsedReference}\n\n/** @type {Resolver} */\nfunction resolveAllLabelEnd(events) {\n  let index = -1\n\n  while (++index < events.length) {\n    const token = events[index][1]\n\n    if (\n      token.type === types.labelImage ||\n      token.type === types.labelLink ||\n      token.type === types.labelEnd ||\n      token.type === 'inlineFootnoteStart' ||\n      token.type === 'inlineFootnoteEnd'\n    ) {\n      // Remove the marker.\n      events.splice(index + 1, (token.type === types.labelImage || token.type === 'inlineFootnoteStart') ? 4 : 2)\n      token.type = types.data\n      index++\n    }\n  }\n\n  return events\n}\n\n/** @type {Resolver} */\nfunction resolveToLabelEnd(events, context) {\n  let index = events.length\n  let offset = 0\n  /** @type {Token} */\n  let token\n  /** @type {number|undefined} */\n  let open\n  /** @type {number|undefined} */\n  let close\n  /** @type {Array<Event>} */\n  let media\n\n  // Find an opening.\n  while (index--) {\n    token = events[index][1]\n\n    if (open) {\n      // If we see another link, or inactive link label, we’ve been here before.\n      if (\n        token.type === types.link ||\n        (token.type === types.labelLink && token._inactive)\n      ) {\n        break\n      }\n\n      // Mark other link openings as inactive, as we can’t have links in\n      // links.\n      if (events[index][0] === 'enter' && token.type === types.labelLink) {\n        token._inactive = true\n      }\n    } else if (close) {\n      if (\n        events[index][0] === 'enter' &&\n        (token.type === types.labelImage || token.type === types.labelLink || token.type === 'inlineFootnoteStart') &&\n        !token._labelEnd_balanced\n      ) {\n        open = index\n\n        if (token.type !== types.labelLink) {\n          offset = 2\n          break\n        }\n      }\n    } else if (token.type === types.labelEnd || token.type === 'inlineFootnoteEnd') {\n      close = index\n    }\n  }\n\n  assert(open !== undefined, '`open` is supposed to be found')\n  assert(close !== undefined, '`close` is supposed to be found')\n\n  const group = {\n    type: events[open][1].type === types.labelLink ? types.link : types.image,\n    start: Object.assign({}, events[open][1].start),\n    end: Object.assign({}, events[events.length - 1][1].end)\n  }\n\n  const label = {\n    type: types.label,\n    start: Object.assign({}, events[open][1].start),\n    end: Object.assign({}, events[close][1].end)\n  }\n\n  const text = {\n    type: types.labelText,\n    start: Object.assign({}, events[open + offset + 2][1].end),\n    end: Object.assign({}, events[close - 2][1].start)\n  }\n\n  media = [\n    ['enter', group, context],\n    ['enter', label, context]\n  ]\n\n  // Opening marker.\n  media = push(media, events.slice(open + 1, open + offset + 3))\n\n  // Text open.\n  media = push(media, [['enter', text, context]])\n\n  // Between.\n  media = push(\n    media,\n    resolveAll(\n      context.parser.constructs.insideSpan.null,\n      events.slice(open + offset + 4, close - 3),\n      context\n    )\n  )\n\n  // Text close, marker close, label close.\n  media = push(media, [\n    ['exit', text, context],\n    events[close - 2],\n    events[close - 1],\n    ['exit', label, context]\n  ])\n\n  // Reference, resource, or so.\n  media = push(media, events.slice(close + 1))\n\n  // Media close.\n  media = push(media, [['exit', group, context]])\n\n  splice(events, open, events.length, media)\n\n  return events\n}\n\n/**\n * @this {TokenizeContext}\n * @type {Tokenizer}\n */\nfunction tokenizeLabelEnd(effects, ok, nok) {\n  const self = this\n  let index = self.events.length\n  /** @type {Token} */\n  let labelStart\n  /** @type {boolean} */\n  let defined\n\n  // Find an opening.\n  while (index--) {\n    if (\n      (self.events[index][1].type === types.labelImage ||\n        self.events[index][1].type === types.labelLink ||\n        self.events[index][1].type === 'inlineFootnoteStart') &&\n      !self.events[index][1]._labelEnd_balanced\n    ) {\n      labelStart = self.events[index][1]\n      break\n    }\n  }\n\n  return start\n\n  /**\n   * Start of label end.\n   *\n   * ```markdown\n   * > | [a](b) c\n   *       ^\n   * > | [a][b] c\n   *       ^\n   * > | [a][] b\n   *       ^\n   * > | [a] b\n   * ```\n   *\n   * @type {State}\n   */\n  function start(code) {\n    assert(code === codes.rightSquareBracket, 'expected `]`')\n\n    if (!labelStart) {\n      return nok(code)\n    }\n\n    // It’s a balanced bracket, but contains a link.\n    if (labelStart._inactive) return balanced(code)\n\n    defined = self.parser.defined.includes(\n      normalizeIdentifier(\n        self.sliceSerialize({start: labelStart.end, end: self.now()})\n      )\n    )\n    effects.enter(types.labelEnd)\n    effects.enter(types.labelMarker)\n    effects.consume(code)\n    effects.exit(types.labelMarker)\n    effects.exit(types.labelEnd)\n    return afterLabelEnd\n  }\n\n  /**\n   * After `]`.\n   *\n   * ```markdown\n   * > | [a](b) c\n   *       ^\n   * > | [a][b] c\n   *       ^\n   * > | [a][] b\n   *       ^\n   * > | [a] b\n   *       ^\n   * ```\n   *\n   * @type {State}\n   */\n  function afterLabelEnd(code) {\n    // Resource (`[asd](fgh)`)?\n    if (code === codes.leftParenthesis) {\n      return effects.attempt(\n        resourceConstruct,\n        ok,\n        defined ? ok : balanced\n      )(code)\n    }\n\n    // Full (`[asd][fgh]`) or collapsed (`[asd][]`) reference?\n    if (code === codes.leftSquareBracket) {\n      return effects.attempt(\n        fullReferenceConstruct,\n        ok,\n        defined\n          ? effects.attempt(collapsedReferenceConstruct, ok, balanced)\n          : balanced\n      )(code)\n    }\n\n    // Shortcut (`[asd]`) reference?\n    return defined ? ok(code) : balanced(code)\n  }\n\n  /**\n   * Done, it’s nothing.\n   *\n   * There was an okay opening, but we didn’t match anything.\n   *\n   * ```markdown\n   * > | [a](b c\n   *        ^\n   * > | [a][b c\n   *        ^\n   * > | [a] b\n   *        ^\n   * ```\n   *\n   * @type {State}\n   */\n  function balanced(code) {\n    labelStart._labelEnd_balanced = true\n    return nok(code)\n  }\n}\n\n/**\n * @this {TokenizeContext}\n * @type {Tokenizer}\n */\nfunction tokenizeResource(effects, ok, nok) {\n  return start\n\n  /**\n   * Before a resource, at `(`.\n   *\n   * ```markdown\n   * > | [a](b) c\n   *        ^\n   * ```\n   *\n   * @type {State}\n   */\n  function start(code) {\n    assert(code === codes.leftParenthesis, 'expected left paren')\n    effects.enter(types.resource)\n    effects.enter(types.resourceMarker)\n    effects.consume(code)\n    effects.exit(types.resourceMarker)\n    return factoryWhitespace(effects, open)\n  }\n\n  /**\n   * At the start of a resource, after optional whitespace.\n   *\n   * ```markdown\n   * > | [a](b) c\n   *         ^\n   * ```\n   *\n   * @type {State}\n   */\n  function open(code) {\n    if (code === codes.rightParenthesis) {\n      return end(code)\n    }\n\n    return factoryDestination(\n      effects,\n      destinationAfter,\n      nok,\n      types.resourceDestination,\n      types.resourceDestinationLiteral,\n      types.resourceDestinationLiteralMarker,\n      types.resourceDestinationRaw,\n      types.resourceDestinationString,\n      constants.linkResourceDestinationBalanceMax\n    )(code)\n  }\n\n  /**\n   * In a resource, after a destination, before optional whitespace.\n   *\n   * ```markdown\n   * > | [a](b) c\n   *          ^\n   * ```\n   *\n   * @type {State}\n   */\n  function destinationAfter(code) {\n    return markdownLineEndingOrSpace(code)\n      ? factoryWhitespace(effects, between)(code)\n      : end(code)\n  }\n\n  /**\n   * In a resource, after a destination, after whitespace.\n   *\n   * ```markdown\n   * > | [a](b ) c\n   *           ^\n   * ```\n   *\n   * @type {State}\n   */\n  function between(code) {\n    if (\n      code === codes.quotationMark ||\n      code === codes.apostrophe ||\n      code === codes.leftParenthesis\n    ) {\n      return factoryTitle(\n        effects,\n        factoryWhitespace(effects, end),\n        nok,\n        types.resourceTitle,\n        types.resourceTitleMarker,\n        types.resourceTitleString\n      )(code)\n    }\n\n    return end(code)\n  }\n\n  /**\n   * In a resource, at the `)`.\n   *\n   * ```markdown\n   * > | [a](b) d\n   *          ^\n   * ```\n   *\n   * @type {State}\n   */\n  function end(code) {\n    if (code === codes.rightParenthesis) {\n      effects.enter(types.resourceMarker)\n      effects.consume(code)\n      effects.exit(types.resourceMarker)\n      effects.exit(types.resource)\n      return ok\n    }\n\n    return nok(code)\n  }\n}\n\n/**\n * @this {TokenizeContext}\n * @type {Tokenizer}\n */\nfunction tokenizeFullReference(effects, ok, nok) {\n  const self = this\n\n  return start\n\n  /**\n   * In a reference (full), at the `[`.\n   *\n   * ```markdown\n   * > | [a][b] d\n   *        ^\n   * ```\n   *\n   * @type {State}\n   */\n  function start(code) {\n    assert(code === codes.leftSquareBracket, 'expected left bracket')\n    return factoryLabel.call(\n      self,\n      effects,\n      afterLabel,\n      nok,\n      types.reference,\n      types.referenceMarker,\n      types.referenceString\n    )(code)\n  }\n\n  /**\n   * In a reference (full), after `]`.\n   *\n   * ```markdown\n   * > | [a][b] d\n   *          ^\n   * ```\n   *\n   * @type {State}\n   */\n  function afterLabel(code) {\n    return self.parser.defined.includes(\n      normalizeIdentifier(\n        self.sliceSerialize(self.events[self.events.length - 1][1]).slice(1, -1)\n      )\n    )\n      ? ok(code)\n      : nok(code)\n  }\n}\n\n/**\n * @this {TokenizeContext}\n * @type {Tokenizer}\n */\nfunction tokenizeCollapsedReference(effects, ok, nok) {\n  return start\n\n  /**\n   * In a reference (collapsed), at the `[`.\n   *\n   * > 👉 **Note**: we only get here if the label is defined.\n   *\n   * ```markdown\n   * > | [a][] d\n   *        ^\n   * ```\n   *\n   * @type {State}\n   */\n  function start(code) {\n    assert(code === codes.leftSquareBracket, 'expected left bracket')\n    effects.enter(types.reference)\n    effects.enter(types.referenceMarker)\n    effects.consume(code)\n    effects.exit(types.referenceMarker)\n    return open\n  }\n\n  /**\n   * In a reference (collapsed), at the `]`.\n   *\n   * > 👉 **Note**: we only get here if the label is defined.\n   *\n   * ```markdown\n   * > | [a][] d\n   *         ^\n   * ```\n   *\n   *  @type {State}\n   */\n  function open(code) {\n    if (code === codes.rightSquareBracket) {\n      effects.enter(types.referenceMarker)\n      effects.consume(code)\n      effects.exit(types.referenceMarker)\n      effects.exit(types.reference)\n      return ok\n    }\n\n    return nok(code)\n  }\n}\n\n\n\nexport const labelEndSyntax = {\n  text: {\n    [codes.rightSquareBracket]: labelEnd,\n  }\n};\n\n\n","import { addRemarkExtension } from \"./helpers\";\nimport { labelEndSyntax } from \"./label-end\";\n\n\nexport function modifiedCommonmarkFeatures() {\n  // Disable indented code blocks to not detect indented markdown as code blocks.\n  addRemarkExtension(this, {disable: {null: ['codeIndented']}});\n\n  // Override default labelEnd handler to support parsing nested labels in image captions and footnotes.\n  addRemarkExtension(this, {disable: {null: ['labelEnd']}});\n  addRemarkExtension(this, labelEndSyntax);\n}","\nimport { unified } from 'unified';\nimport remarkParse from 'remark-parse';\nimport remarkRehype from 'remark-rehype';\nimport rehypeStringify from 'rehype-stringify';\nimport rehypeRaw from 'rehype-raw';\nimport remarkStringify from 'remark-stringify';\nimport rehypeSanitize, { defaultSchema } from 'rehype-sanitize';\nimport { merge } from 'lodash';\nimport 'highlight.js/styles/default.css';\n\nimport { remarkFootnotes, remarkToRehypeHandlersFootnotes, rehypeFootnoteSeparator, rehypeFootnoteSeparatorPreview } from './mdext/footnotes.js';\nimport { remarkStrikethrough, remarkTaskListItem } from './mdext/gfm.js';\nimport { rehypeConvertAttrsToStyle, rehypeLinkTargetBlank, rehypeRewriteImageSources, rehypeRewriteFileLinks, rehypeTemplates, rehypeRawFixSelfClosingTags } from './mdext/rehypePlugins.js';\nimport { remarkAttrs, remarkToRehypeAttrs } from './mdext/attrs.js';\nimport { remarkFigure, remarkToRehypeHandlersFigure } from './mdext/image.js';\nimport { remarkTables, remarkTableCaptions, remarkToRehypeHandlersTableCaptions, rehypeTableCaptions } from './mdext/tables.js';\nimport { rehypeReferenceLink, rehypeReferenceLinkPreview } from './mdext/reference.js';\nimport { annotatedTextParse } from './editor/annotatedtext.js';\nimport { remarkTemplateVariables } from './mdext/templates.js';\nimport { remarkTodoMarker } from './mdext/todo.js';\nimport { rehypeHighlightCode } from './mdext/codeHighlight.js';\nimport { modifiedCommonmarkFeatures } from './mdext/modified-commonmark.js';\n\n\nconst rehypeSanitizeSchema = merge({}, defaultSchema, {\n  allowComments: true,\n  clobberPrefix: null,\n  tagNames: ['footnote', 'template', 'ref', 'pagebreak', 'markdown', 'u'].concat(defaultSchema.tagNames),\n  attributes: {\n    '*': ['className', 'style', 'data*', 'v-if', 'v-for', 'v-bind', 'v-on'].concat(defaultSchema.attributes['*']),\n    'a': ['download'].concat(defaultSchema.attributes['a']),\n    'ref': ['to', ':to'],\n    'markdown': ['text', ':text'],\n  }\n});\n\n\nexport function markdownParser() {\n  return unified()\n    .use(modifiedCommonmarkFeatures)\n    .use(remarkFootnotes)\n    .use(remarkTables)\n    .use(remarkTableCaptions)\n    .use(remarkStrikethrough)\n    .use(remarkTaskListItem)\n    .use(remarkTemplateVariables)\n    .use(remarkAttrs)\n    .use(remarkFigure)\n    .use(remarkTodoMarker);\n}\n\n\nexport function formatMarkdown(text) {\n  const md = markdownParser()\n    .use(remarkParse)\n    .use(remarkStringify, {\n      fence: '`',\n      fences: true,\n      bullet: '*',\n      strong: '*',\n      emphasis: '_',\n    });\n  return md.processSync(text).value;\n}\n\nexport function renderMarkdownToHtml(text, {preview = false, rewriteFileSource = null, rewriteReferenceLink = null} = {}) {\n  const md = markdownParser()\n      .use(remarkParse)\n      .use(remarkRehype, { \n        allowDangerousHtml: true, \n        footnoteLabelTagName: 'h4',\n        handlers: {\n          ...(preview ? {} : remarkToRehypeHandlersFootnotes),\n          ...remarkToRehypeHandlersFigure,\n          ...remarkToRehypeHandlersTableCaptions,\n          ...remarkToRehypeAttrs,\n        }\n      })\n      .use(rehypeTableCaptions)\n      .use(rehypeHighlightCode)\n      .use(rehypeRawFixSelfClosingTags)\n      .use(rehypeRaw)\n      .use(rehypeConvertAttrsToStyle)\n      .use(rehypeTemplates)\n      .use(preview ? rehypeFootnoteSeparatorPreview : rehypeFootnoteSeparator)\n      .use(preview ? rehypeReferenceLinkPreview : rehypeReferenceLink, {rewriteReferenceLink})\n      .use(rehypeRewriteImageSources, {rewriteImageSource: rewriteFileSource})\n      .use(rehypeRewriteFileLinks, {rewriteFileUrl: rewriteFileSource})\n      .use(rehypeLinkTargetBlank)\n      .use(rehypeSanitize, rehypeSanitizeSchema)\n      .use(rehypeStringify);\n\n    // const mdAst = md.parse(text);\n    // console.log('MarkdownAST', mdAst);\n    // const rehypeAst = md.runSync(mdAst);\n    // console.log('RehypeAST', rehypeAst);\n    // const mdHtml = md.stringify(rehypeAst);\n    // console.log('HTML', mdHtml);\n    const mdHtml = md.processSync(text).value;\n    return mdHtml;\n}\n\n\nexport function markdownToAnnotatedText(text) {\n  const md = markdownParser()\n    .use(annotatedTextParse);\n  const at = md.parse(text);\n  // console.log('AnnotatedText', at);\n  return at;\n}\n","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"preview\",domProps:{\"innerHTML\":_vm._s(_vm.renderedMarkdown)}})\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { Decoration, showPanel, EditorView, ViewPlugin, logException, gutter, showTooltip, getPanel, WidgetType, hoverTooltip, GutterMarker } from '@codemirror/view';\nimport { StateEffect, StateField, Facet, combineConfig, RangeSet } from '@codemirror/state';\nimport elt from 'crelt';\n\nclass SelectedDiagnostic {\n    constructor(from, to, diagnostic) {\n        this.from = from;\n        this.to = to;\n        this.diagnostic = diagnostic;\n    }\n}\nclass LintState {\n    constructor(diagnostics, panel, selected) {\n        this.diagnostics = diagnostics;\n        this.panel = panel;\n        this.selected = selected;\n    }\n    static init(diagnostics, panel, state) {\n        // Filter the list of diagnostics for which to create markers\n        let markedDiagnostics = diagnostics;\n        let diagnosticFilter = state.facet(lintConfig).markerFilter;\n        if (diagnosticFilter)\n            markedDiagnostics = diagnosticFilter(markedDiagnostics);\n        let ranges = Decoration.set(markedDiagnostics.map((d) => {\n            // For zero-length ranges or ranges covering only a line break, create a widget\n            return d.from == d.to || (d.from == d.to - 1 && state.doc.lineAt(d.from).to == d.from)\n                ? Decoration.widget({\n                    widget: new DiagnosticWidget(d),\n                    diagnostic: d\n                }).range(d.from)\n                : Decoration.mark({\n                    attributes: { class: \"cm-lintRange cm-lintRange-\" + d.severity },\n                    diagnostic: d\n                }).range(d.from, d.to);\n        }), true);\n        return new LintState(ranges, panel, findDiagnostic(ranges));\n    }\n}\nfunction findDiagnostic(diagnostics, diagnostic = null, after = 0) {\n    let found = null;\n    diagnostics.between(after, 1e9, (from, to, { spec }) => {\n        if (diagnostic && spec.diagnostic != diagnostic)\n            return;\n        found = new SelectedDiagnostic(from, to, spec.diagnostic);\n        return false;\n    });\n    return found;\n}\nfunction hideTooltip(tr, tooltip) {\n    return !!(tr.effects.some(e => e.is(setDiagnosticsEffect)) || tr.changes.touchesRange(tooltip.pos));\n}\nfunction maybeEnableLint(state, effects) {\n    return state.field(lintState, false) ? effects : effects.concat(StateEffect.appendConfig.of([\n        lintState,\n        EditorView.decorations.compute([lintState], state => {\n            let { selected, panel } = state.field(lintState);\n            return !selected || !panel || selected.from == selected.to ? Decoration.none : Decoration.set([\n                activeMark.range(selected.from, selected.to)\n            ]);\n        }),\n        hoverTooltip(lintTooltip, { hideOn: hideTooltip }),\n        baseTheme\n    ]));\n}\n/**\nReturns a transaction spec which updates the current set of\ndiagnostics, and enables the lint extension if if wasn't already\nactive.\n*/\nfunction setDiagnostics(state, diagnostics) {\n    return {\n        effects: maybeEnableLint(state, [setDiagnosticsEffect.of(diagnostics)])\n    };\n}\n/**\nThe state effect that updates the set of active diagnostics. Can\nbe useful when writing an extension that needs to track these.\n*/\nconst setDiagnosticsEffect = /*@__PURE__*/StateEffect.define();\nconst togglePanel = /*@__PURE__*/StateEffect.define();\nconst movePanelSelection = /*@__PURE__*/StateEffect.define();\nconst lintState = /*@__PURE__*/StateField.define({\n    create() {\n        return new LintState(Decoration.none, null, null);\n    },\n    update(value, tr) {\n        if (tr.docChanged) {\n            let mapped = value.diagnostics.map(tr.changes), selected = null;\n            if (value.selected) {\n                let selPos = tr.changes.mapPos(value.selected.from, 1);\n                selected = findDiagnostic(mapped, value.selected.diagnostic, selPos) || findDiagnostic(mapped, null, selPos);\n            }\n            value = new LintState(mapped, value.panel, selected);\n        }\n        for (let effect of tr.effects) {\n            if (effect.is(setDiagnosticsEffect)) {\n                value = LintState.init(effect.value, value.panel, tr.state);\n            }\n            else if (effect.is(togglePanel)) {\n                value = new LintState(value.diagnostics, effect.value ? LintPanel.open : null, value.selected);\n            }\n            else if (effect.is(movePanelSelection)) {\n                value = new LintState(value.diagnostics, value.panel, effect.value);\n            }\n        }\n        return value;\n    },\n    provide: f => [showPanel.from(f, val => val.panel),\n        EditorView.decorations.from(f, s => s.diagnostics)]\n});\n/**\nReturns the number of active lint diagnostics in the given state.\n*/\nfunction diagnosticCount(state) {\n    let lint = state.field(lintState, false);\n    return lint ? lint.diagnostics.size : 0;\n}\nconst activeMark = /*@__PURE__*/Decoration.mark({ class: \"cm-lintRange cm-lintRange-active\" });\nfunction lintTooltip(view, pos, side) {\n    let { diagnostics } = view.state.field(lintState);\n    let found = [], stackStart = 2e8, stackEnd = 0;\n    diagnostics.between(pos - (side < 0 ? 1 : 0), pos + (side > 0 ? 1 : 0), (from, to, { spec }) => {\n        if (pos >= from && pos <= to &&\n            (from == to || ((pos > from || side > 0) && (pos < to || side < 0)))) {\n            found.push(spec.diagnostic);\n            stackStart = Math.min(from, stackStart);\n            stackEnd = Math.max(to, stackEnd);\n        }\n    });\n    let diagnosticFilter = view.state.facet(lintConfig).tooltipFilter;\n    if (diagnosticFilter)\n        found = diagnosticFilter(found);\n    if (!found.length)\n        return null;\n    return {\n        pos: stackStart,\n        end: stackEnd,\n        above: view.state.doc.lineAt(stackStart).to < stackEnd,\n        create() {\n            return { dom: diagnosticsTooltip(view, found) };\n        }\n    };\n}\nfunction diagnosticsTooltip(view, diagnostics) {\n    return elt(\"ul\", { class: \"cm-tooltip-lint\" }, diagnostics.map(d => renderDiagnostic(view, d, false)));\n}\n/**\nCommand to open and focus the lint panel.\n*/\nconst openLintPanel = (view) => {\n    let field = view.state.field(lintState, false);\n    if (!field || !field.panel)\n        view.dispatch({ effects: maybeEnableLint(view.state, [togglePanel.of(true)]) });\n    let panel = getPanel(view, LintPanel.open);\n    if (panel)\n        panel.dom.querySelector(\".cm-panel-lint ul\").focus();\n    return true;\n};\n/**\nCommand to close the lint panel, when open.\n*/\nconst closeLintPanel = (view) => {\n    let field = view.state.field(lintState, false);\n    if (!field || !field.panel)\n        return false;\n    view.dispatch({ effects: togglePanel.of(false) });\n    return true;\n};\n/**\nMove the selection to the next diagnostic.\n*/\nconst nextDiagnostic = (view) => {\n    let field = view.state.field(lintState, false);\n    if (!field)\n        return false;\n    let sel = view.state.selection.main, next = field.diagnostics.iter(sel.to + 1);\n    if (!next.value) {\n        next = field.diagnostics.iter(0);\n        if (!next.value || next.from == sel.from && next.to == sel.to)\n            return false;\n    }\n    view.dispatch({ selection: { anchor: next.from, head: next.to }, scrollIntoView: true });\n    return true;\n};\n/**\nA set of default key bindings for the lint functionality.\n\n- Ctrl-Shift-m (Cmd-Shift-m on macOS): [`openLintPanel`](https://codemirror.net/6/docs/ref/#lint.openLintPanel)\n- F8: [`nextDiagnostic`](https://codemirror.net/6/docs/ref/#lint.nextDiagnostic)\n*/\nconst lintKeymap = [\n    { key: \"Mod-Shift-m\", run: openLintPanel, preventDefault: true },\n    { key: \"F8\", run: nextDiagnostic }\n];\nconst lintPlugin = /*@__PURE__*/ViewPlugin.fromClass(class {\n    constructor(view) {\n        this.view = view;\n        this.timeout = -1;\n        this.set = true;\n        let { delay } = view.state.facet(lintConfig);\n        this.lintTime = Date.now() + delay;\n        this.run = this.run.bind(this);\n        this.timeout = setTimeout(this.run, delay);\n    }\n    run() {\n        let now = Date.now();\n        if (now < this.lintTime - 10) {\n            setTimeout(this.run, this.lintTime - now);\n        }\n        else {\n            this.set = false;\n            let { state } = this.view, { sources } = state.facet(lintConfig);\n            Promise.all(sources.map(source => Promise.resolve(source(this.view)))).then(annotations => {\n                let all = annotations.reduce((a, b) => a.concat(b));\n                if (this.view.state.doc == state.doc)\n                    this.view.dispatch(setDiagnostics(this.view.state, all));\n            }, error => { logException(this.view.state, error); });\n        }\n    }\n    update(update) {\n        let config = update.state.facet(lintConfig);\n        if (update.docChanged || config != update.startState.facet(lintConfig) ||\n            config.needsRefresh && config.needsRefresh(update)) {\n            this.lintTime = Date.now() + config.delay;\n            if (!this.set) {\n                this.set = true;\n                this.timeout = setTimeout(this.run, config.delay);\n            }\n        }\n    }\n    force() {\n        if (this.set) {\n            this.lintTime = Date.now();\n            this.run();\n        }\n    }\n    destroy() {\n        clearTimeout(this.timeout);\n    }\n});\nconst lintConfig = /*@__PURE__*/Facet.define({\n    combine(input) {\n        return Object.assign({ sources: input.map(i => i.source) }, combineConfig(input.map(i => i.config), {\n            delay: 750,\n            markerFilter: null,\n            tooltipFilter: null,\n            needsRefresh: null\n        }, {\n            needsRefresh: (a, b) => !a ? b : !b ? a : u => a(u) || b(u)\n        }));\n    },\n    enables: lintPlugin\n});\n/**\nGiven a diagnostic source, this function returns an extension that\nenables linting with that source. It will be called whenever the\neditor is idle (after its content changed).\n*/\nfunction linter(source, config = {}) {\n    return lintConfig.of({ source, config });\n}\n/**\nForces any linters [configured](https://codemirror.net/6/docs/ref/#lint.linter) to run when the\neditor is idle to run right away.\n*/\nfunction forceLinting(view) {\n    let plugin = view.plugin(lintPlugin);\n    if (plugin)\n        plugin.force();\n}\nfunction assignKeys(actions) {\n    let assigned = [];\n    if (actions)\n        actions: for (let { name } of actions) {\n            for (let i = 0; i < name.length; i++) {\n                let ch = name[i];\n                if (/[a-zA-Z]/.test(ch) && !assigned.some(c => c.toLowerCase() == ch.toLowerCase())) {\n                    assigned.push(ch);\n                    continue actions;\n                }\n            }\n            assigned.push(\"\");\n        }\n    return assigned;\n}\nfunction renderDiagnostic(view, diagnostic, inPanel) {\n    var _a;\n    let keys = inPanel ? assignKeys(diagnostic.actions) : [];\n    return elt(\"li\", { class: \"cm-diagnostic cm-diagnostic-\" + diagnostic.severity }, elt(\"span\", { class: \"cm-diagnosticText\" }, diagnostic.renderMessage ? diagnostic.renderMessage() : diagnostic.message), (_a = diagnostic.actions) === null || _a === void 0 ? void 0 : _a.map((action, i) => {\n        let fired = false, click = (e) => {\n            e.preventDefault();\n            if (fired)\n                return;\n            fired = true;\n            let found = findDiagnostic(view.state.field(lintState).diagnostics, diagnostic);\n            if (found)\n                action.apply(view, found.from, found.to);\n        };\n        let { name } = action, keyIndex = keys[i] ? name.indexOf(keys[i]) : -1;\n        let nameElt = keyIndex < 0 ? name : [name.slice(0, keyIndex),\n            elt(\"u\", name.slice(keyIndex, keyIndex + 1)),\n            name.slice(keyIndex + 1)];\n        return elt(\"button\", {\n            type: \"button\",\n            class: \"cm-diagnosticAction\",\n            onclick: click,\n            onmousedown: click,\n            \"aria-label\": ` Action: ${name}${keyIndex < 0 ? \"\" : ` (access key \"${keys[i]})\"`}.`\n        }, nameElt);\n    }), diagnostic.source && elt(\"div\", { class: \"cm-diagnosticSource\" }, diagnostic.source));\n}\nclass DiagnosticWidget extends WidgetType {\n    constructor(diagnostic) {\n        super();\n        this.diagnostic = diagnostic;\n    }\n    eq(other) { return other.diagnostic == this.diagnostic; }\n    toDOM() {\n        return elt(\"span\", { class: \"cm-lintPoint cm-lintPoint-\" + this.diagnostic.severity });\n    }\n}\nclass PanelItem {\n    constructor(view, diagnostic) {\n        this.diagnostic = diagnostic;\n        this.id = \"item_\" + Math.floor(Math.random() * 0xffffffff).toString(16);\n        this.dom = renderDiagnostic(view, diagnostic, true);\n        this.dom.id = this.id;\n        this.dom.setAttribute(\"role\", \"option\");\n    }\n}\nclass LintPanel {\n    constructor(view) {\n        this.view = view;\n        this.items = [];\n        let onkeydown = (event) => {\n            if (event.keyCode == 27) { // Escape\n                closeLintPanel(this.view);\n                this.view.focus();\n            }\n            else if (event.keyCode == 38 || event.keyCode == 33) { // ArrowUp, PageUp\n                this.moveSelection((this.selectedIndex - 1 + this.items.length) % this.items.length);\n            }\n            else if (event.keyCode == 40 || event.keyCode == 34) { // ArrowDown, PageDown\n                this.moveSelection((this.selectedIndex + 1) % this.items.length);\n            }\n            else if (event.keyCode == 36) { // Home\n                this.moveSelection(0);\n            }\n            else if (event.keyCode == 35) { // End\n                this.moveSelection(this.items.length - 1);\n            }\n            else if (event.keyCode == 13) { // Enter\n                this.view.focus();\n            }\n            else if (event.keyCode >= 65 && event.keyCode <= 90 && this.selectedIndex >= 0) { // A-Z\n                let { diagnostic } = this.items[this.selectedIndex], keys = assignKeys(diagnostic.actions);\n                for (let i = 0; i < keys.length; i++)\n                    if (keys[i].toUpperCase().charCodeAt(0) == event.keyCode) {\n                        let found = findDiagnostic(this.view.state.field(lintState).diagnostics, diagnostic);\n                        if (found)\n                            diagnostic.actions[i].apply(view, found.from, found.to);\n                    }\n            }\n            else {\n                return;\n            }\n            event.preventDefault();\n        };\n        let onclick = (event) => {\n            for (let i = 0; i < this.items.length; i++) {\n                if (this.items[i].dom.contains(event.target))\n                    this.moveSelection(i);\n            }\n        };\n        this.list = elt(\"ul\", {\n            tabIndex: 0,\n            role: \"listbox\",\n            \"aria-label\": this.view.state.phrase(\"Diagnostics\"),\n            onkeydown,\n            onclick\n        });\n        this.dom = elt(\"div\", { class: \"cm-panel-lint\" }, this.list, elt(\"button\", {\n            type: \"button\",\n            name: \"close\",\n            \"aria-label\": this.view.state.phrase(\"close\"),\n            onclick: () => closeLintPanel(this.view)\n        }, \"×\"));\n        this.update();\n    }\n    get selectedIndex() {\n        let selected = this.view.state.field(lintState).selected;\n        if (!selected)\n            return -1;\n        for (let i = 0; i < this.items.length; i++)\n            if (this.items[i].diagnostic == selected.diagnostic)\n                return i;\n        return -1;\n    }\n    update() {\n        let { diagnostics, selected } = this.view.state.field(lintState);\n        let i = 0, needsSync = false, newSelectedItem = null;\n        diagnostics.between(0, this.view.state.doc.length, (_start, _end, { spec }) => {\n            let found = -1, item;\n            for (let j = i; j < this.items.length; j++)\n                if (this.items[j].diagnostic == spec.diagnostic) {\n                    found = j;\n                    break;\n                }\n            if (found < 0) {\n                item = new PanelItem(this.view, spec.diagnostic);\n                this.items.splice(i, 0, item);\n                needsSync = true;\n            }\n            else {\n                item = this.items[found];\n                if (found > i) {\n                    this.items.splice(i, found - i);\n                    needsSync = true;\n                }\n            }\n            if (selected && item.diagnostic == selected.diagnostic) {\n                if (!item.dom.hasAttribute(\"aria-selected\")) {\n                    item.dom.setAttribute(\"aria-selected\", \"true\");\n                    newSelectedItem = item;\n                }\n            }\n            else if (item.dom.hasAttribute(\"aria-selected\")) {\n                item.dom.removeAttribute(\"aria-selected\");\n            }\n            i++;\n        });\n        while (i < this.items.length && !(this.items.length == 1 && this.items[0].diagnostic.from < 0)) {\n            needsSync = true;\n            this.items.pop();\n        }\n        if (this.items.length == 0) {\n            this.items.push(new PanelItem(this.view, {\n                from: -1, to: -1,\n                severity: \"info\",\n                message: this.view.state.phrase(\"No diagnostics\")\n            }));\n            needsSync = true;\n        }\n        if (newSelectedItem) {\n            this.list.setAttribute(\"aria-activedescendant\", newSelectedItem.id);\n            this.view.requestMeasure({\n                key: this,\n                read: () => ({ sel: newSelectedItem.dom.getBoundingClientRect(), panel: this.list.getBoundingClientRect() }),\n                write: ({ sel, panel }) => {\n                    if (sel.top < panel.top)\n                        this.list.scrollTop -= panel.top - sel.top;\n                    else if (sel.bottom > panel.bottom)\n                        this.list.scrollTop += sel.bottom - panel.bottom;\n                }\n            });\n        }\n        else if (this.selectedIndex < 0) {\n            this.list.removeAttribute(\"aria-activedescendant\");\n        }\n        if (needsSync)\n            this.sync();\n    }\n    sync() {\n        let domPos = this.list.firstChild;\n        function rm() {\n            let prev = domPos;\n            domPos = prev.nextSibling;\n            prev.remove();\n        }\n        for (let item of this.items) {\n            if (item.dom.parentNode == this.list) {\n                while (domPos != item.dom)\n                    rm();\n                domPos = item.dom.nextSibling;\n            }\n            else {\n                this.list.insertBefore(item.dom, domPos);\n            }\n        }\n        while (domPos)\n            rm();\n    }\n    moveSelection(selectedIndex) {\n        if (this.selectedIndex < 0)\n            return;\n        let field = this.view.state.field(lintState);\n        let selection = findDiagnostic(field.diagnostics, this.items[selectedIndex].diagnostic);\n        if (!selection)\n            return;\n        this.view.dispatch({\n            selection: { anchor: selection.from, head: selection.to },\n            scrollIntoView: true,\n            effects: movePanelSelection.of(selection)\n        });\n    }\n    static open(view) { return new LintPanel(view); }\n}\nfunction svg(content, attrs = `viewBox=\"0 0 40 40\"`) {\n    return `url('data:image/svg+xml,<svg xmlns=\"http://www.w3.org/2000/svg\" ${attrs}>${encodeURIComponent(content)}</svg>')`;\n}\nfunction underline(color) {\n    return svg(`<path d=\"m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0\" stroke=\"${color}\" fill=\"none\" stroke-width=\".7\"/>`, `width=\"6\" height=\"3\"`);\n}\nconst baseTheme = /*@__PURE__*/EditorView.baseTheme({\n    \".cm-diagnostic\": {\n        padding: \"3px 6px 3px 8px\",\n        marginLeft: \"-1px\",\n        display: \"block\",\n        whiteSpace: \"pre-wrap\"\n    },\n    \".cm-diagnostic-error\": { borderLeft: \"5px solid #d11\" },\n    \".cm-diagnostic-warning\": { borderLeft: \"5px solid orange\" },\n    \".cm-diagnostic-info\": { borderLeft: \"5px solid #999\" },\n    \".cm-diagnosticAction\": {\n        font: \"inherit\",\n        border: \"none\",\n        padding: \"2px 4px\",\n        backgroundColor: \"#444\",\n        color: \"white\",\n        borderRadius: \"3px\",\n        marginLeft: \"8px\",\n        cursor: \"pointer\"\n    },\n    \".cm-diagnosticSource\": {\n        fontSize: \"70%\",\n        opacity: .7\n    },\n    \".cm-lintRange\": {\n        backgroundPosition: \"left bottom\",\n        backgroundRepeat: \"repeat-x\",\n        paddingBottom: \"0.7px\",\n    },\n    \".cm-lintRange-error\": { backgroundImage: /*@__PURE__*/underline(\"#d11\") },\n    \".cm-lintRange-warning\": { backgroundImage: /*@__PURE__*/underline(\"orange\") },\n    \".cm-lintRange-info\": { backgroundImage: /*@__PURE__*/underline(\"#999\") },\n    \".cm-lintRange-active\": { backgroundColor: \"#ffdd9980\" },\n    \".cm-tooltip-lint\": {\n        padding: 0,\n        margin: 0\n    },\n    \".cm-lintPoint\": {\n        position: \"relative\",\n        \"&:after\": {\n            content: '\"\"',\n            position: \"absolute\",\n            bottom: 0,\n            left: \"-2px\",\n            borderLeft: \"3px solid transparent\",\n            borderRight: \"3px solid transparent\",\n            borderBottom: \"4px solid #d11\"\n        }\n    },\n    \".cm-lintPoint-warning\": {\n        \"&:after\": { borderBottomColor: \"orange\" }\n    },\n    \".cm-lintPoint-info\": {\n        \"&:after\": { borderBottomColor: \"#999\" }\n    },\n    \".cm-panel.cm-panel-lint\": {\n        position: \"relative\",\n        \"& ul\": {\n            maxHeight: \"100px\",\n            overflowY: \"auto\",\n            \"& [aria-selected]\": {\n                backgroundColor: \"#ddd\",\n                \"& u\": { textDecoration: \"underline\" }\n            },\n            \"&:focus [aria-selected]\": {\n                background_fallback: \"#bdf\",\n                backgroundColor: \"Highlight\",\n                color_fallback: \"white\",\n                color: \"HighlightText\"\n            },\n            \"& u\": { textDecoration: \"none\" },\n            padding: 0,\n            margin: 0\n        },\n        \"& [name=close]\": {\n            position: \"absolute\",\n            top: \"0\",\n            right: \"2px\",\n            background: \"inherit\",\n            border: \"none\",\n            font: \"inherit\",\n            padding: 0,\n            margin: 0\n        }\n    }\n});\nclass LintGutterMarker extends GutterMarker {\n    constructor(diagnostics) {\n        super();\n        this.diagnostics = diagnostics;\n        this.severity = diagnostics.reduce((max, d) => {\n            let s = d.severity;\n            return s == \"error\" || s == \"warning\" && max == \"info\" ? s : max;\n        }, \"info\");\n    }\n    toDOM(view) {\n        let elt = document.createElement(\"div\");\n        elt.className = \"cm-lint-marker cm-lint-marker-\" + this.severity;\n        let diagnostics = this.diagnostics;\n        let diagnosticsFilter = view.state.facet(lintGutterConfig).tooltipFilter;\n        if (diagnosticsFilter)\n            diagnostics = diagnosticsFilter(diagnostics);\n        if (diagnostics.length)\n            elt.onmouseover = () => gutterMarkerMouseOver(view, elt, diagnostics);\n        return elt;\n    }\n}\nfunction trackHoverOn(view, marker) {\n    let mousemove = (event) => {\n        let rect = marker.getBoundingClientRect();\n        if (event.clientX > rect.left - 10 /* Hover.Margin */ && event.clientX < rect.right + 10 /* Hover.Margin */ &&\n            event.clientY > rect.top - 10 /* Hover.Margin */ && event.clientY < rect.bottom + 10 /* Hover.Margin */)\n            return;\n        for (let target = event.target; target; target = target.parentNode) {\n            if (target.nodeType == 1 && target.classList.contains(\"cm-tooltip-lint\"))\n                return;\n        }\n        window.removeEventListener(\"mousemove\", mousemove);\n        if (view.state.field(lintGutterTooltip))\n            view.dispatch({ effects: setLintGutterTooltip.of(null) });\n    };\n    window.addEventListener(\"mousemove\", mousemove);\n}\nfunction gutterMarkerMouseOver(view, marker, diagnostics) {\n    function hovered() {\n        let line = view.elementAtHeight(marker.getBoundingClientRect().top + 5 - view.documentTop);\n        const linePos = view.coordsAtPos(line.from);\n        if (linePos) {\n            view.dispatch({ effects: setLintGutterTooltip.of({\n                    pos: line.from,\n                    above: false,\n                    create() {\n                        return {\n                            dom: diagnosticsTooltip(view, diagnostics),\n                            getCoords: () => marker.getBoundingClientRect()\n                        };\n                    }\n                }) });\n        }\n        marker.onmouseout = marker.onmousemove = null;\n        trackHoverOn(view, marker);\n    }\n    let { hoverTime } = view.state.facet(lintGutterConfig);\n    let hoverTimeout = setTimeout(hovered, hoverTime);\n    marker.onmouseout = () => {\n        clearTimeout(hoverTimeout);\n        marker.onmouseout = marker.onmousemove = null;\n    };\n    marker.onmousemove = () => {\n        clearTimeout(hoverTimeout);\n        hoverTimeout = setTimeout(hovered, hoverTime);\n    };\n}\nfunction markersForDiagnostics(doc, diagnostics) {\n    let byLine = Object.create(null);\n    for (let diagnostic of diagnostics) {\n        let line = doc.lineAt(diagnostic.from);\n        (byLine[line.from] || (byLine[line.from] = [])).push(diagnostic);\n    }\n    let markers = [];\n    for (let line in byLine) {\n        markers.push(new LintGutterMarker(byLine[line]).range(+line));\n    }\n    return RangeSet.of(markers, true);\n}\nconst lintGutterExtension = /*@__PURE__*/gutter({\n    class: \"cm-gutter-lint\",\n    markers: view => view.state.field(lintGutterMarkers),\n});\nconst lintGutterMarkers = /*@__PURE__*/StateField.define({\n    create() {\n        return RangeSet.empty;\n    },\n    update(markers, tr) {\n        markers = markers.map(tr.changes);\n        let diagnosticFilter = tr.state.facet(lintGutterConfig).markerFilter;\n        for (let effect of tr.effects) {\n            if (effect.is(setDiagnosticsEffect)) {\n                let diagnostics = effect.value;\n                if (diagnosticFilter)\n                    diagnostics = diagnosticFilter(diagnostics || []);\n                markers = markersForDiagnostics(tr.state.doc, diagnostics.slice(0));\n            }\n        }\n        return markers;\n    }\n});\nconst setLintGutterTooltip = /*@__PURE__*/StateEffect.define();\nconst lintGutterTooltip = /*@__PURE__*/StateField.define({\n    create() { return null; },\n    update(tooltip, tr) {\n        if (tooltip && tr.docChanged)\n            tooltip = hideTooltip(tr, tooltip) ? null : Object.assign(Object.assign({}, tooltip), { pos: tr.changes.mapPos(tooltip.pos) });\n        return tr.effects.reduce((t, e) => e.is(setLintGutterTooltip) ? e.value : t, tooltip);\n    },\n    provide: field => showTooltip.from(field)\n});\nconst lintGutterTheme = /*@__PURE__*/EditorView.baseTheme({\n    \".cm-gutter-lint\": {\n        width: \"1.4em\",\n        \"& .cm-gutterElement\": {\n            padding: \".2em\"\n        }\n    },\n    \".cm-lint-marker\": {\n        width: \"1em\",\n        height: \"1em\"\n    },\n    \".cm-lint-marker-info\": {\n        content: /*@__PURE__*/svg(`<path fill=\"#aaf\" stroke=\"#77e\" stroke-width=\"6\" stroke-linejoin=\"round\" d=\"M5 5L35 5L35 35L5 35Z\"/>`)\n    },\n    \".cm-lint-marker-warning\": {\n        content: /*@__PURE__*/svg(`<path fill=\"#fe8\" stroke=\"#fd7\" stroke-width=\"6\" stroke-linejoin=\"round\" d=\"M20 6L37 35L3 35Z\"/>`),\n    },\n    \".cm-lint-marker-error\": {\n        content: /*@__PURE__*/svg(`<circle cx=\"20\" cy=\"20\" r=\"15\" fill=\"#f87\" stroke=\"#f43\" stroke-width=\"6\"/>`)\n    },\n});\nconst lintGutterConfig = /*@__PURE__*/Facet.define({\n    combine(configs) {\n        return combineConfig(configs, {\n            hoverTime: 300 /* Hover.Time */,\n            markerFilter: null,\n            tooltipFilter: null\n        });\n    }\n});\n/**\nReturns an extension that installs a gutter showing markers for\neach line that has diagnostics, which can be hovered over to see\nthe diagnostics.\n*/\nfunction lintGutter(config = {}) {\n    return [lintGutterConfig.of(config), lintGutterMarkers, lintGutterExtension, lintGutterTheme, lintGutterTooltip];\n}\n/**\nIterate over the marked diagnostics for the given editor state,\ncalling `f` for each of them. Note that, if the document changed\nsince the diagnostics were created, the `Diagnostic` object will\nhold the original outdated position, whereas the `to` and `from`\narguments hold the diagnostic's current position.\n*/\nfunction forEachDiagnostic(state, f) {\n    let lState = state.field(lintState, false);\n    if (lState && lState.diagnostics.size)\n        for (let iter = RangeSet.iter([lState.diagnostics]); iter.value; iter.next())\n            f(iter.value.spec.diagnostic, iter.from, iter.to);\n}\n\nexport { closeLintPanel, diagnosticCount, forEachDiagnostic, forceLinting, lintGutter, lintKeymap, linter, nextDiagnostic, openLintPanel, setDiagnostics, setDiagnosticsEffect };\n","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--7-oneOf-1-3!../../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ToolbarButton.vue?vue&type=style&index=0&id=5dedde00&prod&lang=scss&scoped=true&\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"07404f30\", content, true, {\"sourceMap\":false});","export default function crelt() {\n  var elt = arguments[0]\n  if (typeof elt == \"string\") elt = document.createElement(elt)\n  var i = 1, next = arguments[1]\n  if (next && typeof next == \"object\" && next.nodeType == null && !Array.isArray(next)) {\n    for (var name in next) if (Object.prototype.hasOwnProperty.call(next, name)) {\n      var value = next[name]\n      if (typeof value == \"string\") elt.setAttribute(name, value)\n      else if (value != null) elt[name] = value\n    }\n    i++\n  }\n  for (; i < arguments.length; i++) add(elt, arguments[i])\n  return elt\n}\n\nfunction add(elt, child) {\n  if (typeof child == \"string\") {\n    elt.appendChild(document.createTextNode(child))\n  } else if (child == null) {\n  } else if (child.nodeType != null) {\n    elt.appendChild(child)\n  } else if (Array.isArray(child)) {\n    for (var i = 0; i < child.length; i++) add(elt, child[i])\n  } else {\n    throw new RangeError(\"Unsupported child node: \" + child)\n  }\n}\n","import {parse} from 'micromark/lib/parse.js';\nimport {preprocess} from 'micromark/lib/preprocess.js';\nimport {postprocess} from 'micromark/lib/postprocess.js';\nimport {assert} from '../mdext/helpers.js';\n\n\nexport function parseMicromarkEvents(text, config) {\n  return postprocess(parse(config).document().write(preprocess()(text, undefined, true)));\n}\n\nexport function micromarkEventsToTree(text, events) {\n  // console.log('micromark events', events);\n\n  // build enter/exit tree of nested elements\n  const tree = [];\n  const stack = [];\n  for (const [action, node, context] of events) {\n    if (action === 'enter') {\n      const treeNode = {\n        enter: node,\n        exit: null,  \n        children: [],\n\n        type: node.type,\n        text: null,\n      };\n      if (stack.length > 0) {\n        stack[stack.length - 1].children.push(treeNode);\n      } else {\n        tree.push(treeNode);\n      }\n      stack.push(treeNode);\n    } else if (action === 'exit') {\n      const treeNode = stack[stack.length - 1];\n      assert(treeNode.type == node.type);\n\n      treeNode.exit = node;\n      treeNode.text = text.slice(treeNode.enter.start.offset, treeNode.exit.end.offset);\n      stack.splice(stack.length - 1, 1);\n    }\n  }\n  // console.log('micromark tree', tree);\n  return tree;\n}\n","import {EditorSelection} from \"@codemirror/state\"\n\n\nexport function linesInRange(doc, range) {\n  const out = [];\n  const startLine = doc.lineAt(range.from).number;\n  const endLine = doc.lineAt(range.to).number;\n  for (let i = startLine; i <= endLine; i++) {\n    out.push(doc.line(i));\n  }\n  return out;\n}\n\nexport function getChildren(n) {\n  const out = [];\n  for (let c = n.firstChild; c; c = c.nextSibling) {\n    out.push(c);\n  }\n  return out;\n}\n\nexport function intersectsRange(range, node) {\n  return range.to >= node.from && node.to >= range.from;\n}\n\nexport function iterateRange(tree, range, cb) {\n  iterateChildren(tree.topNode);\n\n  function iterateChildren(n) {\n    if (!intersectsRange(range, n)) {\n      return;\n    }\n    cb(n);\n    for (const c of getChildren(n)) {\n      iterateChildren(c);\n    }\n  }\n}\n\nexport function getIntersectionNodes(tree, range, predicate) {\n  const nodes = [];\n  iterateRange(tree, range, n => {\n    if (predicate(n)) {\n      nodes.push(n);\n    }\n  });\n  return nodes;\n}\n\nfunction clamp(val, min, max) {\n  return Math.max(min, Math.min(max, val));\n}\n\n\nexport function moveRangeDelete(moveRange, range, change) {\n  const moveStart = clamp(change.from - range.from, change.from - change.to, 0);\n  const moveEnd = clamp(change.from - range.to, change.from - change.to, 0);\n  return EditorSelection.range(\n    moveRange.from + moveStart,\n    moveRange.to + moveEnd\n  );\n}\n\n\nexport function moveRangeInsert(moveRange, range, change) {\n  return EditorSelection.range(\n    moveRange.from + ((range.from > change.from) ? change.insert.length : 0),\n    moveRange.to + ((range.to > change.from) ? change.insert.length : 0),\n  );\n}","import {EditorSelection} from \"@codemirror/state\"\nimport {syntaxTree} from \"@codemirror/language\"\nimport { markdownLanguage } from \"./language\";\nimport {linesInRange, getChildren, intersectsRange, getIntersectionNodes, moveRangeDelete, moveRangeInsert} from './codemirror-utils';\n\n\nclass Context {\n  constructor(\n    node,\n    from,\n    to,\n    spaceBefore,\n    spaceAfter,\n    type,\n    item\n  ) {\n    this.node = node;\n    this.from = from;\n    this.to = to;\n    this.spaceBefore = spaceBefore;\n    this.spaceAfter = spaceAfter;\n    this.type = type;\n    this.item = item;\n  }\n\n  blank(maxWidth = null, trailing = true) {\n    let result = this.spaceBefore;\n    if (this.node.name === \"blockQuote\") { \n      result += \">\";\n    }\n    if (maxWidth !== null) {\n      while (result.length < maxWidth) {\n        result += \" \";\n      }\n      return result;\n    } else {\n      for (let i = this.to - this.from - result.length - this.spaceAfter.length; i > 0; i--) {\n        result += \" \";\n      }\n      return result + (trailing ? this.spaceAfter : \"\");\n    }\n  }\n\n  marker(doc, add) {\n    let number = this.node.name == \"listOrdered\" ? String((+itemNumber(this.item, doc)[2] + add)) : \"\"\n    return this.spaceBefore + number + this.type + this.spaceAfter\n  }\n}\n\nfunction getContext(selectedNode, doc) {\n  let nodes = []\n  for (let cur = selectedNode; cur && cur.name != \"document\"; cur = cur.parent) {\n    if (cur.name == \"listItem\" || cur.name == \"blockQuote\")\n      nodes.push(cur)\n  }\n  let context = [];\n  for (let i = nodes.length - 1; i >= 0; i--) {\n    let node = nodes[i], match;\n    let line = doc.lineAt(node.from), startPos = node.from - line.from;\n    if (node.name == \"blockQuote\" && (match = /^[ \\t]*>( ?)/.exec(line.text.slice(startPos)))) {\n      context.push(new Context(node, startPos, startPos + match[0].length, \"\", match[1], \">\", null));\n    } else if (node.name == \"listItem\" && node.parent.name == \"listOrdered\" &&\n               (match = /^([ \\t]*)\\d+([.)])([ \\t]*)/.exec(line.text.slice(startPos)))) {\n      let after = match[3], len = match[0].length\n      if (after.length >= 4) { after = after.slice(0, after.length - 4); len -= 4 }\n      context.push(new Context(node.parent, startPos, startPos + len, match[1], after, match[2], node));\n    } else if (node.name == \"listItem\" && node.parent.name == \"listUnordered\" &&\n               (match = /^([ \\t]*)([-+*])([ \\t]{1,4}\\[[ xX]\\])?([ \\t]+)/.exec(line.text.slice(startPos)))) {\n      let after = match[4], len = match[0].length\n      if (after.length > 4) { after = after.slice(0, after.length - 4); len -= 4 }\n      let type = match[2]\n      if (match[3]) type += match[3].replace(/[xX]/, ' ')\n      context.push(new Context(node.parent, startPos, startPos + len, match[1], after, type, node));\n    }\n  }\n  return context\n}\n\nfunction itemNumber(item, doc) {\n  return /^(\\s*)(\\d+)(?=[.)])/.exec(doc.sliceString(item.from, item.from + 10))\n}\n\nfunction renumberList(after, doc, changes, offset = 0) {\n  for (let prev = -1, node = after;;) {\n    if (node.name == \"listItem\") {\n      let m = itemNumber(node, doc)\n      let number = +m[2]\n      if (prev >= 0) {\n        if (number != prev + 1) return\n        changes.push({from: node.from + m[1].length, to: node.from + m[0].length, insert: String(prev + 2 + offset)})\n      }\n      prev = number\n    }\n    let next = node.nextSibling\n    if (!next) break\n    node = next\n  }\n}\n\n/// This command, when invoked in Markdown context with cursor\n/// selection(s), will create a new line with the markup for\n/// blockquotes and lists that were active on the old line. If the\n/// cursor was directly after the end of the markup for the old line,\n/// trailing whitespace and list markers are removed from that line.\n///\n/// The command does nothing in non-Markdown context, so it should\n/// not be used as the only binding for Enter (even in a Markdown\n/// document, HTML and code regions might use a different language).\nexport const insertNewlineContinueMarkup = ({state, dispatch}) => {\n  let tree = syntaxTree(state), {doc} = state\n  let dont = null, changes = state.changeByRange(range => {\n    if (!range.empty || !markdownLanguage.isActiveAt(state, range.from)) return dont = {range}\n    let pos = range.from, line = doc.lineAt(pos)\n    let context = getContext(tree.resolveInner(pos, -1), doc)\n    while (context.length && context[context.length - 1].from > pos - line.from) context.pop()\n    if (!context.length) return dont = {range}\n    let inner = context[context.length - 1]\n    if (inner.to - inner.spaceAfter.length > pos - line.from) return dont = {range}\n\n    let emptyLine = pos >= (inner.to - inner.spaceAfter.length) && !/\\S/.test(line.text.slice(inner.to))\n    // Empty line in list\n    if (inner.item && emptyLine) {\n      let next = context.length > 1 ? context[context.length - 2] : null\n      let delTo, insert = \"\"\n      if (next && next.item) { // Re-add marker for the list at the next level\n        delTo = line.from + next.from\n        insert = next.marker(doc, 1)\n      } else {\n        delTo = line.from + (next ? next.to : 0)\n      }\n      let changes = [{from: delTo, to: pos, insert}]\n      if (inner.node.name == \"listOrdered\") {\n        renumberList(inner.item, doc, changes, -2);\n      }\n      if (next && next.node.name == \"listOrdered\") {\n        renumberList(next.item, doc, changes);\n      }\n      return {range: EditorSelection.cursor(delTo + insert.length), changes}\n    }\n\n    if (inner.node.name == \"blockQuote\" && emptyLine && line.from) {\n      let prevLine = doc.lineAt(line.from - 1), quoted = />\\s*$/.exec(prevLine.text)\n      // Two aligned empty quoted lines in a row\n      if (quoted && quoted.index == inner.from) {\n        let changes = state.changes([{from: prevLine.from + quoted.index, to: prevLine.to},\n                                     {from: line.from + inner.from, to: line.to}])\n        return {range: range.map(changes), changes}\n      }\n    }\n\n    let changes = []\n    if (inner.node.name == \"listOrdered\") {\n      renumberList(inner.item, doc, changes);\n    }\n    let continued = inner.item && inner.item.from < line.from;\n    let insert = \"\";\n    // If not dedented\n    if (!continued || /^[\\s\\d.)\\-+*>]*/.exec(line.text)[0].length >= inner.to) {\n      for (let i = 0, e = context.length - 1; i <= e; i++) {\n        insert += i == e && !continued ? context[i].marker(doc, 1)\n          : context[i].blank(i < e ? context[i + 1].from - insert.length : null);\n      }\n    }\n    let from = pos;\n    while (from > line.from && /\\s/.test(line.text.charAt(from - line.from - 1))) { \n      from--; \n    }\n    insert = state.lineBreak + insert;\n    changes.push({from, to: pos, insert});\n    return {range: EditorSelection.cursor(from + insert.length), changes};\n  })\n  if (dont) return false\n  dispatch(state.update(changes, {scrollIntoView: true, userEvent: \"input\"}))\n  return true\n}\n\n\n\nfunction isMark(node) {\n  return node.name == \"blockQuotePrefix\" || node.name == \"listItemPrefix\"\n}\n\nfunction contextNodeForDelete(tree, pos) {\n  let node = tree.resolveInner(pos, -1), scan = pos\n  if (isMark(node)) {\n    scan = node.from\n    node = node.parent\n  }\n  for (let prev; prev = node.childBefore(scan);) {\n    if (isMark(prev)) {\n      scan = prev.from\n    } else if (prev.name == \"listOrdered\" || prev.name == \"listUnordered\") {\n      node = prev.lastChild\n      scan = node.to\n    } else {\n      break\n    }\n  }\n  return node;\n}\n\n\n/// This command will, when invoked in a Markdown context with the\n/// cursor directly after list or blockquote markup, delete one level\n/// of markup. When the markup is for a list, it will be replaced by\n/// spaces on the first invocation (a further invocation will delete\n/// the spaces), to make it easy to continue a list.\n///\n/// When not after Markdown block markup, this command will return\n/// false, so it is intended to be bound alongside other deletion\n/// commands, with a higher precedence than the more generic commands.\nexport const deleteMarkupBackward = ({state, dispatch}) => {\n  let tree = syntaxTree(state)\n  let dont = null, changes = state.changeByRange(range => {\n    let pos = range.from, {doc} = state\n    if (range.empty && markdownLanguage.isActiveAt(state, range.from)) {\n      let line = doc.lineAt(pos)\n      let context = getContext(contextNodeForDelete(tree, pos), doc)\n      if (context.length) {\n        let inner = context[context.length - 1]\n        let spaceEnd = inner.to - inner.spaceAfter.length + (inner.spaceAfter ? 1 : 0)\n        // Delete extra trailing space after markup\n        if (pos - line.from > spaceEnd && !/\\S/.test(line.text.slice(spaceEnd, pos - line.from)))\n          return {range: EditorSelection.cursor(line.from + spaceEnd),\n                  changes: {from: line.from + spaceEnd, to: pos}}\n        if (pos - line.from == spaceEnd &&\n            // Only apply this if we're on the line that has the\n            // construct's syntax, or there's only indentation in the\n            // target range\n            (!inner.item || line.from <= inner.item.from || !/\\S/.test(line.text.slice(0, inner.to)))) {\n          let start = line.from + inner.from\n          // Replace a list item marker with blank space\n          if (inner.item && inner.node.from < inner.item.from && /\\S/.test(line.text.slice(inner.from, inner.to))) {\n            return {range, changes: {from: start, to: line.from + inner.to, insert: inner.blank(inner.to - inner.from)}};\n          }\n          // Delete one level of indentation\n          if (start < pos) {\n            return {range: EditorSelection.cursor(start), changes: {from: start, to: pos}};\n          }\n        }\n      }\n    }\n    return dont = {range}\n  })\n  if (dont) return false\n  dispatch(state.update(changes, {scrollIntoView: true, userEvent: \"delete\"}))\n  return true\n}\n\n\nexport function isTypeInSelection(state, type) {\n  let tree = syntaxTree(state);\n  return state.selection.ranges.some(range => getIntersectionNodes(tree, range, n => n.name === type).length > 0);\n}\n\n\nfunction toggleMarkdownAction({state, dispatch}, { isInSelection, enable, disable }) {\n  const tree = syntaxTree(state);\n\n  const changes = state.changeByRange(range => {\n    if (!markdownLanguage.isActiveAt(state, range.from)) {\n      return {range};\n    }\n\n    const foundNodes = getIntersectionNodes(tree, range, isInSelection);\n    if (foundNodes.length > 0) {\n      if (disable) {\n        return disable(range, foundNodes);\n      } else {\n        return {range};\n      }\n    } else {\n      if (enable) {\n        return enable(range, tree);\n      } else {\n        return {range};\n      }\n    }\n  });\n\n  dispatch(state.update(changes, {scrollIntoView: true, userEvent: 'input'}));\n  return true;\n}\n\n\nfunction toggleMarkerType({state, dispatch}, { type, markerTypes = [], startMarker = null, endMarker = null}) {\n  return toggleMarkdownAction({state, dispatch}, {\n    isInSelection: n => {\n      return n.name === type || (n.name === 'data' && state.doc.sliceString(n.from, n.to) === startMarker + endMarker)\n    },\n    enable: (range) => {\n      if (range.empty) {\n        const insertText = 'text';\n        return {\n          range: EditorSelection.range(range.from + startMarker.length, range.to + startMarker.length + insertText.length),\n          changes: [{from: range.from, insert: startMarker + insertText + endMarker}],\n        };\n      } else {\n        // insert bold markers at start and end of selection\n        return {\n          range: EditorSelection.range(range.from + startMarker.length, range.to + startMarker.length),\n          changes: [\n            {from: range.from, insert: startMarker},\n            {from: range.to, insert: endMarker},\n        ]};\n      }\n    },\n    disable: (range, foundNodes) => {\n      // remove bold markers of all intersecting bold nodes\n      const removeMarkers = foundNodes\n        .flatMap(n => getChildren(n).concat(n))\n        .filter(c => markerTypes.includes(c.name) || (c.name === 'data' && state.doc.sliceString(c.from, c.to) === startMarker + endMarker));\n      let newRange = range;\n      const changes = [];\n      for (const cn of removeMarkers) {\n        const change = {from: cn.from, to: cn.to};\n        newRange = moveRangeDelete(newRange, range, change)\n        changes.push(change);\n      }\n      return { range: newRange, changes };\n    }\n  });\n}\n\nexport function toggleStrong({state, dispatch}) {\n  return toggleMarkerType({state, dispatch}, {\n    type: 'strong',\n    markerTypes: ['strongSequence'],\n    startMarker: '**',\n    endMarker: '**'\n  });\n}\n\nexport function toggleEmphasis({state, dispatch}) {\n  return toggleMarkerType({state, dispatch}, {\n    type: 'emphasis',\n    markerTypes: ['emphasisSequence'],\n    startMarker: '_',\n    endMarker: '_',\n  });\n}\n\nexport function toggleStrikethrough({state, dispatch}) {\n  return toggleMarkerType({state, dispatch}, {\n    type: 'strikethrough',\n    markerTypes: ['strikethroughSequence'],\n    startMarker: '~~',\n    endMarker: '~~'\n  });\n}\n\nexport function toggleListUnordered({state, dispatch}) {\n  return toggleMarkdownAction({state, dispatch}, {\n    isInSelection: n => n.name === 'listUnordered',\n    enable: (range, tree) => {\n      // Add marker to start of each line\n      // If line is a listItem of an listOrdered: replace the marker\n      const changes = [];\n      let newRange = range;\n      for (const line of linesInRange(state.doc, range)) {\n        const listItemNumber = getIntersectionNodes(tree, line, n => n.name === 'listItem' && n.parent.name === 'listOrdered')\n          .flatMap(n => getChildren(n))\n          .filter(n => n.name === 'listItemPrefix')\n          .find(n => intersectsRange(line, n));\n        \n        if (listItemNumber) {\n          const change = {from: listItemNumber.from, to: listItemNumber.to, insert: '* '};\n          newRange = moveRangeInsert(moveRangeDelete(newRange, range, change), range, change);\n          changes.push(change);\n        } else {\n          const change = {from: line.from, insert: '* '};\n          newRange = moveRangeInsert(newRange, range, change);\n          changes.push(change);\n        }\n      }\n      return {\n        range: newRange,\n        changes,\n      };\n    },\n    disable: (range, foundNodes) => {\n      const removeMarkers = foundNodes\n        .flatMap(n => getChildren(n))  // Get all listItems\n        .filter(i => intersectsRange(range, i))  // Get selected listItems\n        .flatMap(n => getChildren(n))\n        .filter(n => n.name === 'listItemPrefix');\n      let newRange = range;\n      const changes = [];\n      for (const cn of removeMarkers) {\n        const change = {from: cn.from, to: cn.to};\n        newRange = moveRangeDelete(newRange, range, change)\n        changes.push(change);\n      }\n      return { range: newRange, changes };\n    }\n  });\n}\n\nexport function toggleListOrdered({state, dispatch}) {\n  return toggleMarkdownAction({state, dispatch}, {\n    isInSelection: n => n.name === 'listOrdered',\n    enable: (range, tree) => {\n      // Add marker to start of each line\n      // If line is a listItem of an listUnordered: replace the marker\n      const changes = [];\n      let newRange = range;\n      let itemNumber = 0;\n      for (const line of linesInRange(state.doc, range)) {\n        itemNumber += 1;\n        const listItemNumber =  itemNumber + '. ';\n\n        const listItemBullet = getIntersectionNodes(tree, line, n => n.name === 'listItem' && n.parent.name === 'listUnordered')\n          .flatMap(n => getChildren(n))\n          .filter(n => n.name === 'listItemPrefix')\n          .find(n => intersectsRange(line, n));\n        \n        if (listItemBullet) {\n          const change = {from: listItemBullet.from, to: listItemBullet.to, insert: listItemNumber};\n          newRange = moveRangeInsert(moveRangeDelete(newRange, range, change), range, change);\n          changes.push(change);\n        } else {\n          const change = {from: line.from, insert: listItemNumber};\n          newRange = moveRangeInsert(newRange, range, change);\n          changes.push(change);\n        }\n      }\n      return {\n        range: newRange,\n        changes,\n      };\n    },\n    disable: (range, foundNodes) => {\n      const removeMarkers = foundNodes\n        .flatMap(n => getChildren(n))  // Get all listItems\n        .filter(i => intersectsRange(range, i))  // Get selected listItems\n        .flatMap(n => getChildren(n))\n        .filter(n => n.name === 'listItemPrefix');\n      let newRange = range;\n      const changes = [];\n      for (const cn of removeMarkers) {\n        const change = {from: cn.from, to: cn.to};\n        newRange = moveRangeDelete(newRange, range, change)\n        changes.push(change);\n      }\n      return { range: newRange, changes };\n    }\n  });\n}\n\n\nexport function toggleLink({state, dispatch}) {\n  return toggleMarkdownAction({state, dispatch}, {\n    isInSelection: n => n.name === 'link',\n    enable: (range) => {\n      return {\n        range: EditorSelection.range(range.from + 1, range.to + 1),\n        changes: [\n          {from: range.from, insert: '['},\n          {from: range.to, insert: '](' + (range.from === range.to ? 'https://' : state.doc.sliceString(range.from, range.to)) + ')'},\n        ]\n      };\n    },\n    disable: (range, foundNodes) => {\n      // Remove links only when a range is inside the link label\n      const linksToRemove = foundNodes\n        .filter(n => \n          getChildren(n)\n          .flatMap(c => getChildren(c))\n          .filter(c => c.name === 'labelText' && c.parent.name === 'label' && range.from >= c.from && range.to <= c.to)\n          .length === 1)\n        .flatMap(n => getChildren(n).flatMap(c => getChildren(c)))\n        .filter(c => !(c.name === 'labelText' && c.parent.name === 'label'));\n      const changes = [];\n      let newRange = range;\n      for (const n of linksToRemove) {\n        const change = {from: n.from, to: n.to};\n        newRange = moveRangeDelete(newRange, range, change);\n        changes.push(change);\n      }\n      return {\n        range: newRange,\n        changes,\n      };\n    }\n  });\n}\n\nexport function insertCodeBlock({state, dispatch}) {\n  return toggleMarkdownAction({state, dispatch}, {\n    isInSelection: n => n.name === 'codeFenced',\n    enable: (range) => {\n      // insert \"```\\n\" at the start of the first selected line and \"\\n```\" at the end of the last selected line\n      const codeBlockStart = state.lineBreak + '```' + state.lineBreak;\n      const codeBlockEnd = state.lineBreak + '```';\n      return {\n        range: EditorSelection.range(range.from + codeBlockStart.length, range.to + codeBlockStart.length),\n        changes: [\n          {from: state.doc.lineAt(range.from).from, insert: codeBlockStart},\n          {from: state.doc.lineAt(range.to).to, insert: codeBlockEnd},\n        ],\n      };\n    },\n  })\n}\n\nexport function insertTable({state, dispatch}) {\n  return toggleMarkdownAction({state, dispatch}, {\n    isInSelection: n => n.name === 'table',\n    enable: (range) => {\n      return {\n        range,\n        changes: [{\n          from: state.doc.lineAt(range.to).to, \n          insert: state.lineBreak +\n                  '| Column1 | Column2 | Column3 |' + state.lineBreak +\n                  '| ------- | ------- | ------- |' + state.lineBreak +\n                  '| Text    | Text    | Text    |' + state.lineBreak + \n                  state.lineBreak,\n        }],\n      };\n    }\n  });\n}\n\n","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--7-oneOf-1-3!../../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Toolbar.vue?vue&type=style&index=0&id=0eb62b93&prod&lang=scss&scoped=true&\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"76a20e68\", content, true, {\"sourceMap\":false});","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--7-oneOf-1-3!../../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Preview.vue?vue&type=style&index=0&id=0469da19&prod&lang=scss&scoped=true&\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"b251e776\", content, true, {\"sourceMap\":false});","import { micromarkEventsToTree, parseMicromarkEvents } from \"./micromark-utils\";\nimport { LanguageSupport, Language, defineLanguageFacet, languageDataProp, indentNodeProp } from '@codemirror/language';\nimport {html} from \"@codemirror/lang-html\"\nimport {Prec} from \"@codemirror/state\";\nimport { keymap } from '@codemirror/view';\nimport { Parser, Tree, NodeSet, NodeType, parseMixed } from '@lezer/common';\nimport {styleTags, tags as t} from \"@lezer/highlight\"\nimport { markdownParser } from \"..\";\nimport { tags } from \"./highlight\";\nimport { insertNewlineContinueMarkup, deleteMarkupBackward, toggleStrong, toggleEmphasis } from \"./commands\";\n\nconst markdownLanguageFacet = defineLanguageFacet({block: {open: '<!--', close: '-->'}});\n\nconst markdownHighlighting = styleTags({\n  \"strong/...\": t.strong,\n  \"emphasis/...\": t.emphasis,\n  \"strikethrough/...\": t.strikethrough,\n  \"codeText/...\": tags.inlinecode,\n  \"codeFenced/...\": tags.codeblock,\n  \"table/...\": tags.table,\n  \"blockQuote/...\": t.quote,\n  \"heading1/...\": t.heading1,\n  \"heading2/...\": t.heading2,\n  \"heading3/...\": t.heading3,\n  \"heading4/...\": t.heading4,\n  \"heading5/...\": t.heading5,\n  \"heading6/...\": t.heading6,\n  \"link/...\": t.link,\n  \"image/...\": t.link,\n  \"textAttributes/...\": t.link,\n  \"resource/...\": t.url,\n  \"inlineFootnote/...\": tags.footnote, \n  \"templateVariable\": tags.inlinecode,\n  \"todo/...\": tags.todo,\n});\nconst nodeTypes = [\n  'strong', 'strongSequence', 'emphasis', 'emphasisSequence', 'strikethrough', 'strikethroughSequence', \n  'codeText', 'codeFenced', 'table', 'blockQuote',\n  'heading1', 'heading2', 'heading3', 'heading4', 'heading5', 'heading6',\n  'link', 'image', 'resource', 'label', 'labelMarker', 'labelText',\n  'inlineFootnote', 'textAttributes', 'templateVariable', 'todo',\n  'htmlText', 'htmlFlow',\n  'data', 'paragraph', 'content', 'document', 'lineEnding',\n  'listOrdered', 'listUnordered', 'listItem', 'listItemPrefix', 'blockQuotePrefix', 'listItemMarker', \n];\nconst nodeSet = new NodeSet([NodeType.none].concat(nodeTypes.map((type, idx) => NodeType.define({id: idx + 1, name: type}))))\n  .extend(markdownHighlighting)\n  .extend(languageDataProp.add({ document: markdownLanguageFacet }))\n  .extend(indentNodeProp.add({ document: () => null }));\n\n\nfunction modifySyntaxTree(tree) {\n  visitTree(tree);\n  return tree;\n\n  function visitTree(t) {\n    for (const n of t) {\n      visitNode(n);\n      if ((n.children?.length || 0) > 0) {\n        visitTree(n.children);\n      }\n    }\n  }\n  function visitNode(n) {\n    // Add ListItem nodes\n    if (['listOrdered', 'listUnordered'].includes(n.type)) {\n      let listItems = [];\n      let currentListItem = [];\n      for (const c of n.children) {\n        if (c.type === 'listItemPrefix') {\n          addListItem();\n        }\n        currentListItem.push(c);\n      }\n      addListItem();\n\n      function addListItem() {\n        if (currentListItem.length > 0) {      \n          const info = {\n            type: 'listItem',\n            start: currentListItem[0].enter.start,\n            end: currentListItem.slice(-1)[0].exit.end,\n          };\n\n          listItems.push({\n            type: 'listItem', \n            enter: info,\n            exit: info,\n            children: currentListItem,\n          });\n          currentListItem = [];\n        }\n      }\n\n      if (listItems.length > 0) {\n        n.children = listItems;\n      }\n    }\n  }\n}\n\nfunction micromarkToLezerSyntaxTree(text, events) {\n  const tree = modifySyntaxTree(micromarkEventsToTree(text, events));\n  // console.log('markdown syntax tree', tree);\n  \n  function toBuffer(node) {\n    const buffer = [];\n    for (const c of node.children || []) {\n      buffer.push(...toBuffer(c));\n    }\n    let nodeId = nodeSet.types.find(t => t.name === node.enter.type);\n    if (node.type === 'atxHeading' && node.children.length >= 1 && node.children[0].type === 'atxHeadingSequence') {\n      nodeId = nodeSet.types.find(t => t.name === 'heading' + node.children[0].text.length || 0);\n    }\n    \n    buffer.push((nodeId || NodeType.none).id, node.enter.start.offset, node.enter.end.offset, 4 + buffer.length);\n    return buffer;\n  }\n\n  return Tree.build({\n    buffer: tree.length > 0 ? toBuffer({children: tree, enter: {type: 'document', start: tree[0].enter.start, end: tree.slice(-1)[0].enter.end}}) : [],\n    nodeSet: nodeSet,\n    topID: nodeSet.types.find(t => t.name === 'document').id,\n  });\n}\n\n\nexport function lezerSyntaxTreeParse() {\n  const micromarkExtensions = this.data('micromarkExtensions') || [];\n  this.Parser = parser;\n\n  function parser(text) {\n    const events = parseMicromarkEvents(text, {extensions: micromarkExtensions});\n    return micromarkToLezerSyntaxTree(text, events);\n  }\n}\n\n\nclass BlockContext {\n  constructor(parser, input, fragments, ranges) {\n    this.parser = parser;\n    this.input = input;\n    this.fragments = fragments;\n    this.ranges = ranges;\n    this.stoppedAt = null;\n  }\n  \n  advance() {\n    // TODO: support incremental parsing: only parse current (and sourrounding?) blocks to increase performance\n    // test performance:\n    // * ~1ms: very short text\n    // * 10-20ms: longer md document with many costructs\n    // * 10-20ms: long text, no markup\n    // * ~30-100ms: https://raw.githubusercontent.com/toptensoftware/markdowndeep/master/Backup/MarkdownDeepBenchmark/benchmark/markdown-example-long-2.text\n    return markdownParser()\n    .use(lezerSyntaxTreeParse)\n    .parse(this.input.read(0, this.input.length));\n  }\n\n  get parsedPos() {\n    return this.input.length;\n  }\n\n  stopAt(pos) {\n    this.stoppedAt = pos;\n  }\n\n}\n\n\nclass MarkdownParser extends Parser {\n  createParse(input, fragments, ranges) {\n    const mdParser = new BlockContext(this, input, fragments, ranges);\n    return parseMixed((node, input) => {\n      if (['htmlText', 'htmlFlow'].includes(node.name)) {\n        return {parser: htmlLanguage.language.parser, overlay: [{from: node.from, to: node.to}]}\n      }\n      return null;\n    })(mdParser, input, fragments, ranges);\n  }\n}\n\nconst htmlLanguage = html({matchClosingTags: false});\n\nexport const markdownLanguage = new Language(\n  markdownLanguageFacet, \n  new MarkdownParser()\n);\n\nexport function markdown() {\n  return new LanguageSupport(markdownLanguage, [\n    Prec.high(keymap.of([\n      {key: 'Enter', run: insertNewlineContinueMarkup},\n      {key: 'Backspace', run: deleteMarkupBackward},\n    ])),\n    keymap.of([\n      {key: 'Mod-b', run: toggleStrong},\n      {key: 'Mod-i', run: toggleEmphasis},\n    ])\n  ]);\n}\n","import { syntaxTree } from \"@codemirror/language\";\nimport { RangeSetBuilder } from \"@codemirror/state\";\nimport { Decoration, ViewPlugin } from \"@codemirror/view\";\nimport { tags as t, Tag, tagHighlighter } from \"@lezer/highlight\";\nimport { linesInRange } from \"./codemirror-utils\";\n\nexport const tags = {\n  codeblock: Tag.define(),\n  inlinecode: Tag.define(),\n  footnote: Tag.define(),\n  table: Tag.define(),\n  todo: Tag.define(),\n};\n\n      \nexport const markdownHighlightStyle = tagHighlighter([\n  {tag: t.heading1, class: 'tok-h1'},\n  {tag: t.heading2, class: 'tok-h2'},\n  {tag: t.heading3, class: 'tok-h3'},\n  {tag: t.heading4, class: 'tok-h4'},\n  {tag: t.heading5, class: 'tok-h5'},\n  {tag: t.heading6, class: 'tok-h6'},\n  {tag: t.strong, class: 'tok-strong'},\n  {tag: t.emphasis, class: 'tok-emphasis'},\n  {tag: t.strikethrough, class: 'tok-strikethrough'},\n  {tag: t.link, class: 'tok-link'},\n  {tag: t.url, class: 'tok-url'},\n  {tag: t.quote, class: 'tok-quote'},\n\n  {tag: tags.inlinecode, class: 'tok-inlinecode'},\n  {tag: tags.table, class: 'tok-table'},\n  {tag: tags.footnote, class: 'tok-footnote'},\n  {tag: tags.todo, class: 'tok-todo'},\n\n  {tag: t.tagName, class: 'tok-tagname'},\n  {tag: t.angleBracket, class: 'tok-anglebracket'},\n  {tag: t.attributeName, class: 'tok-attributename'},\n  {tag: t.attributeValue, class: 'tok-attributevalue'},\n  {tag: t.comment, class: 'tok-comment'},\n]);\n\n\n// https://discuss.codemirror.net/t/how-to-define-highlighting-styles-for-blocks/4029\nexport const markdownHighlightCodeBlocks = ViewPlugin.fromClass(class {\n  decorations = Decoration.none;\n\n  constructor(view) {\n    this.updateDecorations(view);\n  }\n\n  update(update) {\n    this.updateDecorations(update.view);\n  }\n\n  updateDecorations(view) {\n    let builder = new RangeSetBuilder();\n    syntaxTree(view.state).iterate({\n      enter: (n) => {\n        if (n.name === 'codeFenced') {\n          for (const l of linesInRange(view.state.doc, n)) {\n            builder.add(l.from, l.from, Decoration.line({class: 'tok-codeblock'}));\n          }    \n        }\n      }\n    })\n    this.decorations = builder.finish();\n  }\n}, {decorations: v => v.decorations});","import { Compartment, StateEffect } from '@codemirror/state';\n\nexport function createEditorCompartment(view) {\n  const compartment = new Compartment();\n  const run = (extension) => {\n    compartment.get(view.state)\n      ? view.dispatch({ effects: compartment.reconfigure(extension) }) // reconfigure\n      : view.dispatch({ effects: StateEffect.appendConfig.of(compartment.of(extension)) }) // inject\n  }\n  return { compartment, run }\n}\n\nexport function createEditorExtensionToggler(view, extension) {\n  const { compartment, run } = createEditorCompartment(view)\n  return (targetApply) => {\n    const exExtension = compartment.get(view.state)\n    const apply = targetApply ?? exExtension !== extension\n    run(apply ? extension : [])\n  }\n}\n","import { markdownToAnnotatedText } from \"..\";\nimport { linter, setDiagnostics, forEachDiagnostic } from \"@codemirror/lint\";\nimport elt from \"crelt\";\nimport { EditorView } from \"@codemirror/view\";\n\n\nconst MAX_REPLACEMENTS = 5;\nconst SPELLING_RULE_IDS = [\n  \"SPELLER_RULE\",\n  \"MORFOLOGIK_RULE\",\n  \"HUNSPELL\",\n  \"SPELLING_RULE\"\n];\nconst STYLE_ISSUE_TYPES = [\n  \"style\",\n  \"locale-violation\",\n  \"register\"\n];\n\n\nexport function spellcheck({ performSpellcheckRequest, performSpellcheckAddWordRequest }) {\n  return linter(async (view) => {\n    const annotatedText = markdownToAnnotatedText(view.state.doc.toString());\n    if (annotatedText.length === 0) {\n      return [];\n    }\n\n    const spellcheckResults = await performSpellcheckRequest({\n      data: {annotation: annotatedText},\n    });\n    \n    return spellcheckResults.matches.map(m => {\n      const severity = SPELLING_RULE_IDS.some(r => m.rule.id.includes(r)) ? 'error' :\n                       STYLE_ISSUE_TYPES.some(r => m.rule.id.includes(r)) ? 'info' : \n                       'warning';\n      const from = m.offset;\n      const to = Math.min(m.offset + m.length, view.state.doc.length);\n      return {\n        from,\n        to,\n        severity: severity,\n        renderMessage() {\n          return elt('div', {class: 'cm-spellcheck-content'},\n            elt('div', {class: 'cm-spellcheck-title cm-spellcheck-title-' + severity}, m.rule.category.name),\n            elt('div', {class: 'cm-spellcheck-message'}, \n              m.message,\n              m.rule.urls?.length > 0 ? elt('a', {href: m.rule.urls[0].value, target: '_blank', rel: 'noreferrer noopener', class: 'cm-spellcheck-details'}) : null,\n            ),\n          );\n        },\n        actions: m.replacements.slice(0, MAX_REPLACEMENTS).map(r => ({\n          name: r.value,\n          apply(view, from, to) {\n            view.dispatch({changes: {from, to, insert: r.value}});\n          }\n        })).concat((performSpellcheckAddWordRequest && severity === 'error') ? [{\n          name: `Add \"${view.state.doc.sliceString(from, to)}\" to dictionary`,\n          async apply(view, from, to) {\n            const word = view.state.doc.sliceString(from, to);\n            await performSpellcheckAddWordRequest({ word });\n            \n            // remove spellcheck errors for word\n            const diagnostics = []\n            forEachDiagnostic(view.state, (d, from, to) => {\n              if (!(d.severity === 'error' && view.state.doc.sliceString(from, to) == word)) {\n                diagnostics.push(d);\n              }\n            });\n            view.dispatch(setDiagnostics(view.state, diagnostics));\n          }\n        }] : []),\n      };\n    });\n  }, {delay: 750});\n}\n\n\nfunction svg(content, attrs = `viewBox=\"0 0 40 40\"`) {\n  return `url('data:image/svg+xml,<svg xmlns=\"http://www.w3.org/2000/svg\" ${attrs}>${encodeURIComponent(content)}</svg>')`\n}\n\nfunction underline(color) {\n  return svg(`<path d=\"m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0\" stroke=\"${color}\" fill=\"none\" stroke-width=\".7\"/>`,\n             `width=\"6\" height=\"3\"`)\n}\n\nexport const spellcheckTheme = EditorView.theme({\n  '.cm-diagnostic': {\n    listStyle: 'none',\n    fontSize: '10pt',\n    maxWidth: '400px',\n    backgroundColor: 'white',\n    paddingBottom: '0.5em',\n  },\n  '.cm-diagnosticText': {\n    display: 'block',\n    marginBottom: '0.5em',\n  },\n  '.cm-diagnosticAction': {\n    backgroundColor: '#45a8fc',\n    color: 'white',\n    marginLeft: '0',\n    marginRight: '8px',\n    '&:hover': {\n      backgroundColor: '#1976d2'\n    },\n  },\n  [`.cm-diagnosticAction[aria-label*=\"Add \"][aria-label*=\" to dictionary\"]`]: {\n    display: 'block',\n    backgroundColor: 'inherit',\n    color: 'gray',\n    width: '100%',\n    textAlign: 'center',\n    marginTop: '0.5em',\n    '&:hover': {\n      backgroundColor: 'rgba(0, 0, 0, 0.05)',\n    },\n  },\n  '.cm-spellcheck-details': {\n    opacity: '0.7',\n    background: 'transparent url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTEwIDRhNiA2IDAgMTAwIDEyIDYgNiAwIDAwMC0xMnptMC0xYTcgNyAwIDExMCAxNCA3IDcgMCAwMTAtMTR6bS0uNSA2aDFhLjUuNSAwIDExMCAxdjNhLjUuNSAwIDExMCAxaC0xYS41LjUgMCAxMTAtMXYtM2EuNS41IDAgMDEwLTF6bS41LTFhMSAxIDAgMTEwLTIgMSAxIDAgMDEwIDJ6IiBmaWxsPSIjM0MzRjQ5IiBmaWxsLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=) 50% no-repeat',\n    backgroundSize: '100% 100%',\n    display: 'inline-block',\n    marginBottom: '-0.3em',\n    marginLeft: '0.2em',\n  },\n  '.cm-spellcheck-title': {\n    fontWeight: 'bold',\n    paddingLeft: '1.3em',\n  },\n  '.cm-spellcheck-title:before': {\n    content: '\"\"',\n    height: '0.6em',\n    width: '0.6em',\n    borderRadius: '50%',\n    position: 'absolute',\n    left: '1em',\n    top: '0.5em',\n  },\n  '.cm-spellcheck-title-error:before': { background: '#f91a47' },\n  '.cm-spellcheck-title-warning:before': { background: 'orange' },\n  '.cm-spellcheck-title-info:before': { background: '#5c4cff' },\n\n  \".cm-diagnostic-error\": { borderLeft: \"5px solid #f91a47\" },\n  \".cm-diagnostic-warning\": { borderLeft: \"5px solid orange\" },\n  \".cm-diagnostic-info\": { borderLeft: \"5px solid #5c4cff\" },\n\n  '.cm-lintRange-error': { backgroundImage: underline('#f91a47') },\n  '.cm-lintRange-warning': { backgroundImage: underline('orange') },\n  '.cm-lintRange-info': { backgroundImage: underline('#5c4cff') },\n});\n","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--7-oneOf-1-3!../../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Statusbar.vue?vue&type=style&index=0&id=bdd476bc&prod&lang=scss&scoped=true&\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"52db84eb\", content, true, {\"sourceMap\":false});","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--7-oneOf-1-3!../../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FieldContent.vue?vue&type=style&index=0&id=2ccd4d7e&prod&lang=scss&scoped=true&\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"db1f567a\", content, true, {\"sourceMap\":false});","export * from \"-!../../node_modules/vue-style-loader/index.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--7-oneOf-1-3!../../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ToolbarButton.vue?vue&type=style&index=0&id=5dedde00&prod&lang=scss&scoped=true&\"","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../node_modules/css-loader/dist/runtime/api.js\");\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(false);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".v-btn--outlined[data-v-5dedde00]{border-radius:15%}\", \"\"]);\n// Exports\nmodule.exports = ___CSS_LOADER_EXPORT___;\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js??ref--2-0!../../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ToolbarButton.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js??ref--2-0!../../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ToolbarButton.vue?vue&type=script&lang=js&\"","\nexport default {\n  props: {\n    icon: {\n      type: String,\n      required: true,\n    },\n    title: {\n      type: String,\n      default: '',\n    },\n    disabled: {\n      type: Boolean,\n      default: false,\n    },\n    active: {\n      type: Boolean,\n      default: false,\n    },\n  },\n}\n","import { render, staticRenderFns } from \"./ToolbarButton.vue?vue&type=template&id=5dedde00&scoped=true&\"\nimport script from \"./ToolbarButton.vue?vue&type=script&lang=js&\"\nexport * from \"./ToolbarButton.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ToolbarButton.vue?vue&type=style&index=0&id=5dedde00&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5dedde00\",\n  null\n  \n)\n\nexport default component.exports\n\n/* nuxt-component-imports */\ninstallComponents(component, {SBtn: require('/app/frontend/components/S/Btn.vue').default,STooltip: require('/app/frontend/components/S/Tooltip.vue').default})\n","export * from \"-!../../node_modules/vue-style-loader/index.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--7-oneOf-1-3!../../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Toolbar.vue?vue&type=style&index=0&id=0eb62b93&prod&lang=scss&scoped=true&\"","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../node_modules/css-loader/dist/runtime/api.js\");\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(false);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".toolbar[data-v-0eb62b93]{background-color:inherit!important}.separator[data-v-0eb62b93]{display:inline-block;height:1.5em;width:0;border-left:1px solid #d9d9d9;border-right:1px solid #fff;color:transparent;text-indent:-10px;margin:0 .5em}\", \"\"]);\n// Exports\nmodule.exports = ___CSS_LOADER_EXPORT___;\n","export * from \"-!../../node_modules/vue-style-loader/index.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--7-oneOf-1-3!../../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Preview.vue?vue&type=style&index=0&id=0469da19&prod&lang=scss&scoped=true&\"","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../node_modules/css-loader/dist/runtime/api.js\");\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(false);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".preview[data-v-0469da19]{overflow:auto;word-wrap:break-word;background-color:#fafafa}.preview[data-v-0469da19]> :first-child{margin-top:0}.preview[data-v-0469da19]  table{width:100%;caption-side:bottom}.preview[data-v-0469da19]  table,.preview[data-v-0469da19]  td,.preview[data-v-0469da19]  th{border:1px solid #000;border-collapse:collapse}.preview[data-v-0469da19]  th{font-weight:700}.preview[data-v-0469da19]  td,.preview[data-v-0469da19]  th{padding:.3em}.preview[data-v-0469da19]  thead,.preview[data-v-0469da19]  tr{page-break-inside:avoid;-moz-column-break-inside:avoid;break-inside:avoid}.preview[data-v-0469da19]  thead{page-break-after:avoid;-moz-column-break-after:avoid;break-after:avoid}.preview[data-v-0469da19]  caption{font-weight:700;page-break-before:avoid;-moz-column-break-before:avoid;break-before:avoid}.preview[data-v-0469da19]  caption,.preview[data-v-0469da19]  figure{page-break-inside:avoid;-moz-column-break-inside:avoid;break-inside:avoid}.preview[data-v-0469da19]  figure{text-align:center;margin-left:0;margin-right:0}.preview[data-v-0469da19]  figcaption{font-weight:700;page-break-inside:avoid;-moz-column-break-inside:avoid;break-inside:avoid;page-break-before:avoid;-moz-column-break-before:avoid;break-before:avoid}.preview[data-v-0469da19]  img{max-width:100%}.preview[data-v-0469da19]  h1{font-size:2rem}.preview[data-v-0469da19]  h2{font-size:1.6rem}.preview[data-v-0469da19]  h3{font-size:1.4rem}.preview[data-v-0469da19]  h4{font-size:1.25rem}.preview[data-v-0469da19]  h5{font-size:1.1rem}.preview[data-v-0469da19]  h6{font-size:1rem}.preview[data-v-0469da19]  h1,.preview[data-v-0469da19]  h2,.preview[data-v-0469da19]  h3,.preview[data-v-0469da19]  h4,.preview[data-v-0469da19]  h5,.preview[data-v-0469da19]  h6{font-weight:700;margin:1em 0 .4em}.preview[data-v-0469da19]  .code-block,.preview[data-v-0469da19]  .markdown,.preview[data-v-0469da19]  blockquote,.preview[data-v-0469da19]  ol,.preview[data-v-0469da19]  p,.preview[data-v-0469da19]  table,.preview[data-v-0469da19]  ul{margin:0 0 .8em;padding:0}.preview[data-v-0469da19]  .code-block:last-child,.preview[data-v-0469da19]  .markdown:last-child,.preview[data-v-0469da19]  blockquote:last-child,.preview[data-v-0469da19]  ol:last-child,.preview[data-v-0469da19]  p:last-child,.preview[data-v-0469da19]  table:last-child,.preview[data-v-0469da19]  ul:last-child{margin-bottom:0}.preview[data-v-0469da19]  blockquote{background:#f9f9f9;border-left:5px solid #ccc;padding:.1em .5em}.preview[data-v-0469da19]  ol li,.preview[data-v-0469da19]  ul li{margin-left:1.5em;padding-left:0}.preview[data-v-0469da19]  ul li.task-list-item{list-style-type:none}.preview[data-v-0469da19]  ul li.task-list-item input[type=checkbox]{margin-left:-1.5em;width:1.5em;padding:0}.preview[data-v-0469da19]  pre{white-space:pre-wrap}.preview[data-v-0469da19]  code{padding:.2em;border-radius:3px;font-family:monospace;font-size:.85em;background-color:#f0f0f0}.preview[data-v-0469da19]  pre code{padding:1em;display:block}.preview[data-v-0469da19]  .footnotes{border-top:1px solid #000;margin-top:2em}.preview[data-v-0469da19]  .footnotes h4{font-size:1em}.preview[data-v-0469da19]  .footnotes .data-footnote-backref{display:none}.preview[data-v-0469da19]  .file-download-preview{text-align:center;font-size:inherit;text-decoration:none}.preview[data-v-0469da19]  .file-download-preview:before{font-size:20pt}.preview[data-v-0469da19]  .ref{color:inherit;font-style:inherit;text-decoration:underline}\", \"\"]);\n// Exports\nmodule.exports = ___CSS_LOADER_EXPORT___;\n","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--7-oneOf-1-3!../../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Field.vue?vue&type=style&index=0&id=4da8136f&prod&lang=scss&scoped=true&\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"2b32e012\", content, true, {\"sourceMap\":false});","\nimport { undo, redo, undoDepth, redoDepth } from '@codemirror/commands';\nimport { isTypeInSelection, toggleStrong, toggleEmphasis, toggleStrikethrough, toggleListUnordered, toggleListOrdered, toggleLink, insertCodeBlock, insertTable } from 'reportcreator-markdown/editor/commands.js';\n\nexport default {\n  props: {\n    editorView: {\n      type: Object,\n      required: true,\n    },\n    disabled: {\n      type: Boolean,\n      default: false,\n    },\n    uploadFiles: {\n      type: Function,\n      default: null\n    },\n    fileUploadInProgress: {\n      type: Boolean,\n      default: false\n    },\n    lang: {\n      type: String,\n      default: null,\n    },\n  },\n  computed: {\n    editorMode: {\n      get() {\n        return this.$store.state.settings.markdownEditorMode;\n      },\n      set(val) {\n        this.$store.commit('settings/updateMarkdownEditorMode', val);\n      },\n    },\n    spellcheckSupported() {\n      return this.$store.getters['apisettings/settings'].features.spellcheck &&\n             this.$store.getters['apisettings/settings'].languages.find(l => l.code === this.lang)?.spellcheck;\n    },\n    spellcheckEnabled: {\n      get() {\n        return this.$store.state.settings.spellcheckEnabled && this.spellcheckSupported;\n      },\n      set(val) {\n        this.$store.commit('settings/updateSpellcheckEnabled', val);\n      }\n    },\n    canUndo() {\n      if (this.editorView) {\n        return undoDepth(this.editorView.state);\n      }\n      return false;\n    },\n    canRedo() {\n      if (this.editorView) {\n        return redoDepth(this.editorView.state);\n      }\n      return false;\n    },\n  },\n  methods: {\n    ...Object.fromEntries(Object.entries({\n      undo,\n      redo,\n      toggleStrong,\n      toggleEmphasis,\n      toggleStrikethrough,\n      toggleListUnordered,\n      toggleListOrdered,\n      toggleLink,\n      insertCodeBlock,\n      insertTable,\n    })\n      .map(([n, fn]) => [n, function() { \n        if (!this.editorView) {\n          return false;\n        }\n\n        try {\n          return fn(this.editorView); \n        } catch (err) {\n          // eslint-disable-next-line no-console\n          console.error('Error in CodeMirror action', err);\n        }\n      }])),\n    isTypeInSelection(type) {\n      if (!this.editorView) {\n        return false;\n      }\n      return isTypeInSelection(this.editorView.state, type);\n    },\n    async onUploadFiles(event) {\n      const files = event.target.files;\n      try {\n        await this.uploadFiles(files);\n      } finally {\n        this.$refs.fileInput.value = null;\n      }\n    },\n  }\n}\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js??ref--2-0!../../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Toolbar.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js??ref--2-0!../../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Toolbar.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Toolbar.vue?vue&type=template&id=0eb62b93&scoped=true&\"\nimport script from \"./Toolbar.vue?vue&type=script&lang=js&\"\nexport * from \"./Toolbar.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Toolbar.vue?vue&type=style&index=0&id=0eb62b93&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0eb62b93\",\n  null\n  \n)\n\nexport default component.exports\n\n/* nuxt-component-imports */\ninstallComponents(component, {MarkdownToolbarButton: require('/app/frontend/components/Markdown/ToolbarButton.vue').default})\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js??ref--2-0!../../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Preview.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js??ref--2-0!../../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Preview.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Preview.vue?vue&type=template&id=0469da19&scoped=true&\"\nimport script from \"./Preview.vue?vue&type=script&lang=js&\"\nexport * from \"./Preview.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Preview.vue?vue&type=style&index=0&id=0469da19&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0469da19\",\n  null\n  \n)\n\nexport default component.exports","import { EditorState } from '@codemirror/state';\nimport { EditorView, keymap, lineNumbers } from '@codemirror/view';\nimport { defaultKeymap, historyKeymap, indentWithTab, history } from '@codemirror/commands';\nimport { createEditorExtensionToggler } from 'reportcreator-markdown/editor/utils';\nimport { markdown } from 'reportcreator-markdown/editor/language.js';\nimport { spellcheck, spellcheckTheme } from 'reportcreator-markdown/editor/spellcheck.js';\nimport 'highlight.js/styles/default.css';\nimport { syntaxHighlighting, indentUnit } from '@codemirror/language';\nimport { forceLinting, setDiagnostics } from '@codemirror/lint';\nimport { markdownHighlightStyle, markdownHighlightCodeBlocks } from 'reportcreator-markdown/editor/highlight.js';\n\nexport default {\n  props: {\n    value: {\n      type: String,\n      default: '',\n    },\n    uploadFile: {\n      type: Function,\n      default: null,\n    },\n    rewriteFileUrl: {\n      type: Function,\n      default: null,\n    },\n    rewriteReferenceLink: {\n      type: Function,\n      default: null,\n    },\n    disabled: {\n      type: Boolean,\n      default: false,\n    },\n    lang: {\n      type: String,\n      default: null,\n    }\n  },\n  emits: ['input'],\n  data() {\n    return {\n      editorView: null,\n      editorActions: {},\n      fileUploadInProgress: false,\n    };\n  },\n  computed: {\n    valueNotNull() {\n      return this.value || '';\n    },\n    editorMode() {\n      return this.$store.state.settings.markdownEditorMode;\n    },\n    spellcheckEnabled() {\n      return this.lang !== null && !this.disabled && \n        this.$store.state.settings.spellcheckEnabled && this.$store.getters['apisettings/settings'].features.spellcheck &&\n        this.$store.getters['apisettings/settings'].languages.find(l => l.code === this.lang)?.spellcheck;\n    },\n  },\n  watch: {\n    value() {\n      if (this.editorView && this.valueNotNull !== this.editorView.state.doc.toString()) {\n        this.editorView.dispatch({\n          changes: {\n            from: 0,\n            to: this.editorView.state.doc.length,\n            insert: this.valueNotNull,\n          }\n        });\n      }\n    },\n    disabled(val) {\n      if (this.editorActions) {\n        this.editorActions.disabled(val);\n      }\n    },\n    lang(val) {\n      if (this.spellcheckEnabled) {\n        forceLinting(this.editorView);\n      }\n    },\n    spellcheckEnabled(val) {\n      this.editorActions.spellcheck(val);\n      if (!val) {\n        // clear existing spellcheck items from editor\n        this.editorView.dispatch(setDiagnostics(this.editorView.state, []));\n      }\n    }\n  },\n  mounted() {\n    this.initializeEditorView();\n  },\n  beforeDestroy() {\n    if (this.editorView) {\n      this.editorView.destroy();\n    }\n  },\n  methods: {\n    initializeEditorView() {\n      this.editorView = new EditorView({\n        parent: this.$refs.editor,\n        state: EditorState.create({\n          doc: this.valueNotNull,\n          extensions: [\n            lineNumbers(),\n            history(),\n            EditorState.allowMultipleSelections.of(true),\n            EditorView.lineWrapping,\n            EditorState.tabSize.of(4),\n            indentUnit.of('    '),\n            keymap.of([defaultKeymap, indentWithTab, historyKeymap]),\n            markdown(),\n            syntaxHighlighting(markdownHighlightStyle),\n            markdownHighlightCodeBlocks,\n            EditorView.updateListener.of((viewUpdate) => {\n              // https://discuss.codemirror.net/t/codemirror-6-proper-way-to-listen-for-changes/2395/11\n              if (viewUpdate.docChanged && viewUpdate.state.doc.toString() !== this.valueNotNull) {\n                this.$emit('input', viewUpdate.state.doc.toString());\n              }\n            }),\n            ...this.additionalCodeMirrorExtensions(),\n          ]\n        }),\n      });\n\n      this.editorActions = {\n        disabled: createEditorExtensionToggler(this.editorView, [\n          EditorView.editable.of(false),\n          EditorState.readOnly.of(true),\n        ]),\n        spellcheck: createEditorExtensionToggler(this.editorView, [\n          spellcheck({ performSpellcheckRequest: this.performSpellcheckRequest, performSpellcheckAddWordRequest: this.performSpellcheckAddWordRequest }),\n          spellcheckTheme,\n        ]),\n        uploadFile: createEditorExtensionToggler(this.editorView, [\n          EditorView.domEventHandlers({\n            drop: (event, view) => {\n              event.stopPropagation();\n              event.preventDefault();\n              const dropPos = this.editorView.posAtCoords({ x: event.clientX, y: event.clientY });\n              this.uploadFiles(event.dataTransfer.files, dropPos);\n            },\n            paste: (event, view) => {\n              if (event.clipboardData.files?.length > 0) {\n                event.stopPropagation();\n                event.preventDefault();\n                this.uploadFiles(event.clipboardData.files);\n              }\n            }\n          })\n        ]),\n      };\n      this.editorActions.disabled(this.disabled);\n      this.editorActions.spellcheck(this.spellcheckEnabled);\n      this.editorActions.uploadFile(this.uploadFile !== null);\n    },\n    additionalCodeMirrorExtensions() {\n      return [];\n    },\n    handleInput(val) {\n      this.$emit('input', val);\n    },\n    handleBlur(val) {\n      this.$emit('blur', val);\n    },\n    async uploadFiles(files, pos = null) {\n      if (!this.uploadFile || !files || files.length === 0 || this.fileUploadInProgress) {\n        return;\n      }\n\n      try {\n        this.fileUploadInProgress = true;\n        const results = await Promise.all(Array.from(files).map((file) => {\n          try {\n            return this.uploadFile(file);\n          } catch (error) {\n            this.$toast.global.requestError({ error, message: 'Failed to upload ' + file.name });\n            return null;\n          }\n        }));\n\n        const mdFileText = results.filter(u => u).join('\\n');\n        if (pos === null) {\n          pos = this.editorView.state.selection.main.from;\n        }\n        this.editorView.dispatch({ changes: { from: pos, insert: mdFileText } });\n      } finally {\n        this.fileUploadInProgress = false;\n      }\n    },\n    async performSpellcheckRequest(data) {\n      if (!this.spellcheckEnabled || !data) {\n        return {\n          matches: []\n        };\n      }\n\n      return await this.$axios.$post('/utils/spellcheck/', {\n        ...data,\n        language: this.lang,\n      });\n    },\n    async performSpellcheckAddWordRequest(data) {\n      try {\n        return await this.$axios.$post('/utils/spellcheck/words/', data);\n      } catch (error) {\n        this.$toast.global.requestError({ error });\n      }\n    },\n  }\n}\n","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../sass-loader/dist/cjs.js??ref--6-oneOf-1-3!./VTextarea.sass\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"5c8fbe94\", content, true, {\"sourceMap\":false});","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../css-loader/dist/runtime/api.js\");\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(false);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".theme--light.v-textarea.v-text-field--solo-inverted.v-input--is-focused textarea{color:#fff}.theme--light.v-textarea.v-text-field--solo-inverted.v-input--is-focused textarea::-moz-placeholder{color:hsla(0,0%,100%,.5)}.theme--light.v-textarea.v-text-field--solo-inverted.v-input--is-focused textarea::placeholder{color:hsla(0,0%,100%,.5)}.theme--dark.v-textarea.v-text-field--solo-inverted.v-input--is-focused textarea{color:rgba(0,0,0,.87)}.theme--dark.v-textarea.v-text-field--solo-inverted.v-input--is-focused textarea::-moz-placeholder{color:rgba(0,0,0,.38)}.theme--dark.v-textarea.v-text-field--solo-inverted.v-input--is-focused textarea::placeholder{color:rgba(0,0,0,.38)}.v-textarea textarea{align-self:stretch;flex:1 1 auto;line-height:1.75rem;max-width:100%;min-height:32px;outline:none;padding:0;width:100%}.v-textarea .v-text-field__prefix,.v-textarea .v-text-field__suffix{padding-top:2px;align-self:start}.v-textarea.v-text-field--box .v-text-field__prefix,.v-textarea.v-text-field--box textarea,.v-textarea.v-text-field--enclosed .v-text-field__prefix,.v-textarea.v-text-field--enclosed textarea{margin-top:24px}.v-textarea.v-text-field--box.v-text-field--outlined:not(.v-input--dense) .v-text-field__prefix,.v-textarea.v-text-field--box.v-text-field--outlined:not(.v-input--dense) .v-text-field__suffix,.v-textarea.v-text-field--box.v-text-field--outlined:not(.v-input--dense) textarea,.v-textarea.v-text-field--box.v-text-field--single-line:not(.v-input--dense) .v-text-field__prefix,.v-textarea.v-text-field--box.v-text-field--single-line:not(.v-input--dense) .v-text-field__suffix,.v-textarea.v-text-field--box.v-text-field--single-line:not(.v-input--dense) textarea,.v-textarea.v-text-field--enclosed.v-text-field--outlined:not(.v-input--dense) .v-text-field__prefix,.v-textarea.v-text-field--enclosed.v-text-field--outlined:not(.v-input--dense) .v-text-field__suffix,.v-textarea.v-text-field--enclosed.v-text-field--outlined:not(.v-input--dense) textarea,.v-textarea.v-text-field--enclosed.v-text-field--single-line:not(.v-input--dense) .v-text-field__prefix,.v-textarea.v-text-field--enclosed.v-text-field--single-line:not(.v-input--dense) .v-text-field__suffix,.v-textarea.v-text-field--enclosed.v-text-field--single-line:not(.v-input--dense) textarea{margin-top:10px}.v-textarea.v-text-field--box.v-text-field--outlined:not(.v-input--dense) .v-label,.v-textarea.v-text-field--box.v-text-field--single-line:not(.v-input--dense) .v-label,.v-textarea.v-text-field--enclosed.v-text-field--outlined:not(.v-input--dense) .v-label,.v-textarea.v-text-field--enclosed.v-text-field--single-line:not(.v-input--dense) .v-label{top:18px}.v-textarea.v-text-field--box.v-text-field--outlined.v-input--dense .v-text-field__prefix,.v-textarea.v-text-field--box.v-text-field--outlined.v-input--dense .v-text-field__suffix,.v-textarea.v-text-field--box.v-text-field--outlined.v-input--dense textarea,.v-textarea.v-text-field--box.v-text-field--single-line.v-input--dense .v-text-field__prefix,.v-textarea.v-text-field--box.v-text-field--single-line.v-input--dense .v-text-field__suffix,.v-textarea.v-text-field--box.v-text-field--single-line.v-input--dense textarea,.v-textarea.v-text-field--enclosed.v-text-field--outlined.v-input--dense .v-text-field__prefix,.v-textarea.v-text-field--enclosed.v-text-field--outlined.v-input--dense .v-text-field__suffix,.v-textarea.v-text-field--enclosed.v-text-field--outlined.v-input--dense textarea,.v-textarea.v-text-field--enclosed.v-text-field--single-line.v-input--dense .v-text-field__prefix,.v-textarea.v-text-field--enclosed.v-text-field--single-line.v-input--dense .v-text-field__suffix,.v-textarea.v-text-field--enclosed.v-text-field--single-line.v-input--dense textarea{margin-top:6px}.v-textarea.v-text-field--box.v-text-field--outlined.v-input--dense .v-input__append-inner,.v-textarea.v-text-field--box.v-text-field--outlined.v-input--dense .v-input__append-outer,.v-textarea.v-text-field--box.v-text-field--outlined.v-input--dense .v-input__prepend-inner,.v-textarea.v-text-field--box.v-text-field--outlined.v-input--dense .v-input__prepend-outer,.v-textarea.v-text-field--box.v-text-field--single-line.v-input--dense .v-input__append-inner,.v-textarea.v-text-field--box.v-text-field--single-line.v-input--dense .v-input__append-outer,.v-textarea.v-text-field--box.v-text-field--single-line.v-input--dense .v-input__prepend-inner,.v-textarea.v-text-field--box.v-text-field--single-line.v-input--dense .v-input__prepend-outer,.v-textarea.v-text-field--enclosed.v-text-field--outlined.v-input--dense .v-input__append-inner,.v-textarea.v-text-field--enclosed.v-text-field--outlined.v-input--dense .v-input__append-outer,.v-textarea.v-text-field--enclosed.v-text-field--outlined.v-input--dense .v-input__prepend-inner,.v-textarea.v-text-field--enclosed.v-text-field--outlined.v-input--dense .v-input__prepend-outer,.v-textarea.v-text-field--enclosed.v-text-field--single-line.v-input--dense .v-input__append-inner,.v-textarea.v-text-field--enclosed.v-text-field--single-line.v-input--dense .v-input__append-outer,.v-textarea.v-text-field--enclosed.v-text-field--single-line.v-input--dense .v-input__prepend-inner,.v-textarea.v-text-field--enclosed.v-text-field--single-line.v-input--dense .v-input__prepend-outer{align-self:flex-start;margin-top:8px}.v-textarea.v-text-field--solo{align-items:flex-start}.v-textarea.v-text-field--solo .v-input__control textarea{caret-color:auto}.v-textarea.v-text-field--solo .v-input__append-inner,.v-textarea.v-text-field--solo .v-input__append-outer,.v-textarea.v-text-field--solo .v-input__prepend-inner,.v-textarea.v-text-field--solo .v-input__prepend-outer{align-self:flex-start;margin-top:12px}.v-application--is-ltr .v-textarea.v-text-field--solo .v-input__append-inner{padding-left:12px}.v-application--is-rtl .v-textarea.v-text-field--solo .v-input__append-inner{padding-right:12px}.v-textarea--auto-grow textarea{overflow:hidden}.v-textarea--no-resize textarea{resize:none}.v-textarea.v-text-field--enclosed .v-text-field__slot{align-self:stretch}.v-application--is-ltr .v-textarea.v-text-field--enclosed .v-text-field__slot{margin-right:-12px}.v-application--is-rtl .v-textarea.v-text-field--enclosed .v-text-field__slot{margin-left:-12px}.v-application--is-ltr .v-textarea.v-text-field--enclosed .v-text-field__slot textarea{padding-right:12px}.v-application--is-rtl .v-textarea.v-text-field--enclosed .v-text-field__slot textarea{padding-left:12px}\", \"\"]);\n// Exports\nmodule.exports = ___CSS_LOADER_EXPORT___;\n","export * from \"-!../../node_modules/vue-style-loader/index.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--7-oneOf-1-3!../../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Statusbar.vue?vue&type=style&index=0&id=bdd476bc&prod&lang=scss&scoped=true&\"","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../node_modules/css-loader/dist/runtime/api.js\");\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(false);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".mde-statusbar[data-v-bdd476bc]{font-size:smaller;text-align:right;padding:.3em 1em;color:#959694}.mde-statusbar span[data-v-bdd476bc]{display:inline-block;min-width:4em;margin-left:1em}\", \"\"]);\n// Exports\nmodule.exports = ___CSS_LOADER_EXPORT___;\n","\nexport default {\n  props: {\n    editorView: {\n      type: Object,\n      required: true,\n    },\n    fileUploadEnabled: {\n      type: Boolean,\n      default: false,\n    },\n    fileUploadInProgress: {\n      type: Boolean,\n      default: false,\n    },\n  },\n  computed: {\n    currentLineNumber() {\n      return this.editorView.state.doc.lineAt(this.editorView.state.selection.main.head).number;\n    },\n    currentColNumber() {\n      const pos = this.editorView.state.selection.main.head\n      const line = this.editorView.state.doc.lineAt(pos);\n      return pos - line.from;\n    },\n    lineCount() {\n      return this.editorView.state.doc.lines;\n    },\n    wordCount() {\n      const pattern = /[a-zA-Z0-9_\\u00A0-\\u02AF\\u0392-\\u03C9\\u0410-\\u04F9]+|[\\u4E00-\\u9FFF\\u3400-\\u4DBF\\uF900-\\uFAFF\\u3040-\\u309F\\uAC00-\\uD7AF]+/g;\n      const m = (this.editorView.state.doc.toString()).match(pattern);\n      let count = 0;\n      if (m === null) { return count; }\n      for (let i = 0; i < m.length; i++) {\n        if (m[i].charCodeAt(0) >= 0x4E00) {\n          count += m[i].length;\n        } else {\n          count += 1;\n        }\n      }\n      return count;\n    },\n  }\n}\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js??ref--2-0!../../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Statusbar.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js??ref--2-0!../../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Statusbar.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Statusbar.vue?vue&type=template&id=bdd476bc&scoped=true&\"\nimport script from \"./Statusbar.vue?vue&type=script&lang=js&\"\nexport * from \"./Statusbar.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Statusbar.vue?vue&type=style&index=0&id=bdd476bc&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"bdd476bc\",\n  null\n  \n)\n\nexport default component.exports","// Styles\nimport './VTextarea.sass'\n\n// Extensions\nimport VTextField from '../VTextField/VTextField'\n\n// Utilities\nimport mixins from '../../util/mixins'\n\n// Types\nimport Vue from 'vue'\n\ninterface options extends Vue {\n  $refs: {\n    input: HTMLTextAreaElement\n  }\n}\n\nconst baseMixins = mixins<options &\n  InstanceType<typeof VTextField>\n>(\n  VTextField\n)\n\n/* @vue/component */\nexport default baseMixins.extend({\n  name: 'v-textarea',\n\n  props: {\n    autoGrow: Boolean,\n    noResize: Boolean,\n    rowHeight: {\n      type: [Number, String],\n      default: 24,\n      validator: (v: any) => !isNaN(parseFloat(v)),\n    },\n    rows: {\n      type: [Number, String],\n      default: 5,\n      validator: (v: any) => !isNaN(parseInt(v, 10)),\n    },\n  },\n\n  computed: {\n    classes (): object {\n      return {\n        'v-textarea': true,\n        'v-textarea--auto-grow': this.autoGrow,\n        'v-textarea--no-resize': this.noResizeHandle,\n        ...VTextField.options.computed.classes.call(this),\n      }\n    },\n    noResizeHandle (): boolean {\n      return this.noResize || this.autoGrow\n    },\n  },\n\n  watch: {\n    autoGrow (val: boolean) {\n      this.$nextTick(() => {\n        val\n          ? this.calculateInputHeight()\n          : this.$refs.input?.style.removeProperty('height')\n      })\n    },\n    lazyValue () {\n      this.autoGrow && this.$nextTick(this.calculateInputHeight)\n    },\n    rowHeight () {\n      this.autoGrow && this.$nextTick(this.calculateInputHeight)\n    },\n  },\n\n  mounted () {\n    setTimeout(() => {\n      this.autoGrow && this.calculateInputHeight()\n    }, 0)\n  },\n\n  methods: {\n    calculateInputHeight () {\n      const input = this.$refs.input\n      if (!input) return\n\n      input.style.height = '0'\n      const height = input.scrollHeight\n      const minHeight = parseInt(this.rows, 10) * parseFloat(this.rowHeight)\n      // This has to be done ASAP, waiting for Vue\n      // to update the DOM causes ugly layout jumping\n      input.style.height = Math.max(minHeight, height) + 'px'\n    },\n    genInput () {\n      const input = VTextField.options.methods.genInput.call(this)\n\n      input.tag = 'textarea'\n      delete input.data!.attrs!.type\n      input.data!.attrs!.rows = this.rows\n\n      return input\n    },\n    onInput (e: Event) {\n      VTextField.options.methods.onInput.call(this, e)\n      this.autoGrow && this.calculateInputHeight()\n    },\n    onKeyDown (e: KeyboardEvent) {\n      // Prevents closing of a\n      // dialog when pressing\n      // enter\n      if (this.isFocused && e.keyCode === 13) {\n        e.stopPropagation()\n      }\n\n      this.$emit('keydown', e)\n    },\n  },\n})\n","export * from \"-!../../node_modules/vue-style-loader/index.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--7-oneOf-1-3!../../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FieldContent.vue?vue&type=style&index=0&id=2ccd4d7e&prod&lang=scss&scoped=true&\"","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../node_modules/css-loader/dist/runtime/api.js\");\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(false);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".mde-editor[data-v-2ccd4d7e]{display:contents}.mde-editor-side.cm-editor[data-v-2ccd4d7e]{width:50%}[data-v-2ccd4d7e] .mde-editor .cm-content,[data-v-2ccd4d7e] .mde-editor .cm-gutter{min-height:15em}[data-v-2ccd4d7e] .mde-editor .cm-scroller{overflow:auto}[data-v-2ccd4d7e] .mde-editor .cm-wrap{border:1px solid silver}[data-v-2ccd4d7e] .mde-editor .cm-focused{outline:none!important}[data-v-2ccd4d7e] .mde-editor .cm-content{font-family:\\\"Exo\\\"}[data-v-2ccd4d7e] .mde-editor .cm-content .tok-h1,[data-v-2ccd4d7e] .mde-editor .cm-content .tok-h2,[data-v-2ccd4d7e] .mde-editor .cm-content .tok-h3,[data-v-2ccd4d7e] .mde-editor .cm-content .tok-h4,[data-v-2ccd4d7e] .mde-editor .cm-content .tok-h5,[data-v-2ccd4d7e] .mde-editor .cm-content .tok-h6{font-weight:700}[data-v-2ccd4d7e] .mde-editor .cm-content .tok-h1{font-size:2em}[data-v-2ccd4d7e] .mde-editor .cm-content .tok-h2{font-size:1.75em}[data-v-2ccd4d7e] .mde-editor .cm-content .tok-h3{font-size:1.5em}[data-v-2ccd4d7e] .mde-editor .cm-content .tok-h4{font-size:1.25em}[data-v-2ccd4d7e] .mde-editor .cm-content .tok-h5{font-size:1.1em}[data-v-2ccd4d7e] .mde-editor .cm-content .tok-h6{font-size:1em}[data-v-2ccd4d7e] .mde-editor .cm-content .tok-strong{font-weight:700}[data-v-2ccd4d7e] .mde-editor .cm-content .tok-emphasis{font-style:italic}[data-v-2ccd4d7e] .mde-editor .cm-content .tok-strikethrough{text-decoration:line-through}[data-v-2ccd4d7e] .mde-editor .cm-content .tok-codeblock,[data-v-2ccd4d7e] .mde-editor .cm-content .tok-inlinecode{font-family:monospace;background-color:rgba(0,0,0,.05);color:currentColor}[data-v-2ccd4d7e] .mde-editor .cm-content .tok-table{font-family:monospace}[data-v-2ccd4d7e] .mde-editor .cm-content .tok-footnote{vertical-align:super;font-size:.9em}[data-v-2ccd4d7e] .mde-editor .cm-content .tok-footnote,[data-v-2ccd4d7e] .mde-editor .cm-content .tok-image,[data-v-2ccd4d7e] .mde-editor .cm-content .tok-link{color:#7f8c8d}[data-v-2ccd4d7e] .mde-editor .cm-content .tok-url{color:#aab2b3;text-decoration:underline}[data-v-2ccd4d7e] .mde-editor .cm-content .tok-quote{color:#7f8c8d}[data-v-2ccd4d7e] .mde-editor .cm-content .tok-todo{background-color:#e83221;color:#fff;padding-left:.2em;padding-right:.2em;border-radius:10%}[data-v-2ccd4d7e] .mde-editor .cm-content .tok-anglebracket,[data-v-2ccd4d7e] .mde-editor .cm-content .tok-attributename,[data-v-2ccd4d7e] .mde-editor .cm-content .tok-attributevalue,[data-v-2ccd4d7e] .mde-editor .cm-content .tok-comment,[data-v-2ccd4d7e] .mde-editor .cm-content .tok-tagname{font-family:monospace}[data-v-2ccd4d7e] .mde-editor .cm-content .tok-anglebracket,[data-v-2ccd4d7e] .mde-editor .cm-content .tok-tagname{color:#085}[data-v-2ccd4d7e] .mde-editor .cm-content .tok-attributename{color:#795da3}[data-v-2ccd4d7e] .mde-editor .cm-content .tok-attributevalue{color:#a11}[data-v-2ccd4d7e] .mde-editor .cm-content .tok-comment{color:#940}.preview[data-v-2ccd4d7e]{height:100%;min-height:15em;padding:.5em}.preview-side[data-v-2ccd4d7e]{width:50%}\", \"\"]);\n// Exports\nmodule.exports = ___CSS_LOADER_EXPORT___;\n","import './VGrid.sass'\n\nimport Vue, { PropOptions } from 'vue'\nimport mergeData from '../../util/mergeData'\nimport { upperFirst } from '../../util/helpers'\n\n// no xs\nconst breakpoints = ['sm', 'md', 'lg', 'xl']\n\nconst ALIGNMENT = ['start', 'end', 'center']\n\nfunction makeProps (prefix: string, def: () => PropOptions) {\n  return breakpoints.reduce((props, val) => {\n    props[prefix + upperFirst(val)] = def()\n    return props\n  }, {} as Dictionary<PropOptions>)\n}\n\nconst alignValidator = (str: any) => [...ALIGNMENT, 'baseline', 'stretch'].includes(str)\nconst alignProps = makeProps('align', () => ({\n  type: String,\n  default: null,\n  validator: alignValidator,\n}))\n\nconst justifyValidator = (str: any) => [...ALIGNMENT, 'space-between', 'space-around'].includes(str)\nconst justifyProps = makeProps('justify', () => ({\n  type: String,\n  default: null,\n  validator: justifyValidator,\n}))\n\nconst alignContentValidator = (str: any) => [...ALIGNMENT, 'space-between', 'space-around', 'stretch'].includes(str)\nconst alignContentProps = makeProps('alignContent', () => ({\n  type: String,\n  default: null,\n  validator: alignContentValidator,\n}))\n\nconst propMap = {\n  align: Object.keys(alignProps),\n  justify: Object.keys(justifyProps),\n  alignContent: Object.keys(alignContentProps),\n}\n\nconst classMap = {\n  align: 'align',\n  justify: 'justify',\n  alignContent: 'align-content',\n}\n\nfunction breakpointClass (type: keyof typeof propMap, prop: string, val: string) {\n  let className = classMap[type]\n  if (val == null) {\n    return undefined\n  }\n  if (prop) {\n    // alignSm -> Sm\n    const breakpoint = prop.replace(type, '')\n    className += `-${breakpoint}`\n  }\n  // .align-items-sm-center\n  className += `-${val}`\n  return className.toLowerCase()\n}\n\nconst cache = new Map<string, any[]>()\n\nexport default Vue.extend({\n  name: 'v-row',\n  functional: true,\n  props: {\n    tag: {\n      type: String,\n      default: 'div',\n    },\n    dense: Boolean,\n    noGutters: Boolean,\n    align: {\n      type: String,\n      default: null,\n      validator: alignValidator,\n    },\n    ...alignProps,\n    justify: {\n      type: String,\n      default: null,\n      validator: justifyValidator,\n    },\n    ...justifyProps,\n    alignContent: {\n      type: String,\n      default: null,\n      validator: alignContentValidator,\n    },\n    ...alignContentProps,\n  },\n  render (h, { props, data, children }) {\n    // Super-fast memoization based on props, 5x faster than JSON.stringify\n    let cacheKey = ''\n    for (const prop in props) {\n      cacheKey += String((props as any)[prop])\n    }\n    let classList = cache.get(cacheKey)\n\n    if (!classList) {\n      classList = []\n      // Loop through `align`, `justify`, `alignContent` breakpoint props\n      let type: keyof typeof propMap\n      for (type in propMap) {\n        propMap[type].forEach(prop => {\n          const value: string = (props as any)[prop]\n          const className = breakpointClass(type, prop, value)\n          if (className) classList!.push(className)\n        })\n      }\n\n      classList.push({\n        'no-gutters': props.noGutters,\n        'row--dense': props.dense,\n        [`align-${props.align}`]: props.align,\n        [`justify-${props.justify}`]: props.justify,\n        [`align-content-${props.alignContent}`]: props.alignContent,\n      })\n\n      cache.set(cacheKey, classList)\n    }\n\n    return h(\n      props.tag,\n      mergeData(data, {\n        staticClass: 'row',\n        class: classList,\n      }),\n      children\n    )\n  },\n})\n","import './VGrid.sass'\n\nimport Vue, { VNode, PropOptions } from 'vue'\nimport mergeData from '../../util/mergeData'\nimport { upperFirst } from '../../util/helpers'\n\n// no xs\nconst breakpoints = ['sm', 'md', 'lg', 'xl']\n\nconst breakpointProps = (() => {\n  return breakpoints.reduce((props, val) => {\n    props[val] = {\n      type: [Boolean, String, Number],\n      default: false,\n    }\n    return props\n  }, {} as Dictionary<PropOptions>)\n})()\n\nconst offsetProps = (() => {\n  return breakpoints.reduce((props, val) => {\n    props['offset' + upperFirst(val)] = {\n      type: [String, Number],\n      default: null,\n    }\n    return props\n  }, {} as Dictionary<PropOptions>)\n})()\n\nconst orderProps = (() => {\n  return breakpoints.reduce((props, val) => {\n    props['order' + upperFirst(val)] = {\n      type: [String, Number],\n      default: null,\n    }\n    return props\n  }, {} as Dictionary<PropOptions>)\n})()\n\nconst propMap = {\n  col: Object.keys(breakpointProps),\n  offset: Object.keys(offsetProps),\n  order: Object.keys(orderProps),\n}\n\nfunction breakpointClass (type: keyof typeof propMap, prop: string, val: boolean | string | number) {\n  let className = type\n  if (val == null || val === false) {\n    return undefined\n  }\n  if (prop) {\n    const breakpoint = prop.replace(type, '')\n    className += `-${breakpoint}`\n  }\n  // Handling the boolean style prop when accepting [Boolean, String, Number]\n  // means Vue will not convert <v-col sm></v-col> to sm: true for us.\n  // Since the default is false, an empty string indicates the prop's presence.\n  if (type === 'col' && (val === '' || val === true)) {\n    // .col-md\n    return className.toLowerCase()\n  }\n  // .order-md-6\n  className += `-${val}`\n  return className.toLowerCase()\n}\n\nconst cache = new Map<string, any[]>()\n\nexport default Vue.extend({\n  name: 'v-col',\n  functional: true,\n  props: {\n    cols: {\n      type: [Boolean, String, Number],\n      default: false,\n    },\n    ...breakpointProps,\n    offset: {\n      type: [String, Number],\n      default: null,\n    },\n    ...offsetProps,\n    order: {\n      type: [String, Number],\n      default: null,\n    },\n    ...orderProps,\n    alignSelf: {\n      type: String,\n      default: null,\n      validator: (str: any) => ['auto', 'start', 'end', 'center', 'baseline', 'stretch'].includes(str),\n    },\n    tag: {\n      type: String,\n      default: 'div',\n    },\n  },\n  render (h, { props, data, children, parent }): VNode {\n    // Super-fast memoization based on props, 5x faster than JSON.stringify\n    let cacheKey = ''\n    for (const prop in props) {\n      cacheKey += String((props as any)[prop])\n    }\n    let classList = cache.get(cacheKey)\n\n    if (!classList) {\n      classList = []\n      // Loop through `col`, `offset`, `order` breakpoint props\n      let type: keyof typeof propMap\n      for (type in propMap) {\n        propMap[type].forEach(prop => {\n          const value: string | number | boolean = (props as any)[prop]\n          const className = breakpointClass(type, prop, value)\n          if (className) classList!.push(className)\n        })\n      }\n\n      const hasColClasses = classList.some(className => className.startsWith('col-'))\n\n      classList.push({\n        // Default to .col if no other col-{bp}-* classes generated nor `cols` specified.\n        col: !hasColClasses || !props.cols,\n        [`col-${props.cols}`]: props.cols,\n        [`offset-${props.offset}`]: props.offset,\n        [`order-${props.order}`]: props.order,\n        [`align-self-${props.alignSelf}`]: props.alignSelf,\n      })\n\n      cache.set(cacheKey, classList)\n    }\n\n    return h(props.tag, mergeData(data, { class: classList }), children)\n  },\n})\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js??ref--2-0!../../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FieldContent.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js??ref--2-0!../../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FieldContent.vue?vue&type=script&lang=js&\"","\nimport MarkdownEditorBase from '~/mixins/MarkdownEditorBase';\n\nexport default {\n  mixins: [MarkdownEditorBase],\n}\n","import { render, staticRenderFns } from \"./FieldContent.vue?vue&type=template&id=2ccd4d7e&scoped=true&\"\nimport script from \"./FieldContent.vue?vue&type=script&lang=js&\"\nexport * from \"./FieldContent.vue?vue&type=script&lang=js&\"\nimport style0 from \"./FieldContent.vue?vue&type=style&index=0&id=2ccd4d7e&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2ccd4d7e\",\n  null\n  \n)\n\nexport default component.exports\n\n/* nuxt-component-imports */\ninstallComponents(component, {MarkdownToolbar: require('/app/frontend/components/Markdown/Toolbar.vue').default,MarkdownPreview: require('/app/frontend/components/Markdown/Preview.vue').default,MarkdownStatusbar: require('/app/frontend/components/Markdown/Statusbar.vue').default})\n","export * from \"-!../../node_modules/vue-style-loader/index.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--7-oneOf-1-3!../../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Field.vue?vue&type=style&index=0&id=4da8136f&prod&lang=scss&scoped=true&\"","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../node_modules/css-loader/dist/runtime/api.js\");\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(false);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".v-input__slot[data-v-4da8136f]{padding:0 1px!important;cursor:auto!important}.v-text-field__slot[data-v-4da8136f]{margin-right:0!important;max-width:100%}.v-text-field__slot label[data-v-4da8136f]{left:11px!important}.markdown-editor[data-v-4da8136f]{width:100%}\", \"\"]);\n// Exports\nmodule.exports = ___CSS_LOADER_EXPORT___;\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js??ref--2-0!../../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Field.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js??ref--2-0!../../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Field.vue?vue&type=script&lang=js&\"","\nimport VTextArea from 'vuetify/lib/components/VTextarea/VTextarea';\nimport VInput from 'vuetify/lib/components/VInput/VInput';\nimport mixins from 'vuetify/lib/util/mixins';\nimport MarkdownFieldContent from './FieldContent.vue';\n\nconst baseMixins = mixins(VTextArea);\nexport default baseMixins.extend({\n  extends: VTextArea,\n\n  props: {\n    outlined: {\n      type: Boolean,\n      default: true,\n    },\n    lang: {\n      type: String,\n      default: null,\n    },\n    uploadFile: {\n      type: Function,\n      default: null,\n    },\n    rewriteFileUrl: {\n      type: Function,\n      default: null,\n    },\n    rewriteReferenceLink: {\n      type: Function,\n      default: null,\n    },\n  },\n  computed: {\n    isLabelActive() {\n      return true;\n    }\n  },\n  methods: {\n    genInput() {\n      return this.$createElement(MarkdownFieldContent, {\n        props: {\n          value: this.value,\n          disabled: this.disabled,\n          lang: this.lang,\n          uploadFile: this.uploadFile,\n          rewriteFileUrl: this.rewriteFileUrl,\n          rewriteReferenceLink: this.rewriteReferenceLink,\n        },\n        attrs: {\n          class: 'markdown-editor'\n        },\n        on: {\n          input: (value) => {\n            this.$emit('input', value);\n          }\n        }\n      });\n    },\n    onMouseDown(e) {\n      // Allow text selection in markdown editor preview\n      VInput.options.methods.onMouseDown.call(this, e);\n    },\n  },\n})\n","var render, staticRenderFns\nimport script from \"./Field.vue?vue&type=script&lang=js&\"\nexport * from \"./Field.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Field.vue?vue&type=style&index=0&id=4da8136f&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4da8136f\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}