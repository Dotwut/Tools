{"version":3,"sources":["webpack:///./utils/urls.js","webpack:///./components/SavingLoaderSpinner.vue?d4cb","webpack:///./components/EditToolbar.vue?8be5","webpack:///./components/SavingLoaderSpinner.vue?5714","webpack:///./components/SavingLoaderSpinner.vue","webpack:///./components/SavingLoaderSpinner.vue?fc7b","webpack:///./components/SavingLoaderSpinner.vue?6809","webpack:///./components/EditToolbar.vue?7aea","webpack:///./components/EditToolbar.vue?f1fa","webpack:///./components/EditToolbar.vue","webpack:///./components/EditToolbar.vue?4e7e","webpack:///./components/EditToolbar.vue?c2e4"],"names":["i","absoluteApiUrl","url","axios","some","p","startsWith","urlJoin","URL","defaults","baseURL","window","location","origin","CursorPaginationFetcher","toast","this","nextPageURL","isLoading","data","hasError","errorData","hasNextPage","$get","res","next","push","results","response","global","requestError","error","SearchableCursorPaginationFetcher","searchFilters","search","_searchFilters","_fetchNextPageDebounced","debounce","_fetchNextPage","fetcher","_createFetcher","searchParams","URLSearchParams","split","Object","entries","k","v","Array","isArray","delete","e","append","set","searchUrl","toString","val","assign","fetchNextPage","filters","fetchNextPageImmediate","flush","content","__esModule","default","module","locals","exports","add","component","_self","staticClass","_vm","staticRenderFns","___CSS_LOADER_EXPORT___","___CSS_LOADER_API_IMPORT___","props","type","form","canAutoSave","Boolean","save","Function","deleteConfirmInput","String","lockUrl","unlockUrl","editMode","EditMode","EDIT","errorMessage","events","hasChangesValue","savingInProgress","deletingInProgress","lockingInProgress","previousData","wasReset","hasLock","lockInfo","lockError","refreshLockInterval","computed","canDelete","canSave","autoSaveEnabled","get","$store","state","settings","commit","actionInProgress","hasChanges","watch","deep","immediate","handler","newValue","oldValue","valueChanged","isEqual","cloneDeep","performLock","$emit","autoSave","cancel","READONLY","performUnlock","created","performSave","mounted","addEventListener","beforeLeaveBrowser","keyboardShortcutListener","onUnloadBrowser","beforeDestroy","removeEventListener","clearInterval","methods","validate","$toast","performDelete","hasLockReset","hasChangesValueReset","selfLockedEditAnyway","console","log","performLockRequest","forceLock","$axios","post","refresh_lock","setInterval","lockResponse","lockedData","lock_info","status","Error","id","message","includes","performUnlockRequest","browserUnload","$post","navigator","sendBeacon","$auth","user","Promise","resolve","then","unlockedData","catch","undefined","event","returnValue","beforeLeave","to","from","resetComponent","answer","confirm","ctrlKey","key","metaKey","preventDefault","_c","model","value","callback","attrs","scopedSlots","fn","on","_u","proxy","_v","render","installComponents","SavingLoaderSpinner","SBtn","STooltip","BtnDelete"],"mappings":"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","file":"b170158.js","sourcesContent":["import urlJoin from 'url-join';\nimport { debounce } from 'lodash';\n\nexport function absoluteApiUrl(url, axios) {\n  if (['http', 'data'].some(p => url.startsWith(p))) {\n    return url;\n  } else if (url.startsWith('/api/')) {\n    return urlJoin(new URL(axios.defaults.baseURL, window.location).origin, url);\n  } else {\n    return urlJoin(axios.defaults.baseURL, url);\n  }\n}\n\nexport function relativeTo(url, baseUrl) {\n  const absUrl = absoluteApiUrl(url);\n  baseUrl = absoluteApiUrl(baseUrl);\n\n  if (absUrl.startsWith(baseUrl)) {\n    return absUrl.substring(baseUrl.length);\n  } else {\n    return url;\n  }\n}\n\nexport class CursorPaginationFetcher {\n  constructor(baseURL, axios, toast) {\n    this.axios = axios;\n    this.toast = toast;\n    this.baseURL = baseURL;\n\n    this.nextPageURL = this.baseURL;\n    this.isLoading = false;\n    this.data = [];\n    this.hasError = false;\n    this.errorData = null;\n  }\n\n  get hasNextPage() {\n    return this.nextPageURL !== null;\n  }\n\n  async fetchNextPage() {\n    if (!this || this.isLoading || !this.hasNextPage) {\n      return;\n    }\n\n    try {\n      this.isLoading = true;\n\n      const res = await this.axios.$get(this.nextPageURL);\n      this.nextPageURL = res.next;\n      this.data.push(...res.results);\n\n      this.hasError = false;\n      this.errorData = null;\n    } catch (error) {\n      this.hasError = true;\n      this.errorData = error?.response?.data || null;\n\n      this.toast.global.requestError({ error });\n    } finally {\n      this.isLoading = false;\n    }\n  }\n}\n\nexport class SearchableCursorPaginationFetcher {\n  constructor({ baseURL, searchFilters = { search: '' }, axios, toast }) {\n    this.axios = axios;\n    this.toast = toast;\n    this.baseURL = baseURL;\n    this._searchFilters = searchFilters;\n\n    this._fetchNextPageDebounced = debounce(function() { this._fetchNextPage(); }, 500);\n\n    this.fetcher = null;\n    this._createFetcher();\n  }\n\n  _createFetcher() {\n    const searchParams = new URLSearchParams(this.baseURL.split('?')[1]);\n    for (const [k, v] of Object.entries(this.searchFilters)) {\n      if (v) {\n        if (Array.isArray(v)) {\n          searchParams.delete(k);\n          for (const e of v) {\n            searchParams.append(k, e);\n          }\n        } else {\n          searchParams.set(k, v);\n        }\n      }\n    }\n    const searchUrl = this.baseURL.split('?')[0] + '?' + searchParams.toString();\n    this.fetcher = new CursorPaginationFetcher(searchUrl, this.axios, this.toast);\n  }\n\n  search(val) {\n    this._searchFilters = Object.assign(this._searchFilters, { search: val })\n    this._createFetcher();\n    this.fetchNextPage();\n  }\n\n  applyFilters(filters) {\n    Object.assign(this._searchFilters, filters);\n    this._createFetcher();\n    this.fetchNextPageImmediate()\n  }\n\n  get searchFilters() {\n    return this._searchFilters;\n  }\n\n  get searchQuery() {\n    return this.searchFilters.search;\n  }\n\n  set searchQuery(val) {\n    this.search(val, this._searchFilters);\n  }\n\n  get hasNextPage() {\n    return this.fetcher.hasNextPage;\n  }\n\n  get hasError() {\n    return this.fetcher.hasError;\n  }\n\n  get errorData() {\n    return this.fetcher.errorData;\n  }\n\n  get data() {\n    return this.fetcher.data;\n  }\n\n  fetchNextPage() {\n    this._fetchNextPageDebounced();\n  }\n\n  async _fetchNextPage() {\n    await this.fetcher.fetchNextPage();\n  }\n\n  fetchNextPageImmediate() {\n    if (!this) {\n      return;\n    }\n\n    this._fetchNextPageDebounced();\n    this._fetchNextPageDebounced.flush();\n  }\n}\n","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../node_modules/css-loader/dist/cjs.js??ref--3-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--3-oneOf-1-2!../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./SavingLoaderSpinner.vue?vue&type=style&index=0&id=8eb3e0b0&prod&scoped=true&lang=css&\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"0af97519\", content, true, {\"sourceMap\":false});","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../node_modules/sass-loader/dist/cjs.js??ref--7-oneOf-1-3!../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./EditToolbar.vue?vue&type=style&index=0&id=fd680614&prod&lang=scss&scoped=true&\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"2184e246\", content, true, {\"sourceMap\":false});","import { render, staticRenderFns } from \"./SavingLoaderSpinner.vue?vue&type=template&id=8eb3e0b0&scoped=true&\"\nvar script = {}\nimport style0 from \"./SavingLoaderSpinner.vue?vue&type=style&index=0&id=8eb3e0b0&prod&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"8eb3e0b0\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('span',{staticClass:\"loader-spinner\"},[_c('v-icon',[_vm._v(\"mdi-cached\")])],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export * from \"-!../node_modules/vue-style-loader/index.js??ref--3-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--3-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--3-oneOf-1-2!../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./SavingLoaderSpinner.vue?vue&type=style&index=0&id=8eb3e0b0&prod&scoped=true&lang=css&\"","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../node_modules/css-loader/dist/runtime/api.js\");\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(false);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".loader-spinner[data-v-8eb3e0b0]{animation:loader-8eb3e0b0 1s infinite;display:inline-flex}@keyframes loader-8eb3e0b0{0%{transform:rotate(0)}to{transform:rotate(-1turn)}}\", \"\"]);\n// Exports\nmodule.exports = ___CSS_LOADER_EXPORT___;\n","export * from \"-!../node_modules/vue-style-loader/index.js??ref--7-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../node_modules/sass-loader/dist/cjs.js??ref--7-oneOf-1-3!../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./EditToolbar.vue?vue&type=style&index=0&id=fd680614&prod&lang=scss&scoped=true&\"","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../node_modules/css-loader/dist/runtime/api.js\");\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(false);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".toolbar-sticky[data-v-fd680614]{position:sticky;top:0;z-index:1}.btn-autosave[data-v-fd680614]  .v-label{width:-moz-max-content;width:max-content}\", \"\"]);\n// Exports\nmodule.exports = ___CSS_LOADER_EXPORT___;\n","\nimport { debounce, cloneDeep, isEqual } from 'lodash';\nimport { absoluteApiUrl } from '~/utils/urls';\nimport { EditMode } from '~/utils/other';\n\nexport default {\n  props: {\n    data: {\n      type: Object,\n      default: null,\n    },\n    form: {\n      type: Object,\n      default: null,\n    },\n    canAutoSave: {\n      type: Boolean,\n      default: false,\n    },\n    save: {\n      type: Function,\n      default: null,\n    },\n    delete: {\n      type: Function,\n      default: null,\n    },\n    deleteConfirmInput: {\n      type: String,\n      default: null,\n    },\n    lockUrl: {\n      type: String,\n      default: null,\n    },\n    unlockUrl: {\n      type: String,\n      default: null,\n    },\n    editMode: {\n      type: String,\n      default: EditMode.EDIT,\n    },\n    errorMessage: {\n      type: String,\n      default: null,\n    }\n  },\n  events: [\n    'update:editMode',\n    'update:lockedData',\n  ],\n  data() {\n    return {\n      hasChangesValue: false,\n      savingInProgress: false,\n      deletingInProgress: false,\n      lockingInProgress: false,\n      previousData: null,\n      wasReset: true,\n      \n      hasLock: false,\n      lockInfo: null,\n      lockError: false,\n      refreshLockInterval: null,\n    }\n  },\n  computed: {\n    canDelete() {\n      return this.delete !== null && this.editMode === EditMode.EDIT;\n    },\n    canSave() {\n      return this.save !== null && this.editMode === EditMode.EDIT;\n    },\n    autoSaveEnabled: {\n      get() {\n        return this.canSave && this.canAutoSave && this.$store.state.settings.autoSaveEnabled;\n      },\n      set(val) {\n        this.$store.commit('settings/updateAutoSaveEnabled', val);\n      }\n    },\n    actionInProgress() {\n      return this.savingInProgress || this.deletingInProgress;\n    },\n    hasChanges() {\n      return this.hasChangesValue || this.data === null;\n    }\n  },\n  watch: {\n    data: {\n      deep: true,\n      immediate: true,\n      handler(newValue) {\n        const oldValue = this.previousData;\n        const valueChanged = isEqual(newValue, this.previousData);\n        if (!this.wasReset && !valueChanged) {\n          this.hasChangesValue = true;\n          this.previousData = cloneDeep(newValue);\n\n          this.$emit('update:data', { newValue, oldValue });\n          if (this.autoSaveEnabled) {\n            this.autoSave();\n          }\n        } else if (this.wasReset) {\n          this.previousData = cloneDeep(newValue);\n          this.wasReset = false;\n          if (this.editMode === EditMode.EDIT) {\n            this.performLock();\n          }\n        }\n      }\n    },\n    autoSaveEnabled(newValue) {\n      if (newValue) {\n        this.autoSave();\n      } else {\n        this.autoSave.cancel();\n      }\n    },\n    editMode(newValue, oldValue) {\n      if (newValue === EditMode.EDIT && !this.hasLock) {\n        this.performLock();\n      } else if (newValue === EditMode.READONLY) {\n        this.performUnlock(false);\n      }\n    }\n  },\n  created() {\n    this.autoSave = debounce(this.performSave, 5000);\n  },\n  mounted() {\n    window.addEventListener('beforeunload', this.beforeLeaveBrowser);\n    window.addEventListener('keydown', this.keyboardShortcutListener);\n    window.addEventListener('unload', this.onUnloadBrowser);\n  },\n  beforeDestroy() {\n    window.removeEventListener('beforeunload', this.beforeLeaveBrowser);\n    window.removeEventListener('keydown', this.keyboardShortcutListener);\n    window.removeEventListener('unload', this.onUnloadBrowser);\n\n    if (this.refreshLockInterval) {\n      clearInterval(this.refreshLockInterval);\n      this.refreshLockInterval = null;\n    }\n  },\n  methods: {\n    async performSave() {\n      if (!this.canSave || !this.hasChanges || this.savingInProgress) {\n        return;\n      }\n      if (this.form !== null) {\n        if (!this.form.validate()) {\n          return;\n        }\n      }\n      \n      try {\n        this.savingInProgress = true;\n        await this.save(this.data);\n\n        this.hasChangesValue = false;\n        this.previousData = cloneDeep(this.data);\n      } catch (error) {\n        this.$toast.global.requestError({ error });\n      } finally {\n        this.savingInProgress = false;\n      }\n    },\n    async performDelete() {\n      if (!this.canDelete || !(this.hasLock || this.lockUrl === null)) {\n        return;\n      }\n\n      const hasLockReset = this.hasLock;\n      const hasChangesValueReset = this.hasChangesValue;\n      try {\n        this.hasLock = false;\n        this.hasChangesValue = false;\n        await this.delete(this.data);\n      } catch (error) {\n        this.hasLock = hasLockReset;\n        this.hasChangesValue = hasChangesValueReset;\n        throw error;\n      }\n    },\n    async selfLockedEditAnyway() {\n      await this.performLock(true)\n      // eslint-disable-next-line no-console\n      console.log('selfLockedEditAnyway', this.hasLock);\n      if (this.hasLock) {\n        this.$emit('update:editMode', EditMode.EDIT);\n      }\n    },\n    async performLockRequest(forceLock) {\n      return await this.$axios.post(this.lockUrl, {\n        refresh_lock: this.hasLock || forceLock,\n      });\n    },\n    async performLock(forceLock = false) {\n      // eslint-disable-next-line no-console\n      console.log('EditToolbar.performLock');\n      if (this.lockingInProgress || !this.lockUrl || (this.editMode === EditMode.READONLY && !forceLock) || this.wasReset) {\n        return;\n      }\n\n      this.lockingInProgress = true;\n      if (!this.refreshLockInterval) {\n        this.refreshLockInterval = setInterval(this.performLock, 30_000);\n      }\n\n      try {\n        const lockResponse = await this.performLockRequest(forceLock);\n        // eslint-disable-next-line no-console\n        console.log('performLock lockResponse', lockResponse);\n\n        const lockedData = lockResponse.data;\n        this.lockInfo = lockedData.lock_info;\n        this.$emit('update:lockedData', lockedData);\n\n        if (lockResponse.status !== 201 && !this.hasLock && !forceLock) {\n          throw new Error('Lock error: User has lock in another tab or browser session.');\n        }\n\n        this.hasLock = true;\n        this.lockError = false;\n      } catch (error) {\n        // Do not release lock (in frontend) if the user previously had the lock.\n        // Prevent resetting lock on network errors.\n        // hasLock is only set to false in situations where the API tells us that we do not have the lock.\n        // this.hasLock = false;\n\n        if (error.response?.status === 403 && error.response?.data?.lock_info) {\n          // eslint-disable-next-line no-console\n          console.log('Lock error: Another user has the lock. Switching to readonly mode.', this.data.id, error, error.response.data);\n          this.lockInfo = error.response.data.lock_info;\n          this.lockError = true;\n          this.hasLock = false;\n          this.$emit('update:editMode', EditMode.READONLY);\n          this.$emit('update:lockedData', error.response.data);\n        } else if (error?.message?.includes('User has lock in another tab or browser session')) {\n          // Open by current user in another tab or browser session\n          // eslint-disable-next-line no-console\n          console.log(error, this.data.id);\n          this.lockError = true;\n          this.hasLock = false;\n          this.$emit('update:editMode', EditMode.READONLY);\n        } else {\n          this.$toast.global.requestError({ error, message: 'Locking failed' });\n        }\n      } finally {\n        this.lockingInProgress = false;\n      }\n    },\n    performUnlockRequest(browserUnload) {\n      if (browserUnload) {\n        // sendbeacon does not support setting headers (including Authorization header)\n        // we might want to replace sendBeacon with fetch.keepalive in the future\n        // however, fetch.keepalive is currently not supported by Firefox\n        window.navigator.sendBeacon(\n          absoluteApiUrl(this.unlockUrl, this.$axios),\n          this.$auth.user.id\n        );\n      } else {\n        return this.$axios.$post(this.unlockUrl, {});\n      }\n    },\n    performUnlock(browserUnload = false) {\n      // eslint-disable-next-line no-console\n      console.log('EditToolbar.performUnlock', this.hasLock);\n      if (!this.unlockUrl || !this.hasLock) {\n        return Promise.resolve();\n      }\n      \n      if (this.refreshLockInterval) {\n        clearInterval(this.refreshLockInterval);\n        this.refreshLockInterval = null;\n      }\n      \n      this.hasLock = false;\n      this.lockInfo = null;\n      this.lockError = false;\n\n      try {\n        const res = this.performUnlockRequest(browserUnload);\n        if (!browserUnload) {\n          return res.then((unlockedData) => {\n            this.lockInfo = unlockedData.lock_info;\n            this.$emit('update:lockedData', unlockedData);\n          })\n            .catch((error) => {\n              if (error?.response?.data?.lock_info !== undefined) {\n                this.lockInfo = error.response.data.lock_info;\n                this.$emit('update:lockedData', error.response.data);\n              }\n            });\n        }\n      } catch (error) {\n        // silently ignore error\n        // eslint-disable-next-line no-console\n        console.error('Unlock error', error);\n      }\n\n      return Promise.resolve();\n    },\n    beforeLeaveBrowser(event) {\n      if (!this.canSave || !this.hasChangesValue || this.autoSaveEnabled || this.actionInProgress) {\n        return;\n      }\n      // Browser navigation event onbeforeunload: user navigates to a different site or refreshes pages\n      // Message is not displayed, but should not be empty\n      event.returnValue = 'Leave?';\n      return 'Leave?';\n    },\n    async beforeLeave(to, from, next) {\n      if (!this.canSave || !this.hasChangesValue || this.actionInProgress) {\n        next();\n        await this.resetComponent()\n      } else if (this.autoSaveEnabled) {\n        next();\n        await this.performSave();\n        await this.resetComponent();\n      } else {\n        // vue-router navigation event: user navigates to a different SPA page\n        const answer = window.confirm('Do you really want to leave? You have unsaved changes!');\n        next(answer);\n        if (answer) {\n          await this.resetComponent();\n        }\n      }\n    },\n    onUnloadBrowser() {\n      // Note: the unload event is not triggered in certain situations\n      //       e.g. on mobile devices or on Chrome when a user navigates to a different origin\n      //       https://developer.mozilla.org/en-US/docs/Web/API/Window/unload_event#usage_notes\n      // eslint-disable-next-line no-console\n      console.log('EditToolbar.onUnloadBrowser');\n      this.performUnlock(true);\n    },\n    keyboardShortcutListener(event) {\n      if ((event.ctrlKey && event.key === 's') || (event.metaKey && event.key === 's')) {\n        event.preventDefault();\n        this.performSave();\n      }\n    },\n    resetComponent() {\n      this.hasChangesValue = false;\n      this.previousData = null;\n      this.wasReset = true;\n\n      this.lockInfo = null;\n      this.lockError = false;\n\n      return this.performUnlock(false);\n    }\n  }\n}\n","import mod from \"-!../node_modules/babel-loader/lib/index.js??ref--2-0!../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./EditToolbar.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/babel-loader/lib/index.js??ref--2-0!../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./EditToolbar.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./EditToolbar.vue?vue&type=template&id=fd680614&scoped=true&\"\nimport script from \"./EditToolbar.vue?vue&type=script&lang=js&\"\nexport * from \"./EditToolbar.vue?vue&type=script&lang=js&\"\nimport style0 from \"./EditToolbar.vue?vue&type=style&index=0&id=fd680614&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"fd680614\",\n  null\n  \n)\n\nexport default component.exports\n\n/* nuxt-component-imports */\ninstallComponents(component, {SavingLoaderSpinner: require('/app/frontend/components/SavingLoaderSpinner.vue').default,SBtn: require('/app/frontend/components/S/Btn.vue').default,STooltip: require('/app/frontend/components/S/Tooltip.vue').default,BtnDelete: require('/app/frontend/components/Btn/Delete.vue').default})\n"],"sourceRoot":""}